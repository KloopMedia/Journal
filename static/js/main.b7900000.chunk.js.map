{"version":3,"sources":["util/Firebase.js","util/Auth.js","kloop_transparent_site.png","Components/Appbar/newAppBar.js","Components/form/feedback.js","Components/Dialog/FeedbackDialog.js","Components/form/file.js","Components/form/textInput.js","Components/form/selectBox.js","Components/form/radiobutton.js","Components/form/timePickers.js","Components/form/checkbox.js","Components/Profile/Profile.js","Components/Tasks/Card.js","Components/Tasks/Tasks.js","Components/form/text.js","Components/form/form.js","Components/Dialog/Dialog.js","Components/Tasks/Task.js","Components/Cases/Case.js","Components/Cases/Cases.js","Components/Notifications/Notification.js","Components/Notifications/Notifications.js","Components/Home/Home.js","Components/Moderator/UserCard.js","Components/Moderator/ModeratedTask.js","Components/Moderator/PaginatedTasks.js","Components/Moderator/TasksObserver.js","Components/Auth/Signin.js","util/PrivateRoute.js","Components/FAQ/Card.js","Components/FAQ/FAQ.js","App.js","reportWebVitals.js","index.js"],"names":["firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","provider","auth","GoogleAuthProvider","signInWithGoogle","signInWithPopup","AuthContext","React","createContext","AuthProvider","children","useState","currentUser","setCurrentUser","setPending","useEffect","onAuthStateChanged","user","rootRef","firestore","collection","userRef","doc","uid","get","then","exists","console","log","set","username","displayName","email","created_date","FieldValue","serverTimestamp","Provider","value","drawerWidth","useStyles","makeStyles","theme","root","display","drawer","breakpoints","up","width","flexShrink","appBar","background","boxShadow","marginLeft","menuButton","color","marginRight","spacing","toolbar","mixins","drawerPaper","content","flexGrow","padding","ResponsiveDrawer","props","window","classes","useTheme","mobileOpen","setMobileOpen","useContext","anchorEl","setAnchorEl","menuOpen","Boolean","handleDrawerToggle","moderator","setModerator","numOfMessages","setNumOfMessages","messages","setMessages","snap","forEach","id","catch","unsubscribe","where","onSnapshot","a","size","m","count","data","shown","push","sort","b","toDate","className","Divider","to","container","undefined","document","body","CssBaseline","AppBar","position","Toolbar","IconButton","aria-label","edge","onClick","Grid","style","src","KloopLogo","alt","height","aria-controls","aria-haspopup","event","currentTarget","Badge","badgeContent","overlap","fill","fontSize","anchorOrigin","vertical","horizontal","keepMounted","transformOrigin","open","onClose","direction","alignItems","length","map","message","i","justify","Typography","flex","title","Button","update","align","borderColor","variant","signOut","Hidden","smUp","implementation","Drawer","anchor","paper","ModalProps","xsDown","Feedback","setValue","textValue","setTextValue","returnAnswer","FormControl","const","paddingBottom","RadioGroup","name","onChange","target","reason","text","answers","el","FormControlLabel","control","Radio","label","disabled","locked","TextField","multiline","rows","fullWidth","AlertDialog","Dialog","state","handleClose","aria-labelledby","aria-describedby","DialogTitle","DialogContent","DialogContentText","description","returnFeedback","DialogActions","dialogFunction","feedbackValue","autoFocus","File","setFormData","setShowFeedback","returnFile","feedbackType","askFeedback","saveQuestionFeedback","prevTaskId","type","files","multiple","BasicTextFields","forwardRef","ref","dialogOpen","setDialogOpen","setFeedback","feedbackFormData","showFeedback","index","response","attachMaterials","uploadFilesData","handleDialogClose","Box","marginBottom","marginTop","paddingRight","formControl","minWidth","maxWidth","SelectBox","setOpen","required","InputLabel","Select","labelId","onOpen","indexOf","MenuItem","RadioButton","flexWrap","textField","TimePickers","noValidate","InputLabelProps","shrink","InputProps","disableUnderline","CheckboxesGroup","setState","ready","setReady","answer","handleChange","checked","component","FormLabel","FormGroup","Checkbox","Profile","questions","setQuestions","setAnswers","forms","setForms","uploaded","setUploaded","redirect","setRedirect","setUserData","JSON","stringify","key","question","tmp","borderWidth","margin","mergedAnswers","q","bullet","pos","TaskCard","complete","language","cardColor","sendRequest","Card","CardContent","justifyContent","CardActions","TabPanel","other","role","hidden","p","a11yProps","paddingTop","Tasks","allTasks","setTasks","submittedTasks","setSubmitted","tasks","submitted","querySnapshot","is_complete","error","Paper","Tabs","newValue","centered","Tab","task","Form","uploadsRef","feedback_type","hideActions","setResponses","lockButton","setLock","setCaseTasks","dialogState","setDialog","dialogType","setDialogType","releaseFeedbackData","setReleaseFeedbackData","openSnackbar","setOpenSnackbar","setFiles","uploading","setUploading","useParams","handleCloseSnackbar","getQuestions","taskID","questionId","getResponses","r","responseId","getSameCaseTasks","sameCaseTasks","case_id","f","status","sq","sr","ques","t","resp","Promise","all","d","sf","res","newF","concat","getForms","file","arr","upload","Object","keys","storage","child","v","put","getDownloadURL","url","url_wo_token","split","entries","previousTaskId","add","user_id","timestamp","alert","saveToFirebase","lock","merge","filename","arrayUnion","public_url","handleDialogOpen","CircularProgress","release_status","release_description","Snackbar","autoHideDuration","action","Fragment","Case","caseId","userRanks","disableCase","setDisable","setMessage","ranks","parseInt","order","task_type","taskType","case_type","case_stage_id","border","item","Cases","allCases","setCases","setRanks","getCasesFromFirebase","cases","c","down","dt","setShown","date","opacity","paddingLeft","getDate","toString","padStart","getMonth","getFullYear","getHours","getMinutes","getSeconds","Notifications","cards","setCards","updateFirestoreStatus","Notification","queryString","require","Home","token","setToken","makeToken","uuid","Date","now","oldToken","tg_token","oldDate","substring","moment","diff","newToken","urlString","parse","location","search","rank","processed","Link","href","transform","UserCard","userInfo","gutterBottom","surname","district","phone","ModeratedTask","taskInfo","setTaskInfo","pending","passed","setPassed","notPassed","setNotPassed","verified","setVerified","notVerified","setNotVerified","getReviewStatus","review_status","getData","updateReviewStatus","assigned_users","users","find","getUserInfo","PaginatedTasks","page","setPage","rowsPerPage","dataSlice","setDataSlice","calculateSlice","pageNumber","rowsPage","iData","List","numberOfPages","Math","floor","start","end","slice","pagination","TablePagination","onChangePage","newPage","onChangeRowsPerPage","labelRowsPerPage","isAllowedToRenderTask","minHeight","xs","TasksObserver","taskTypes","taskTitles","taskReviewStatuses","setUser","setUsers","setTaskType","taskTitle","setTaskTitle","taskReviewStatus","setTaskReviewStatus","getUsers","usersList","usersRef","orderBy","docs","getTasks","tasksList","tasksRef","NativeSelect","FormHelperText","startIcon","Signin","PrivateRoute","RouteComponent","rest","render","routeProps","button","sendAnswer","taskId","select","FAQ","handleClickApplyFilters","tasklist","taskList","questionList","apply","App","exact","path","Task","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.b7900000.chunk.js","sourcesContent":["import firebase from 'firebase';\n\nconst firebaseConfig = {\n    apiKey: \"AIzaSyBfzhQOCtbcUk_tWjPDnjYtHwoouCEkclg\",\n    authDomain: \"journal-bb5e3.firebaseapp.com\",\n    databaseURL: \"https://journal-bb5e3.firebaseio.com\",\n    projectId: \"journal-bb5e3\",\n    storageBucket: \"journal-bb5e3.appspot.com\",\n    messagingSenderId: \"918752509407\",\n    appId: \"1:918752509407:web:77670a68ff906f13e5d86a\"\n};\n  // Initialize Firebase\n  firebase.initializeApp(firebaseConfig);\n\n  const provider = new firebase.auth.GoogleAuthProvider();\n  export const signInWithGoogle = () => {\n    firebase.auth().signInWithPopup(provider);\n  };\n\nexport default firebase;","import React, { useEffect, useState } from \"react\";\nimport firebase from \"./Firebase\";\n\nexport const AuthContext = React.createContext();\n\nexport const AuthProvider = ({ children }) => {\n  const [currentUser, setCurrentUser] = useState(null);\n  const [pending, setPending] = useState(true);\n\n  useEffect(() => {\n    firebase.auth().onAuthStateChanged((user) => {\n      setCurrentUser(user)\n      setPending(false)\n      let rootRef = firebase.firestore().collection(\"users\")\n      if (user) {\n        let userRef = rootRef.doc(user.uid)\n        userRef.get().then(doc => {\n          if (doc && doc.exists) {\n              // pass\n              console.log('User Exist')\n          }\n          else {\n            console.log(\"Creating user\")\n            userRef.set(\n              {\n                username: user.displayName,\n                email: user.email,\n                created_date: firebase.firestore.FieldValue.serverTimestamp()\n              }\n            )\n          }\n        })\n      }\n    });\n  }, []);\n\n  // if(pending){\n  //   return <>Loading...</>\n  // }\n\n  return (\n    <AuthContext.Provider\n      value={{\n        currentUser\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  );\n};\n","export default __webpack_public_path__ + \"static/media/kloop_transparent_site.f6fb098e.png\";","import React, { useContext, useState, useEffect } from 'react';\nimport { AuthContext } from '../../util/Auth';\nimport firebase, { signInWithGoogle } from '../../util/Firebase'\nimport PropTypes from 'prop-types';\nimport AppBar from '@material-ui/core/AppBar';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Divider from '@material-ui/core/Divider';\nimport Drawer from '@material-ui/core/Drawer';\nimport Hidden from '@material-ui/core/Hidden';\nimport IconButton from '@material-ui/core/IconButton';\nimport InboxIcon from '@material-ui/icons/MoveToInbox';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport MailIcon from '@material-ui/icons/Mail';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport Menu from '@material-ui/core/Menu';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport KloopLogo from '../../kloop_transparent_site.png'\nimport NotificationsIcon from '@material-ui/icons/Notifications';\nimport { Badge } from '@material-ui/core';\nimport Grid from '@material-ui/core/Grid'\n\nimport {\n\tLink\n} from \"react-router-dom\";\n\nconst drawerWidth = 240;\n\nconst useStyles = makeStyles((theme) => ({\n\troot: {\n\t\tdisplay: 'flex',\n\t},\n\tdrawer: {\n\t\t[theme.breakpoints.up('sm')]: {\n\t\t\twidth: drawerWidth,\n\t\t\tflexShrink: 0,\n\t\t},\n\t},\n\tappBar: {\n\t\tbackground: 'white',\n\t\tboxShadow: 'none',\n\t\t[theme.breakpoints.up('sm')]: {\n\t\t\twidth: `calc(100% - ${drawerWidth}px)`,\n\t\t\tmarginLeft: drawerWidth,\n\t\t},\n\t},\n\tmenuButton: {\n\t\tcolor: 'black',\n\t\tmarginRight: theme.spacing(2),\n\t\t[theme.breakpoints.up('sm')]: {\n\t\t\tdisplay: 'none',\n\t\t},\n\t},\n\t// necessary for content to be below app bar\n\ttoolbar: theme.mixins.toolbar,\n\tdrawerPaper: {\n\t\twidth: drawerWidth,\n\t},\n\tcontent: {\n\t\tflexGrow: 1,\n\t\tpadding: theme.spacing(3),\n\t},\n}));\n\nfunction ResponsiveDrawer(props) {\n\tconst { window } = props;\n\tconst classes = useStyles();\n\tconst theme = useTheme();\n\tconst [mobileOpen, setMobileOpen] = React.useState(false);\n\tconst { currentUser } = useContext(AuthContext);\n\tconst [anchorEl, setAnchorEl] = React.useState(null);\n\tconst menuOpen = Boolean(anchorEl);\n\n\tconst handleDrawerToggle = () => {\n\t\tsetMobileOpen(!mobileOpen);\n\t};\n\n\n\tconst [moderator, setModerator] = useState(false)\n\tconst [numOfMessages, setNumOfMessages] = useState(0)\n\tconst [messages, setMessages] = useState([])\n\n\tuseEffect(() => {\n\t\tif (currentUser) {\n\t\t\tfirebase.firestore().collection('editors').get().then((snap) => {\n\t\t\t\tsnap.forEach(doc => {\n\t\t\t\t\tif (doc.id === currentUser.uid) {\n\t\t\t\t\t\tconsole.log('moderator')\n\t\t\t\t\t\tsetModerator(true)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}).catch(() => setModerator(false))\n\t\t}\n\t}, [currentUser])\n\n\tuseEffect(() => {\n\t\tif (currentUser) {\n\t\t\tconst unsubscribe = firebase.firestore().collection('notifications').where('user_id', 'array-contains', currentUser.uid).onSnapshot(async snap => {\n\t\t\t\tconsole.log(snap.size)\n\t\t\t\tlet m = []\n\t\t\t\tlet count = 0\n\t\t\t\tsnap.forEach(doc => {\n\t\t\t\t\tif (!doc.data().shown) {\n\t\t\t\t\t\tm.push({ id: doc.id, ...doc.data() })\n\t\t\t\t\t\tcount++\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\tm.sort((a, b) => b.created_date.toDate() - a.created_date.toDate())\n\t\t\t\tsetNumOfMessages(count)\n\t\t\t\tsetMessages(m)\n\t\t\t})\n\t\t\treturn () => unsubscribe()\n\t\t}\n\t}, [currentUser])\n\n\tconst updateFirestoreStatus = (id, index) => {\n\t\tfirebase.firestore().collection('notifications').doc(id).update({ shown: true })\n\t}\n\n\tconst handleMenu = (event) => {\n\t\tsetAnchorEl(event.currentTarget);\n\t};\n\n\tconst handleMenuClose = () => {\n\t\tsetAnchorEl(null)\n\t}\n\n\tconst drawer = (\n\t\t<div>\n\t\t\t<div className={classes.toolbar} />\n\t\t\t<Divider />\n\t\t\t<nav>\n\t\t\t\t<ul>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<Link to=\"/\">Главная</Link>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<Link to=\"/profile\">Профиль</Link>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<Link to=\"/tasks\">Задания</Link>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<Link to=\"/request\">Получить задание</Link>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<Link to=\"/notifications\">Уведомления</Link>\n\t\t\t\t\t</li>\n\t\t\t\t\t{moderator ? <li>\n\t\t\t\t\t\t<Link to=\"/tasksObserver\">Модератор</Link>\n\t\t\t\t\t</li> : null}\n\t\t\t\t\t{moderator ? <li>\n\t\t\t\t\t\t<Link to=\"/faq\">FAQ для модераторов</Link>\n\t\t\t\t\t</li> : null}\n\t\t\t\t</ul>\n\t\t\t</nav>\n\t\t</div>\n\t);\n\n\tconst container = window !== undefined ? () => window().document.body : undefined;\n\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<CssBaseline />\n\t\t\t<AppBar position=\"fixed\" className={classes.appBar}>\n\t\t\t\t<Toolbar>\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\tcolor=\"inherit\"\n\t\t\t\t\t\taria-label=\"open drawer\"\n\t\t\t\t\t\tedge=\"start\"\n\t\t\t\t\t\tonClick={handleDrawerToggle}\n\t\t\t\t\t\tclassName={classes.menuButton}\n\t\t\t\t\t>\n\t\t\t\t\t\t<MenuIcon />\n\t\t\t\t\t</IconButton>\n\t\t\t\t\t<Grid container style={{ flexGrow: 1 }}>\n\t\t\t\t\t\t<img src={KloopLogo} alt=\"Kloop.kg - Новости Кыргызстана\" style={{ width: 150, height: 'auto' }} />\n\t\t\t\t\t\t{/* <img src=\"https://kloop.kg/wp-content/uploads/2017/01/kloop_transparent_site.png\" alt=\"Kloop.kg - Новости Кыргызстана\" style={{ width: 150, height: 'auto' }} /> */}\n\t\t\t\t\t\t{/* <Typography variant=\"h5\" style={{ color: \"black\" }}>Journal</Typography> */}\n\t\t\t\t\t</Grid>\n\t\t\t\t\t{currentUser &&\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\taria-label=\"account of current user\"\n\t\t\t\t\t\t\t\taria-controls=\"menu-appbar\"\n\t\t\t\t\t\t\t\taria-haspopup=\"true\"\n\t\t\t\t\t\t\t\tonClick={handleMenu}\n\t\t\t\t\t\t\t\tcolor=\"inherit\"\n\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Badge badgeContent={numOfMessages} color=\"secondary\" overlap=\"circle\" >\n\t\t\t\t\t\t\t\t\t<NotificationsIcon style={{ fill: 'grey', fontSize: '28px' }} />\n\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t<Menu\n\t\t\t\t\t\t\t\tid=\"menu-appbar\"\n\t\t\t\t\t\t\t\tanchorEl={anchorEl}\n\t\t\t\t\t\t\t\tanchorOrigin={{\n\t\t\t\t\t\t\t\t\tvertical: 'top',\n\t\t\t\t\t\t\t\t\thorizontal: 'right',\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tkeepMounted\n\t\t\t\t\t\t\t\ttransformOrigin={{\n\t\t\t\t\t\t\t\t\tvertical: 'top',\n\t\t\t\t\t\t\t\t\thorizontal: 'right',\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\topen={menuOpen}\n\t\t\t\t\t\t\t\tonClose={handleMenuClose}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Grid container direction=\"column\" alignItems=\"center\" >\n\t\t\t\t\t\t\t\t\t{messages.length > 0 ? messages.map((message, i) => (\n\t\t\t\t\t\t\t\t\t\t<Grid container key={\"notification_\" + i} className={classes.message} justify=\"flex-start\" style={{ padding: 0 }}>\n\t\t\t\t\t\t\t\t\t\t\t<Typography style={{ flex: 1, padding: 10 }}>{message.title}</Typography>\n\t\t\t\t\t\t\t\t\t\t\t<Button style={{ padding: 10 }} onClick={() => updateFirestoreStatus(message.id)} size=\"small\">скрыть</Button>\n\t\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t)) : <Typography className={classes.message} align=\"center\" style={{ padding: 10 }}>Нет новых уведомлений</Typography>}\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t</Menu>\n\t\t\t\t\t\t</div>}\n\t\t\t\t\t{currentUser\n\t\t\t\t\t\t?\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<span style={{color: 'black', fontSize: 12, marginLeft: 7}}>\n\t\t\t\t\t\t\t\t{currentUser.email}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<Button style={{borderColor: \"black\", color: 'black', marginLeft: 10, fontSize: 12}}\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\" size=\"small\"\n\t\t\t\t\t\t\t\t\tonClick={() => firebase.auth().signOut()}>\n\t\t\t\t\t\t\t\tВыход\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t: <Button style={{ borderColor: \"black\", color: 'black', marginLeft: 10, fontSize: 12 }} size=\"small\" variant=\"outlined\" onClick={signInWithGoogle}>вход</Button>\n\t\t\t\t\t}\n\t\t\t\t</Toolbar>\n\t\t\t</AppBar>\n\t\t\t<nav className={classes.drawer} aria-label=\"mailbox folders\">\n\t\t\t\t{/* The implementation can be swapped with js to avoid SEO duplication of links. */}\n\t\t\t\t<Hidden smUp implementation=\"css\">\n\t\t\t\t\t<Drawer\n\t\t\t\t\t\tcontainer={container}\n\t\t\t\t\t\tvariant=\"temporary\"\n\t\t\t\t\t\tanchor={theme.direction === 'rtl' ? 'right' : 'left'}\n\t\t\t\t\t\topen={mobileOpen}\n\t\t\t\t\t\tonClose={handleDrawerToggle}\n\t\t\t\t\t\tclasses={{\n\t\t\t\t\t\t\tpaper: classes.drawerPaper,\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tModalProps={{\n\t\t\t\t\t\t\tkeepMounted: true, // Better open performance on mobile.\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{drawer}\n\t\t\t\t\t</Drawer>\n\t\t\t\t</Hidden>\n\t\t\t\t<Hidden xsDown implementation=\"css\">\n\t\t\t\t\t<Drawer\n\t\t\t\t\t\tclasses={{\n\t\t\t\t\t\t\tpaper: classes.drawerPaper,\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tvariant=\"permanent\"\n\t\t\t\t\t\topen\n\t\t\t\t\t>\n\t\t\t\t\t\t{drawer}\n\t\t\t\t\t</Drawer>\n\t\t\t\t</Hidden>\n\t\t\t</nav>\n\t\t\t<main className={classes.content}>\n\t\t\t\t<div className={classes.toolbar} />\n\t\t\t\t{props.children}\n\t\t\t</main>\n\t\t</div>\n\t);\n}\n\nResponsiveDrawer.propTypes = {\n\t/**\n\t * Injected by the documentation to work in an iframe.\n\t * You won't need it on your project.\n\t */\n\twindow: PropTypes.func,\n};\n\nexport default ResponsiveDrawer;\n","import React, { useState } from 'react';\nimport Radio from '@material-ui/core/Radio';\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport TextField from '@material-ui/core/TextField';\n\n\nconst Feedback = (props) => {\n\n    const [value, setValue] = useState(null)\n    const [textValue, setTextValue] = useState('')\n    const { returnAnswer } = props\n\n    const handleChange = (event) => {\n        setValue(event.target.value)\n        returnAnswer({reason: event.target.value, text: textValue})\n    };\n\n    const handleTextChange = (event) => {\n        setTextValue(event.target.value)\n        returnAnswer({reason: value, text: event.target.value})\n    }\n\n\n\n    return (\n        <div>\n            <h4>{props.title}</h4>\n            <FormControl const='fieldset' style={{paddingBottom: 15}}>\n                <RadioGroup aria-label={props.title} name={props.title} value={value} onChange={handleChange}>\n                    {props.answers.map((el, i) => <FormControlLabel\n                        key={i}\n                        value={el}\n                        control={<Radio color=\"primary\" />}\n                        label={el}\n                        disabled={props.locked ? true : false} />)}\n                </RadioGroup>\n            </FormControl>\n            <TextField\n                id={\"feedback_input\"}\n                label=\"Примечание\"\n                value={textValue}\n                onChange={handleTextChange}\n                // required={required}\n                multiline\n                rows={5}\n                variant=\"outlined\"\n                fullWidth\n            />\n        </div>\n    )\n}\n\nexport default Feedback","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Typography from '@material-ui/core/Typography';\n\nimport Feedback from '../form/feedback'\n\n\nexport default function AlertDialog(props) {\n\n  return (\n    <div>\n      <Dialog\n        open={props.state}\n        onClose={props.handleClose}\n        aria-labelledby=\"alert-dialog-title\"\n        aria-describedby=\"alert-dialog-description\"\n      >\n        <DialogTitle id=\"alert-dialog-title\">{props.title}</DialogTitle>\n        <DialogContent>\n          <DialogContentText id=\"alert-dialog-description\">\n            <Typography>{props.description}</Typography>\n            <Feedback answers={props.answers} returnAnswer={props.returnFeedback} />\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.handleClose} color=\"primary\">\n            Отмена\n          </Button>\n          <Button onClick={props.dialogFunction} disabled={!props.feedbackValue.reason} color=\"primary\" autoFocus>\n            Подтвердить\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  );\n}\n","import React, { useContext, useEffect, useRef, useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport TextField from '@material-ui/core/TextField';\nimport { Typography, IconButton, Box, Button, Snackbar } from '@material-ui/core';\nimport FeedbackIcon from '@material-ui/icons/Feedback';\nimport FeedbackDialog from '../Dialog/FeedbackDialog'\nimport Feedback from './feedback'\n\nimport firebase from '../../util/Firebase'\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        '& > *': {\n            width: '40ch',\n        },\n    },\n\n}));\n\n\nconst File = (props) => {\n    const classes = useStyles();\n    const [value, setValue] = React.useState('');\n    const [dialogOpen, setDialogOpen] = useState(false)\n    const [feedbackValue, setFeedback] = useState({})\n    const [feedbackFormData, setFormData] = useState({})\n    const [showFeedback, setShowFeedback] = useState(false)\n\n    const { returnFile, locked, id, feedbackType, askFeedback, saveQuestionFeedback, prevTaskId } = props\n\n    useEffect(() => {\n        console.log(feedbackType)\n        if (feedbackType && askFeedback) {\n            console.log(feedbackType)\n            firebase.firestore().collection('schema').doc('structure').collection('feedbacks').doc(feedbackType).get().then(doc => {\n                setFormData(doc.data())\n            })\n            setShowFeedback(true)\n        }\n        else {\n            setShowFeedback(false)\n        }\n    }, [feedbackType])\n\n    const handleChange = (event) => {\n        returnFile(event.target.files, id)\n    };\n\n    const sendFeedback = () => {\n        saveQuestionFeedback(feedbackValue, id, prevTaskId)\n        handleDialogClose()\n    }\n\n    const returnFeedback = (value) => {\n        setFeedback(value)\n    }\n\n\n    const handleDialogClose = () => {\n        setDialogOpen(false)\n    }\n\n    return (\n        <div>\n            {/* <FeedbackDialog\n                title={feedbackFormData.title}\n                dialogFunction={sendFeedback}\n                state={dialogOpen}\n                handleClose={handleDialogClose}\n                feedbackValue={feedbackValue}\n                answers={feedbackFormData.answers}\n                description={feedbackFormData.description}\n                returnFeedback={returnFeedback}\n            />\n            <Box display=\"flex\" style={{ marginBottom: 10, marginTop: 20 }}>\n                <Typography variant=\"h6\" style={{ paddingRight: 8 }}>{props.title}</Typography>\n                {showFeedback && <IconButton size=\"small\" onClick={() => setDialogOpen(true)}><FeedbackIcon color=\"primary\" /></IconButton>}\n            </Box> */}\n            <input\n                    type=\"file\"\n                    onChange={handleChange}\n                    multiple\n                />\n        </div>\n    );\n}\n\nexport default File","import React, { forwardRef, useEffect, useRef, useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport TextField from '@material-ui/core/TextField';\nimport { Typography, IconButton, Box } from '@material-ui/core';\nimport FeedbackIcon from '@material-ui/icons/Feedback';\nimport FeedbackDialog from '../Dialog/FeedbackDialog'\nimport Feedback from './feedback'\nimport FirebaseFileUploader from './FirebaseFileUploader'\nimport File from './file'\n\nimport firebase from '../../util/Firebase'\n\nconst useStyles = makeStyles((theme) => ({\n\troot: {\n\t\t'& > *': {\n\t\t\twidth: '40ch',\n\t\t},\n\t},\n\n}));\n\n\nconst BasicTextFields = forwardRef((props, ref) => {\n\tconst classes = useStyles();\n\tconst [value, setValue] = React.useState('');\n\tconst [dialogOpen, setDialogOpen] = useState(false)\n\tconst [answer, setAnswer] = useState(null)\n\tconst [feedbackValue, setFeedback] = useState({})\n\tconst [feedbackFormData, setFormData] = useState({})\n\tconst [showFeedback, setShowFeedback] = useState(false)\n\n\tconst { index, response, returnFile, locked, id, feedbackType, askFeedback, saveQuestionFeedback, prevTaskId, uploadFilesData, attachMaterials } = props\n\n\tuseEffect(() => {\n\t\tif (response) {\n\t\t\tsetValue(response)\n\t\t}\n\t}, [response])\n\n\tuseEffect(() => {\n\t\tif (feedbackType && askFeedback) {\n\t\t\tconsole.log(feedbackType)\n\t\t\tfirebase.firestore().collection('schema').doc('structure').collection('feedbacks').doc(feedbackType).get().then(doc => {\n\t\t\t\tsetFormData(doc.data())\n\t\t\t})\n\t\t\tsetShowFeedback(true)\n\t\t}\n\t\telse {\n\t\t\tsetShowFeedback(false)\n\t\t}\n\t}, [feedbackType])\n\n\tconst handleChange = (event) => {\n\t\tsetValue(event.target.value)\n\t\tprops.returnAnswer(event.target.value, props.index)\n\t};\n\n\tconst sendFeedback = () => {\n\t\tsaveQuestionFeedback(feedbackValue, id, prevTaskId)\n\t\thandleDialogClose()\n\t}\n\n\tconst returnFeedback = (value) => {\n\t\tsetFeedback(value)\n\t}\n\n\n\tconst handleDialogClose = () => {\n\t\tsetDialogOpen(false)\n\t}\n\n\tconst handleFilesUpload = (filename, downloadURL) => {\n\t\tuploadFilesData(filename, downloadURL, id)\n\t}\n\n\treturn (\n\t\t<div>\n\t\t\t<FeedbackDialog\n\t\t\t\ttitle={feedbackFormData.title}\n\t\t\t\tdialogFunction={sendFeedback}\n\t\t\t\tstate={dialogOpen}\n\t\t\t\thandleClose={handleDialogClose}\n\t\t\t\tfeedbackValue={feedbackValue}\n\t\t\t\tanswers={feedbackFormData.answers}\n\t\t\t\tdescription={feedbackFormData.description}\n\t\t\t\treturnFeedback={returnFeedback}\n\t\t\t/>\n\t\t\t<Box display=\"flex\" style={{ marginBottom: 10, marginTop: 20 }}>\n\t\t\t\t<Typography variant=\"h6\" style={{ paddingRight: 8 }}>{props.title}</Typography>\n\t\t\t\t{showFeedback && <IconButton size=\"small\" onClick={() => setDialogOpen(true)}><FeedbackIcon color=\"primary\" /></IconButton>}\n\t\t\t</Box>\n\t\t\t<TextField\n\t\t\t\tid={\"inputBox\" + index}\n\t\t\t\tlabel=\"Мой ответ\"\n\t\t\t\tvalue={value}\n\t\t\t\tonChange={handleChange}\n\t\t\t\t// required={required}\n\t\t\t\tmultiline\n\t\t\t\trows={5}\n\t\t\t\tdisabled={locked}\n\t\t\t\tvariant=\"outlined\"\n\t\t\t\tfullWidth\n\t\t\t/>\n\t\t\t{!locked && attachMaterials && <File returnFile={returnFile} locked={locked} id={id} />}\n\t\t\t{/* <FirebaseFileUploader\n                ref={ref}\n                title={\"\"}\n                index={index}\n                uploadFilesData={handleFilesUpload}\n            /> */}\n\t\t</div>\n\t);\n})\n\nexport default BasicTextFields","import React, { useEffect } from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport { Typography } from '@material-ui/core';\n\nconst useStyles = makeStyles((theme) => ({\n\tformControl: {\n\t\tminWidth: 100,\n\t\tmaxWidth: 300\n\t},\n}));\n\nexport default function SelectBox(props) {\n\tconst classes = useStyles();\n\tconst [value, setValue] = React.useState('');\n\tconst [open, setOpen] = React.useState(false);\n\n\tconst {index, response, required, locked } = props\n\n\tuseEffect(() => {\n\t\tif (response) {\n\t\t\t// console.log(props.answers[response])\n\t\t\t// setValue(props.answers[response])\n\t\t\tsetValue(response)\n\t\t}\n\t}, [response])\n\n\tconst handleChange = (event) => {\n\t\tsetValue(event.target.value);\n\t\tlet id = props.answers.indexOf(event.target.value)\n\t\tprops.returnAnswer(event.target.value, index)\n\t};\n\n\tconst handleClose = (event) => {\n\t\tsetOpen(false)\n\t};\n\n\tconst handleOpen = (event) => {\n\t\tsetOpen(true)\n\t}\n\n\treturn (\n\t\t<div>\n\t\t\t<Typography variant=\"h6\" style={{marginBottom: 5, marginTop: 20}}>{props.title}</Typography>\n\t\t\t<FormControl className={classes.formControl} disabled={locked}>\n\t\t\t\t<InputLabel id=\"controlled-open-select-label\">Выбрать</InputLabel>\n\t\t\t\t<Select\n\t\t\t\t\tlabelId=\"controlled-open-select-label\"\n\t\t\t\t\tid={\"select\" + index}\n\t\t\t\t\topen={open}\n\t\t\t\t\tonClose={handleClose}\n\t\t\t\t\tonOpen={handleOpen}\n\t\t\t\t\tvalue={value}\n\t\t\t\t\tonChange={handleChange}>\n\t\t\t\t\t<MenuItem value={\"\"}><em>None</em></MenuItem>\n\t\t\t\t\t{props.answers.map((el, i) => <MenuItem key={i} value={el}>{el}</MenuItem>)}\n\t\t\t\t</Select>\n\t\t\t</FormControl>\n\t\t</div>\n\t)\n\n}","import React, { useEffect } from 'react';\nimport Radio from '@material-ui/core/Radio';\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormControl from '@material-ui/core/FormControl';\n\nexport default function RadioButton(props) {\n\tconst [value, setValue] = React.useState('');\n\tconst {index, response} = props\n\n\tuseEffect(() => {\n\t\tif (response) {\n\t\t\tsetValue(response)\n\t\t}\n\t}, [response])\n\n\tconst handleChange = (event) => {\n\t\tsetValue(event.target.value)\n\t\tlet id = props.answers.indexOf(event.target.value)\n\t\tprops.returnAnswer(event.target.value, index, id)\n\t};\n\n\treturn (\n\t\t<div>\n\t\t\t<h4>{props.title}</h4>\n\t\t\t<FormControl const='fieldset'>\n\t\t\t\t<RadioGroup aria-label={props.title} name={props.title} value={value} onChange={handleChange}>\n\t\t\t\t\t{props.answers.map((el, i) => <FormControlLabel \n\t\t\t\t\t\t\t\t\t\t\t\t\tkey={i} \n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={el} \n\t\t\t\t\t\t\t\t\t\t\t\t\tcontrol={<Radio color=\"primary\" />} \n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={el} \n\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={props.locked ? true : false} />)}\n\t\t\t\t</RadioGroup>\n\t\t\t</FormControl>\n\t\t</div>\n\t)\n\t\t;\n}","import React, { useEffect } from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport TextField from '@material-ui/core/TextField';\n\nconst useStyles = makeStyles((theme) => ({\n\tcontainer: {\n\t\tdisplay: 'flex',\n\t\tflexWrap: 'wrap',\n\t},\n\ttextField: {\n\t\tmarginLeft: theme.spacing(1),\n\t\tmarginRight: theme.spacing(1),\n\t\twidth: 'auto',\n\t},\n}));\n\nexport default function TimePickers(props) {\n\tconst classes = useStyles();\n\tconst [value, setValue] = React.useState('');\n\tconst {index, response} = props\n\n\tuseEffect(() => {\n\t\tif (response) {\n\t\t\tsetValue(response)\n\t\t}\n\t}, [index, response])\n\n\tconst handleChange = (event) => {\n\t\tsetValue(event.target.value)\n\t\tprops.returnAnswer(event.target.value, index, event.target.value)\n\t};\n\n\n\treturn (\n\t\t<div>\n\t\t\t<h4>{props.title}</h4>\n\t\t\t<form className={classes.container} noValidate>\n\t\t\t\t<TextField\n\t\t\t\t\tid={\"time\" + index}\n\t\t\t\t\tlabel=\"Время\"\n\t\t\t\t\ttype=\"time\"\n\t\t\t\t\tvalue={value}\n\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\tclassName={classes.textField}\n\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\tshrink: true,\n\t\t\t\t\t}}\n\t\t\t\t\tInputProps={{disableUnderline: true}}\n\t\t\t\t\tdisabled={props.locked ? true : false}\n\t\t\t\t/>\n\t\t\t</form>\n\t\t</div>\n\t);\n}","import React, {useEffect, useState} from 'react';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormGroup from '@material-ui/core/FormGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport { Typography } from '@material-ui/core';\n\n\nexport default function CheckboxesGroup(props) {\n    const [state, setState] = React.useState({});\n    const [ready, setReady] = useState(false)\n    const {index, answers, required, response, locked} = props\n\n    useEffect(() => {\n\t\tif (response) {\n            setState(response)\n            let a = {}\n            answers.forEach((answer, i) => {\n                if (response[answer]) {\n                    a[answer] = response[answer]\n                }\n                else {\n                    a[answer] = false\n                }\n            })\n            setState(a)\n            props.returnAnswer(a, index)\n        }\n        else {\n            let a = {}\n            answers.forEach((answer, i) => a[answer] = false)\n            props.returnAnswer(a, index)\n            \n        }\n        setReady(true)\n        console.log(state)\n    }, [response, answers])\n\n\n    const handleChange = (event) => {\n        setState({ ...state, [event.target.name]: event.target.checked });\n        props.returnAnswer({...state, [event.target.name]: event.target.checked}, index)\n    };\n\n    return (\n        ready ?\n        <div>\n            <Typography variant=\"h6\" style={{marginBottom: 0, marginTop: 20}}>{props.title}</Typography>\n            <FormControl component=\"fieldset\" disabled={locked}>\n                <FormLabel component=\"legend\">Выберите один или несколько вариантов</FormLabel>\n                <FormGroup>\n                    {answers.map((el, i) => (\n                        <FormControlLabel\n                            key={i}\n                            control={<Checkbox checked={state[el]} onChange={handleChange} name={el} />}\n                            label={el}\n                        />\n                    ))}\n                </FormGroup>\n            </FormControl>\n        </div> : null\n    );\n}\n","import React, { useState, useEffect, useContext } from 'react'\nimport firebase, { signInWithGoogle } from '../../util/Firebase'\nimport { AuthContext } from \"../../util/Auth\";\n\nimport TextInput from \"../form/textInput\";\nimport SelectBox from \"../form/selectBox\";\nimport RadioButton from \"../form/radiobutton\";\nimport TimePickers from \"../form/timePickers\";\nimport Checkbox from \"../form/checkbox\"\nimport { Button, Grid, Typography } from '@material-ui/core';\nimport { Redirect } from 'react-router';\n\n\nconst Profile = () => {\n    const [questions, setQuestions] = useState([])\n    const [answers, setAnswers] = useState({})\n    const [forms, setForms] = useState([])\n    const [uploaded, setUploaded] = useState(false)\n    const [redirect, setRedirect] = useState(false)\n    const [userData, setUserData] = useState({})\n\n    const { currentUser } = useContext(AuthContext);\n\n    useEffect(() => {\n        let user = {}\n        if (currentUser) {\n            firebase.firestore().collection(\"users\").doc(currentUser.uid).get().then(doc => {\n                setUserData(doc.data())\n                user = doc.data()\n            }).then(() => {\n                firebase.firestore().collection(\"profileTemplate\").doc(\"Template\").get().then(doc => {\n                    console.log(JSON.stringify(doc.data()))\n                    setQuestions(doc.data().questions)\n                    console.log(doc.data().questions)\n                    const forms = doc.data().questions.map((el, i) => {\n                        let response = null\n                        if (user[el.key]) {\n                            console.log(user[el.key])\n                            response = user[el.key]\n                        }\n                        if (el.type === 'input') {\n                            return <TextInput key={\"profile_\" + i} index={i} title={el.question} response={response} returnAnswer={returnAnswer} required={el.required} />\n                        }\n                        else if (el.type === 'select') {\n                            return <SelectBox key={\"profile_\" + i} index={i} title={el.question} response={response} answers={el.answers} returnAnswer={returnAnswer} required={el.required} />\n                        }\n                        else if (el.type === 'radio') {\n                            return <RadioButton key={\"profile_\" + i} index={i} title={el.question} response={response} answers={el.answers} returnAnswer={returnAnswer} required={el.required} />\n                        }\n                        else if (el.type === 'time') {\n                            return <TimePickers key={\"profile_\" + i} index={i} title={el.question} response={response} returnAnswer={returnAnswer} required={el.required} />\n                        }\n                        else if (el.type === 'checkbox') {\n                            return <Checkbox key={\"profile_\" + i} index={i} title={el.question} response={response} answers={el.answers} returnAnswer={returnAnswer} required={el.required} />\n                        }\n                        else {\n                            return null\n                        }\n                    })\n                    setForms(forms)\n                })\n            })\n        }\n    }, [currentUser])\n\n\n    const returnAnswer = (answer, index) => {\n        const tmp = answers\n        tmp[index] = answer\n        setAnswers(tmp)\n        console.log(answers)\n    }\n\n    const saveToFirebase = () => {\n        let mergedAnswers = {}\n        questions.forEach((q, i) => {\n            if (answers[i]) {\n                mergedAnswers[q.key] = answers[i]\n            }\n        })\n\n        firebase.firestore().collection(\"users\").doc(currentUser.uid).update({\n            // profileAnswers: answers,\n            ...mergedAnswers\n        }).then(() => setUploaded(true))\n    }\n\n    // const addCaseId = () => {\n    //     firebase.firestore().collection(\"tasks\").where(\"type\", \"==\", \"Поиск контактных данных\").get().then(snap => {\n    //         snap.forEach( async doc => {\n    //             await firebase.firestore().collection(\"tasks\").doc(doc.id).update({case_id: doc.id})\n    //             console.log(doc.id)\n    //         })\n    //     })\n    // }\n\n    return (\n        currentUser ?\n            <Grid style={{ padding: 30 }}>\n                {redirect && <Redirect to=\"/\" />}\n                {forms}\n                <Grid container style={{ padding: 20 }} justify=\"center\">\n                    <Button variant=\"outlined\" style={{ borderWidth: 2, borderColor: \"#003366\", color: '#003366', margin: 10 }} onClick={saveToFirebase}>Отправить</Button>\n                    {uploaded && <Button variant=\"outlined\" style={{ borderWidth: 2, borderColor: \"red\", color: 'red', margin: 10 }} onClick={() => setRedirect(true)} >На главную</Button>}\n                </Grid>\n\n            </Grid>\n            :\n            <Grid container direction=\"column\" style={{ padding: 20 }} justify=\"center\">\n                <Typography align=\"center\" variant=\"h3\">авторизируйтесь</Typography>\n                <br />\n                <Button variant=\"contained\" onClick={signInWithGoogle}>Войти с помощью аккаунта Google</Button>\n            </Grid>\n    )\n\n}\n\nexport default Profile","import React, { useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\n\nimport { Redirect } from 'react-router';\nimport { Box, Grid } from '@material-ui/core';\n\nconst useStyles = makeStyles({\n\troot: {\n\t\tminWidth: 250\n\t},\n\tbullet: {\n\t\tdisplay: 'inline-block',\n\t\tmargin: '0 2px',\n\t},\n\ttitle: {\n\t\tfontSize: 14,\n\t},\n\tpos: {\n\t\tmarginBottom: 12,\n\t},\n});\n\nconst TaskCard = (props) => {\n\tconst classes = useStyles();\n\tconst { title, complete, type, language, description, id, cardColor, sendRequest, disabled } = props\n\n\tconst [redirect, setRedirect] = useState(false)\n\n\treturn (\n\t\t<div>\n\t\t\t{redirect && <Redirect to={\"/tasks/\" + id} />}\n\t\t\t<Card className={classes.root} style={{ background: cardColor }}>\n\t\t\t\t<CardContent>\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\">\n\t\t\t\t\t\t<Typography variant=\"h6\">\n\t\t\t\t\t\t\t{title}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t{complete && <Typography color=\"error\">\n\t\t\t\t\t\t\tСдано\n\t\t\t\t\t\t</Typography>}\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Typography variant=\"subtitle1\" className={classes.pos} color=\"textSecondary\">\n\t\t\t\t\t\t#{type}\n\t\t\t\t\t</Typography>\n\t\t\t\t\t<Typography variant=\"body2\" component=\"p\">\n\t\t\t\t\t\tЗадание: {description}\n\t\t\t\t\t</Typography>\n\t\t\t\t</CardContent>\n\t\t\t\t<CardActions>\n\t\t\t\t\t{sendRequest ?\n\t\t\t\t\t\t<Button variant=\"contained\" disabled={disabled} color=\"primary\" size=\"small\" onClick={() => sendRequest(type, id)}>{\"Получить задание\"}</Button>\n\t\t\t\t\t\t:\n\t\t\t\t\t\t<Button size=\"small\" onClick={() => setRedirect(true)}>{\"Открыть\"}</Button>\n\t\t\t\t\t}\n\t\t\t\t</CardActions>\n\t\t\t</Card>\n\t\t</div>\n\t);\n}\n\nexport default TaskCard","import React, {useState, useEffect, useContext} from 'react'\nimport firebase, {signInWithGoogle} from '../../util/Firebase'\nimport {AuthContext} from \"../../util/Auth\";\nimport {Grid, Typography} from '@material-ui/core';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport Box from '@material-ui/core/Box';\nimport TaskCard from './Card'\nimport PropTypes from 'prop-types';\n\nfunction TabPanel(props) {\n    const {children, value, index, ...other} = props;\n\n    return (\n        <div\n            role=\"tabpanel\"\n            hidden={value !== index}\n            id={`full-width-tabpanel-${index}`}\n            aria-labelledby={`full-width-tab-${index}`}\n            {...other}\n        >\n            {value === index && (\n                <Box p={3}>\n                    <Typography>{children}</Typography>\n                </Box>\n            )}\n        </div>\n    );\n}\n\nTabPanel.propTypes = {\n    children: PropTypes.node,\n    index: PropTypes.any.isRequired,\n    value: PropTypes.any.isRequired,\n};\n\nfunction a11yProps(index) {\n    return {\n        id: `full-width-tab-${index}`,\n        'aria-controls': `full-width-tabpanel-${index}`,\n    };\n}\n\n\nconst useStyles = makeStyles({\n    root: {\n        paddingTop: 30,\n        flexGrow: 1\n    },\n});\n\n\nconst Tasks = (props) => {\n    const classes = useStyles()\n    const [allTasks, setTasks] = useState(null)\n    const [submittedTasks, setSubmitted] = useState(null)\n    const [quickTasks, setQuickTasks] = useState(null)\n    const {currentUser} = useContext(AuthContext);\n    const [value, setValue] = useState(0)\n\n    useEffect(() => {\n        if (currentUser) {\n            let tasks = []\n            let submitted = []\n            console.log(\"Fired\")\n            firebase.firestore().collection(\"tasks\").where(\"assigned_users\", \"array-contains\", currentUser.uid).get()\n                .then((querySnapshot) => {\n                    querySnapshot.forEach((doc) => {\n                        console.log(doc.id, \" => \", doc.data());\n                        if (doc.data().is_complete) {\n                            submitted.push({id: doc.id, ...doc.data()})\n                        } else {\n                            tasks.push({id: doc.id, ...doc.data()})\n                        }\n\n                    });\n                })\n                .then(() => {\n                    setTasks(tasks)\n                    setSubmitted(submitted)\n                })\n                .catch((error) => {\n                    console.log(\"Error getting documents: \", error);\n                });\n        }\n    }, [currentUser])\n    const handleChange = (event, newValue) => {\n        setValue(newValue);\n    };\n\n    return (\n        <Grid container justify=\"center\" alignItems=\"center\" direction=\"column\">\n            {/* <Grid>\n\t\t\t\t<Button onClick={requestTask}>Получить задание</Button>\n\t\t\t</Grid> */}\n\n            {/*<Typography variant=\"h4\">Задания</Typography>*/}\n            <div className={classes.root}>\n                <Paper position=\"static\" color=\"default\">\n                    <Tabs value={value} onChange={handleChange} variant=\"fullWidth\" centered\n                          aria-label=\"simple tabs example\">\n                        <Tab label=\"Невыполненные\" {...a11yProps(0)}/>\n                        <Tab label=\"Выполненные\" {...a11yProps(1)}/>\n                        {/*<Tab label=\"Быстрые задания\" {...a11yProps(3)}/>*/}\n                    </Tabs>\n                </Paper>\n            </div>\n            <TabPanel value={value} index={0}>\n                {allTasks && allTasks.map((task, i) => (\n                    <Grid key={'active_task_' + i} style={{padding: 10}}>\n                        <TaskCard title={task.title} complete={task.is_complete} description={task.description}\n                                  type={task.type} id={task.id}/>\n                    </Grid>\n                ))}\n            </TabPanel>\n\n            <TabPanel value={value} index={1}>\n                {submittedTasks && submittedTasks.map((task, i) => (\n                    <Grid key={'submitted_task_' + i} style={{padding: 10}}>\n                        <TaskCard title={task.title} complete={task.is_complete} description={task.description}\n                                  type={task.type} id={task.id}/>\n                    </Grid>\n                ))}\n            </TabPanel>\n           {/* <TabPanel value={value} index={2}>\n                быстрые задания\n            </TabPanel>*/}\n        </Grid>\n    )\n}\n\nexport default Tasks","import React, { useEffect } from 'react';\nimport { Typography } from '@material-ui/core';\n\n\n\nfunction BasicTextFields(props) {\n\n\tconst {title} = props\n\n\treturn (\n\t\t<div>\n\t\t\t<Typography variant=\"h6\" style={{marginBottom: 0, marginTop: 20}}>{title}</Typography>\n\t\t</div>\n\t);\n}\n\nexport default BasicTextFields","import React, { forwardRef } from 'react'\n\nimport TextInput from \"./textInput\";\nimport SelectBox from \"./selectBox\";\nimport RadioButton from \"./radiobutton\";\nimport TimePickers from \"./timePickers\";\nimport Checkbox from \"./checkbox\"\nimport Text from \"./text\"\nimport File from \"./file\"\n\nconst Form = forwardRef((props, ref) => {\n\n    const { question, index, response, uploadsRef, returnAnswer, locked, askFeedback, saveQuestionFeedback, id, prevTaskId, returnFile, uploadFilesData } = props\n\n    if (question.type === 'input') {\n        return <TextInput\n            key={index}\n            // ref={ref}\n            index={index}\n            title={question.title}\n            response={response}\n            returnAnswer={returnAnswer}\n            required={question.required}\n            locked={locked}\n            askFeedback={askFeedback}\n            feedbackType={question.feedback_type}\n            saveQuestionFeedback={saveQuestionFeedback}\n            id={id}\n            prevTaskId={prevTaskId}\n            uploadFilesData={uploadFilesData}\n            uploadsRef={uploadsRef}\n            returnFile={returnFile}\n            attachMaterials={question.attachMaterials}\n        />\n    }\n    else if (question.type === 'select') {\n        return <SelectBox key={index} index={index} title={question.title} response={response} answers={question.answers} returnAnswer={returnAnswer} required={question.required} locked={locked} />\n    }\n    else if (question.type === 'radio') {\n        return <RadioButton key={index} index={index} title={question.title} response={response} answers={question.answers} returnAnswer={returnAnswer} required={question.required} locked={locked} />\n    }\n    else if (question.type === 'time') {\n        return <TimePickers key={index} index={index} title={question.title} response={response} returnAnswer={returnAnswer} required={question.required} locked={locked} />\n    }\n    else if (question.type === 'checkbox') {\n        return <Checkbox key={index} index={index} title={question.title} response={response} answers={question.answers} returnAnswer={returnAnswer} required={question.required} locked={locked} />\n    }\n    else if (question.type === 'text') {\n        return <Text key={index} title={question.title} />\n    }\n    else if (question.type === 'file') {\n        return <File key={index} index={index} id={id} title={question.title} returnFile={returnFile} locked={locked} askFeedback={askFeedback} feedbackType={question.feedback_type} saveQuestionFeedback={saveQuestionFeedback} prevTaskId={prevTaskId} />\n    }\n    else {\n        return null\n    }\n\n})\n\n\nexport default Form\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\n\nexport default function AlertDialog(props) {\n\n  return (\n    <div>\n      <Dialog\n        open={props.state}\n        onClose={props.handleClose}\n        aria-labelledby=\"alert-dialog-title\"\n        aria-describedby=\"alert-dialog-description\"\n      >\n        <DialogTitle id=\"alert-dialog-title\">{props.title}</DialogTitle>\n        <DialogContent>\n          <DialogContentText id=\"alert-dialog-description\">\n            {props.content}\n          </DialogContentText>\n        </DialogContent>\n        {props.hideActions ? \"\" : <DialogActions>\n          <Button onClick={props.handleClose} color=\"primary\">\n            Отмена\n          </Button>\n          <Button onClick={props.dialogFunction} color=\"primary\" autoFocus>\n            Подтвердить\n          </Button>\n        </DialogActions>}\n      </Dialog>\n    </div>\n  );\n}\n","import React, { useState, useEffect, useContext, useRef } from 'react'\nimport firebase, { signInWithGoogle } from '../../util/Firebase'\nimport { AuthContext } from \"../../util/Auth\";\n\nimport Form from \"../form/form\"\nimport Dialog from \"../Dialog/Dialog\"\nimport DialogFeedback from \"../Dialog/FeedbackDialog\"\nimport Feedback from \"../form/feedback\"\n\nimport { Button, Divider, Grid, Typography } from '@material-ui/core';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nimport { Redirect, useParams } from 'react-router';\nimport { Link } from \"react-router-dom\";\n\n\nconst Tasks = () => {\n\tconst [questions, setQuestions] = useState([])\n\tconst [responses, setResponses] = useState([])\n\tconst [answers, setAnswers] = useState({})\n\tconst [forms, setForms] = useState([])\n\tconst [uploaded, setUploaded] = useState(false)\n\tconst [redirect, setRedirect] = useState(false)\n\tconst [userData, setUserData] = useState({})\n\tconst [lockButton, setLock] = useState(false)\n\tconst [caseTasks, setCaseTasks] = useState([])\n\tconst [dialogState, setDialog] = useState(false)\n\tconst [dialogType, setDialogType] = useState(null)\n\tconst [feedbackValue, setFeedback] = useState({})\n\tconst [releaseFeedbackData, setReleaseFeedbackData] = useState({})\n\tconst [openSnackbar, setOpenSnackbar] = useState(false);\n\tconst [files, setFiles] = useState({})\n\tconst [uploading, setUploading] = useState(false)\n\n\tconst { currentUser } = useContext(AuthContext);\n\tconst { id } = useParams();\n\n\tconst handleCloseSnackbar = (event, reason) => {\n\t\tif (reason === 'clickaway') {\n\t\t\treturn;\n\t\t}\n\n\t\tsetOpenSnackbar(false);\n\t};\n\n\t// const uploadsRef = useRef();\n\n\tuseEffect(() => {\n\t\tconst getQuestions = async (taskID) => {\n\t\t\tlet q = []\n\n\t\t\tawait firebase.firestore().collection(\"tasks\").doc(taskID).collection(\"questions\").get()\n\t\t\t\t.then((querySnapshot) => {\n\t\t\t\t\tquerySnapshot.forEach((doc) => {\n\t\t\t\t\t\tq.push({ questionId: doc.id, data: doc.data() })\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tconsole.log(\"Error getting documents: \", error);\n\t\t\t\t});\n\n\t\t\treturn q\n\t\t}\n\n\n\t\tconst getResponses = async (taskID) => {\n\t\t\tlet r = []\n\n\t\t\tawait firebase.firestore().collection(\"tasks\").doc(taskID).collection(\"responses\").get()\n\t\t\t\t.then((querySnapshot) => {\n\t\t\t\t\tquerySnapshot.forEach((doc) => {\n\t\t\t\t\t\tr.push({ responseId: doc.id, data: doc.data() })\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tconsole.log(\"Error getting documents: \", error);\n\t\t\t\t});\n\n\t\t\treturn r\n\t\t}\n\n\n\t\tconst getSameCaseTasks = async () => {\n\t\t\tlet sameCaseTasks = []\n\n\t\t\tawait firebase.firestore().collection(\"tasks\").doc(id).get().then(doc => {\n\t\t\t\treturn doc.data()\n\t\t\t}).then(async data => {\n\t\t\t\tawait firebase.firestore().collection(\"tasks\").where(\"case_id\", \"==\", data.case_id).get().then(snap => {\n\t\t\t\t\tsnap.forEach(doc => {\n\t\t\t\t\t\tif (doc.id !== id) {\n\t\t\t\t\t\t\tsameCaseTasks.push({ id: doc.id, ...doc.data() })\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t})\n\t\t\treturn sameCaseTasks\n\t\t}\n\n\t\tconst getForms = async () => {\n\t\t\tlet f = []\n\t\t\tlet locked = true\n\n\t\t\tsetForms(null)\n\n\t\t\tawait firebase.firestore().collection(\"tasks\").doc(id).collection(\"user_editable\").doc(\"user_editable\").get().then(doc => {\n\t\t\t\tif (doc.data().status === 'complete') {\n\t\t\t\t\tlocked = true\n\t\t\t\t\tsetLock(true)\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tlocked = false\n\t\t\t\t}\n\t\t\t})\n\n\t\t\tlet sq = []\n\t\t\tlet sr = []\n\n\t\t\tlet sameCaseTasks = await getSameCaseTasks()\n\t\t\tsetCaseTasks(sameCaseTasks)\n\t\t\tif (sameCaseTasks.length > 0) {\n\t\t\t\tlet ques = sameCaseTasks.map(t => {\n\t\t\t\t\treturn getQuestions(t.id)\n\t\t\t\t})\n\t\t\t\tlet resp = sameCaseTasks.map(t => {\n\t\t\t\t\treturn getResponses(t.id)\n\t\t\t\t})\n\t\t\t\tconsole.log(ques)\n\t\t\t\tawait Promise.all(ques).then(data => data.forEach(d => sq.push(...d)))\n\t\t\t\tawait Promise.all(resp).then(data => data.forEach(d => sr.push(...d)))\n\n\t\t\t\tconsole.log(sq)\n\t\t\t\tconsole.log(sr)\n\t\t\t}\n\n\t\t\tlet sf = sq.map((el, i) => {\n\t\t\t\tlet response = null\n\t\t\t\tsr.forEach((res) => {\n\t\t\t\t\tif (el.questionId === res.responseId) {\n\t\t\t\t\t\tresponse = res.data.answer\n\t\t\t\t\t\treturnAnswer(res.data.answer, i)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\treturn <Form key={el.questionId + '_' + i} question={el.data} index={i} response={response} returnAnswer={returnAnswer} locked={true} askFeedback={true} saveQuestionFeedback={saveQuestionFeedback} id={el.questionId} prevTaskId={sameCaseTasks[0].id} />\n\t\t\t})\n\n\t\t\tsf.push(<div key={\"div_divider_stripped\"} style={{ height: 25, margin: '20px 0', background: 'repeating-linear-gradient( 45deg, white, white 10px, grey 10px, grey 25px)' }}><br /></div>)\n\n\n\t\t\tlet q = await getQuestions(id)\n\t\t\tlet r = await getResponses(id)\n\n\n\t\t\tsetQuestions(q)\n\t\t\tsetResponses(r)\n\n\n\t\t\t// let newQ = sq.concat(q)\n\t\t\t// let newR = sr.concat(r)\n\n\t\t\tf = q.map((el, i) => {\n\t\t\t\tlet response = null\n\t\t\t\tr.forEach((res) => {\n\t\t\t\t\tif (el.questionId === res.responseId) {\n\t\t\t\t\t\tresponse = res.data.answer\n\t\t\t\t\t\treturnAnswer(res.data.answer, i)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\treturn (\n\t\t\t\t\t<Form\n\t\t\t\t\t\tkey={el.questionId + '_' + i}\n\t\t\t\t\t\tquestion={el.data}\n\t\t\t\t\t\tindex={i}\n\t\t\t\t\t\tresponse={response}\n\t\t\t\t\t\treturnFile={returnFile}\n\t\t\t\t\t\treturnAnswer={returnAnswer}\n\t\t\t\t\t\tid={el.questionId}\n\t\t\t\t\t\tlocked={locked}\n\t\t\t\t\t\t// ref={uploadsRef}\n\t\t\t\t\t\tuploadFilesData={uploadFilesData} />\n\t\t\t\t)\n\t\t\t})\n\n\t\t\tlet newF = sf.concat(f)\n\t\t\tsetForms(newF)\n\t\t}\n\t\tif (currentUser) {\n\t\t\tgetForms()\n\t\t}\n\t}, [currentUser, id, lockButton])\n\n\n\tconst returnAnswer = (answer, index) => {\n\t\tconst tmp = answers\n\t\ttmp[index] = answer\n\t\tsetAnswers(tmp)\n\t}\n\n\tconst returnFile = (file, questionId) => {\n\t\tlet arr = [...file]\n\t\tlet tmp = files\n\t\ttmp[questionId] = arr\n\t\tsetFiles(tmp)\n\t\tconsole.log([...file], questionId)\n\t}\n\n\tconst upload = async () => {\n\t\t// uploadsRef.current.startUpload()\n\t\tif (Object.keys(files).length > 0) {\n\t\t\tconsole.log('files')\n\t\t\tsetUploading(true)\n\t\t\tfor (const [key, value] of Object.entries(files)) {\n\t\t\t\tlet ref = firebase.storage().ref(id).child(key).child(currentUser.uid)\n\t\t\t\tawait Promise.all(value.map(async v => {\n\t\t\t\t\tlet snap = await ref.child(v.name).put(v)\n\t\t\t\t\tlet url = await snap.ref.getDownloadURL()\n\t\t\t\t\tlet url_wo_token = url.split(\"?\")[0]\n\t\t\t\t\tawait uploadFilesData(v.name, url_wo_token, key)\n\t\t\t\t}));\n\t\t\t}\n\t\t\tsetUploaded(true)\n\t\t\tsetUploading(false)\n\t\t}\n\t}\n\n\tconst saveQuestionFeedback = (data, questionId, previousTaskId) => {\n\t\tif (previousTaskId) {\n\t\t\tfirebase.firestore().collection('tasks').doc(previousTaskId).collection('feedbacks').doc(questionId).collection('messages')\n\t\t\t\t.add({\n\t\t\t\t\tanswer: data.reason,\n\t\t\t\t\ttext: data.text,\n\t\t\t\t\tuser_id: currentUser.uid,\n\t\t\t\t\ttimestamp: firebase.firestore.FieldValue.serverTimestamp()\n\t\t\t\t})\n\t\t\t\t.then(() => setOpenSnackbar(true))\n\t\t}\n\t\telse {\n\t\t\talert('Ошибка: Что-то пошло не так при сохранении фидбека. Сообщите программисту!')\n\t\t}\n\t}\n\n\tconst saveToFirebase = async (lock) => {\n\t\tawait upload()\n\t\tquestions.forEach(async (q, i) => {\n\t\t\tif (answers[i] || answers[i] === \"\") {\n\t\t\t\tawait firebase.firestore().collection(\"tasks\").doc(id).collection(\"responses\").doc(q.questionId).set({ answer: answers[i] }, { merge: true })\n\t\t\t}\n\t\t})\n\n\t\tif (lock) {\n\t\t\tawait firebase.firestore().collection(\"tasks\").doc(id).collection(\"user_editable\").doc(\"user_editable\").update({ status: 'complete' })\n\t\t\tsetLock(true)\n\t\t\tconsole.log(\"Task Locked\")\n\t\t\tsetDialog(false)\n\t\t}\n\t}\n\n\tconst uploadFilesData = async (filename, url, questionId) => {\n\t\tlet rootRef = firebase.firestore().collection(\"tasks\").doc(id).collection(\"responses\").doc(questionId)\n\t\tconsole.log(\"Файл отправлен\")\n\t\tif (filename && url) {\n\t\t\trootRef.set(\n\t\t\t\t{\n\t\t\t\t\tfiles: firebase.firestore.FieldValue.arrayUnion({ public_url: url, filename: filename })\n\t\t\t\t}, { merge: true }\n\t\t\t).then(() => console.log('super'))\n\t\t}\n\t};\n\n\tconst handleDialogClose = () => {\n\t\tsetDialog(false);\n\t\tsetFeedback({})\n\t};\n\n\tconst handleDialogOpen = (type) => {\n\t\tif (type === 'send') {\n\t\t\tsetDialogType('send')\n\t\t\tsetDialog(true)\n\t\t}\n\t\tif (type === 'release') {\n\t\t\tsetDialogType('release')\n\t\t\tsetDialog(true)\n\t\t}\n\n\t}\n\n\tuseEffect(() => {\n\t\tfirebase.firestore().collection(\"schema\").doc(\"structure\").collection(\"feedbacks\").doc(\"release\").get().then(doc => {\n\t\t\tsetReleaseFeedbackData(doc.data())\n\t\t})\n\t}, [])\n\n\tconst releaseTask = () => {\n\t\tfirebase.firestore().collection(\"tasks\").doc(id).collection(\"user_editable\").doc(\"user_editable\").update({ status: 'open' })\n\t\t\t.then(() => firebase.firestore().collection(\"tasks\").doc(id).collection(\"user_editable\").doc(\"user_editable\").update({ status: 'released', release_status: feedbackValue.reason, release_description: feedbackValue.text })\n\t\t\t\t.then(() => {\n\t\t\t\t\tsetDialog(false)\n\t\t\t\t\tsetLock(true)\n\t\t\t\t}))\n\t\t// alert(feedbackValue)\n\t}\n\n\tconst handleFeedbackSave = (value) => {\n\t\tsetFeedback(value)\n\t}\n\n\treturn (\n\t\tcurrentUser ?\n\t\t\t<Grid style={{ padding: 30 }}>\n\t\t\t\t{dialogType === 'send' && <Dialog\n\t\t\t\t\tstate={dialogState}\n\t\t\t\t\thandleClose={handleDialogClose}\n\t\t\t\t\thideActions={uploading || uploaded}\n\t\t\t\t\ttitle={uploading ? \"Загрузка файлов\" : uploaded ? \"Файлы загружены\" : \"Отправить задание?\"}\n\t\t\t\t\tcontent={uploading ? <CircularProgress /> : uploaded ? \"Спасибо\" : \"Вы собираетесь отправить задание. Это значит, что вы больше не сможете изменять ответы.\"}\n\t\t\t\t\tdialogFunction={() => saveToFirebase(true)} />}\n\t\t\t\t{dialogType === 'release' && <DialogFeedback\n\t\t\t\t\tstate={dialogState}\n\t\t\t\t\tfeedbackValue={feedbackValue}\n\t\t\t\t\thandleClose={handleDialogClose}\n\t\t\t\t\ttitle={releaseFeedbackData.title}\n\t\t\t\t\tdialogFunction={releaseTask}\n\t\t\t\t\tanswers={releaseFeedbackData.answers}\n\t\t\t\t\tdescription={releaseFeedbackData.description}\n\t\t\t\t\treturnFeedback={handleFeedbackSave} />}\n\t\t\t\t{redirect && <Redirect to=\"/tasks\" />}\n\t\t\t\t<Snackbar\n\t\t\t\t\tanchorOrigin={{\n\t\t\t\t\t\tvertical: 'bottom',\n\t\t\t\t\t\thorizontal: 'left',\n\t\t\t\t\t}}\n\t\t\t\t\topen={openSnackbar}\n\t\t\t\t\tautoHideDuration={6000}\n\t\t\t\t\tonClose={handleCloseSnackbar}\n\t\t\t\t\tmessage=\"Фидбек отправлен\"\n\t\t\t\t\taction={\n\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t<IconButton size=\"small\" aria-label=\"close\" color=\"inherit\" onClick={handleCloseSnackbar}>\n\t\t\t\t\t\t\t\t<CloseIcon fontSize=\"small\" />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t\t{/* Предыдущие задания{caseTasks.map((t, i) => <Button key={\"case_button_\"+i} component={ Link } to={\"/tasks/\" + t.id}>{t.title}</Button>)} */}\n\t\t\t\t{forms}\n\t\t\t\t<Grid container style={{ padding: 20 }} justify=\"center\">\n\t\t\t\t\t<Button variant=\"outlined\" style={{ borderWidth: 2, borderColor: \"grey\", color: 'grey', margin: 5 }} onClick={() => setRedirect(true)}>Назад</Button>\n\t\t\t\t\t{!lockButton &&\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Button variant=\"outlined\" disabled={lockButton} style={{ borderWidth: 2, borderColor: \"#003366\", color: '#003366', margin: 5 }} onClick={() => saveToFirebase(false)}>Сохранить</Button>\n\t\t\t\t\t\t\t<Button variant=\"outlined\" disabled={lockButton} style={{ borderWidth: 2, borderColor: \"red\", color: 'red', margin: 5 }} onClick={() => handleDialogOpen('send')}>Отправить</Button>\n\t\t\t\t\t\t\t<Button variant=\"outlined\" disabled={lockButton} style={{ borderWidth: 2, borderColor: \"red\", color: 'red', margin: 5 }} onClick={() => handleDialogOpen('release')}>Освободить</Button>\n\t\t\t\t\t\t</div>}\n\t\t\t\t</Grid>\n\n\t\t\t</Grid>\n\t\t\t:\n\t\t\t<Grid container direction=\"column\" style={{ padding: 20 }} justify=\"center\">\n\t\t\t\t<Typography align=\"center\" variant=\"h3\">авторизируйтесь</Typography>\n\t\t\t\t<br />\n\t\t\t\t<Button variant=\"contained\" onClick={signInWithGoogle}>Войти с помощью аккаунта Google</Button>\n\t\t\t</Grid>\n\t)\n\n}\n\nexport default Tasks","import React, { useEffect, useState, useContext } from 'react'\nimport { AuthContext } from \"../../util/Auth\";\nimport firebase from '../../util/Firebase'\n\nimport Paper from '@material-ui/core/Paper'\nimport Button from '@material-ui/core/Button';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\n\nimport Card from '../Tasks/Card'\nimport { Box, Grid, Typography } from '@material-ui/core'\nimport { set } from 'immutable';\n\n\nconst Case = (props) => {\n    const { caseId, userRanks } = props\n    const [allTasks, setTasks] = useState(null)\n    const [ready, setReady] = useState(false)\n    const { currentUser } = useContext(AuthContext);\n\n    const [open, setOpen] = React.useState(false);\n    const [disableCase, setDisable] = useState(false)\n    const [message, setMessage] = useState('')\n\n    const handleClose = (event, reason) => {\n        if (reason === 'clickaway') {\n            return;\n        }\n\n        setOpen(false);\n    };\n\n    useEffect(() => {\n        if (currentUser) {\n            let tasks = []\n            console.log(\"Fired\")\n            firebase.firestore().collection(\"schema\").doc(\"structure\").collection(\"cases\").doc(caseId).collection(\"stages\").get()\n                .then((querySnapshot) => {\n                    querySnapshot.forEach((doc) => {\n                        // before change\n                        //tasks.push({ id: doc.id, ...doc.data() }) \n\n                        //after change\n                        const ranks = doc.data().ranks\n                        console.log('RANKS')\n                        console.log(ranks)\n                        console.log(userRanks)\n                        // if (ranks && userRanks.some(userRank => ranks.includes(userRank))) {\n                        //     tasks.push({ id: doc.id, ...doc.data(), disabled: false })\n                        // }\n                        // else {\n                        //     tasks.push({ id: doc.id, ...doc.data(), disabled: true })\n                        //     setMessage(<Typography color=\"error\" display=\"block\">Получите достижение <Typography component=\"span\" display=\"inline\" color=\"primary\" align=\"justify\">Первопроходец Battle For Azeroth</Typography> чтобы активировать следующее задание</Typography>)\n                        // }\n                        tasks.push({ id: doc.id, ...doc.data(), disabled: false })\n                        \n                    });\n                })\n                .then(() => {\n                    tasks.sort((a, b) => parseInt(a.order) - parseInt(b.order))\n                    setTasks(tasks)\n                    setReady(true)\n                })\n                .catch((error) => {\n                    console.log(\"Error getting documents: \", error);\n                });\n        }\n    }, [currentUser])\n\n    useEffect(() => {\n        if (currentUser) {\n            firebase.firestore().collection('tasks').where('assigned_users', 'array-contains', currentUser.uid).where('is_complete', '==', false).get().then(snap => {\n                if (snap.size < 3) {\n                    console.log(\"SIZE\", snap.size)\n                    setDisable(false)\n                }\n                else {\n                    setDisable(true)\n                    setMessage(<Typography color=\"error\">У вас есть активные задания. Сдайте или освободите их, чтобы получить новые.</Typography>)\n                }\n            })\n        }\n    }, [currentUser, disableCase, open])\n\n    const sendRequest = (type, task_type) => {\n        firebase.firestore().collection(\"task_requests\").doc(currentUser.uid).collection(\"requests\").add({\n            taskType: type,\n            status: \"pending\",\n            user: currentUser.uid,\n            case_type: caseId,\n            case_stage_id: task_type\n        }).then((doc) => {\n            setOpen(true)\n            console.log('sending request')\n        })\n    }\n\n    return (\n        <div>\n            <Snackbar\n                anchorOrigin={{\n                    vertical: 'bottom',\n                    horizontal: 'left',\n                }}\n                open={open}\n                autoHideDuration={6000}\n                onClose={handleClose}\n                message=\"Запрос отправлен\"\n                action={\n                    <React.Fragment>\n                        <IconButton size=\"small\" aria-label=\"close\" color=\"inherit\" onClick={handleClose}>\n                            <CloseIcon fontSize=\"small\" />\n                        </IconButton>\n                    </React.Fragment>\n                }\n            />\n\n            <Paper style={{ margin: '20px 5px', border: '1px grey solid' }}>\n                <Box style={{ padding: '10px 20px 0px' }}>\n                    <Box style={{ padding: '5px 10px 10px' }}>\n                        <Typography variant=\"h6\">{props.title}</Typography>\n                    </Box>\n                    <Box style={{ padding: '10px 10px 5px' }}>\n                        <Typography variant=\"body2\">{props.description}</Typography>\n                    </Box>\n                    <Box style={{ padding: '10px 10px 0px' }}>\n                        {message}\n                    </Box>\n                </Box>\n\n                <Grid container justify=\"center\" style={{ padding: 10 }}>\n                    {ready && allTasks.map((t, i) => (\n                        <Grid item key={i} style={{ padding: 10 }}>\n                            <Card title={t.title} description={t.description} type={t.type} id={t.id} cardColor=\"#F5F5F5\" sendRequest={sendRequest} disabled={disableCase || t.disabled} />\n                        </Grid>\n                    ))}\n                </Grid>\n            </Paper>\n        </div>\n    )\n}\n\nexport default Case","import React, { useState, useEffect, useContext } from 'react'\nimport firebase from '../../util/Firebase'\nimport { AuthContext } from \"../../util/Auth\";\n\nimport Case from './Case'\n\n\nconst Cases = () => {\n\n    const { currentUser } = useContext(AuthContext);\n    const [allCases, setCases] = useState([])\n    const [ready, setReady] = useState(false)\n    const [userRanks, setRanks] = useState([])\n\n    // New\n    useEffect(() => {\n        if (currentUser) {\n            firebase.firestore().collection('users').doc(currentUser.uid).collection('user_private').doc('private').get().then(doc => {\n                \n                if (doc && doc.exists) {                \n\n                    let ranks = doc.data().ranks\n                    console.log(ranks)\n                    setRanks(ranks)\n                    getCasesFromFirebase(ranks)\n                }\n            })\n        }\n    }, [currentUser])\n\n\n    // /////// Old ////////\n    // useEffect(() => {\n    //     if (currentUser) {\n    //         let cases = []\n    //         console.log(\"Fired\")\n    //         firebase.firestore().collection(\"schema\").doc(\"structure\").collection(\"cases\").get()\n    //             .then((querySnapshot) => {\n    //                 querySnapshot.forEach((doc) => {\n    //                     cases.push({ id: doc.id, ...doc.data() })\n    //                 });\n    //             })\n    //             .then(() => {\n    //                 setCases(cases)\n    //                 setReady(true)\n    //             })\n    //             .catch((error) => {\n    //                 console.log(\"Error getting documents: \", error);\n    //             });\n    //     }\n    // }, [currentUser])\n    // //////////////\n\n    const getCasesFromFirebase = (ranks) => {\n        let cases = []\n        console.log(\"Fired\")\n        firebase.firestore().collection(\"schema\").doc(\"structure\").collection(\"cases\").where('ranks', 'array-contains-any', ranks).get()\n            .then((querySnapshot) => {\n                querySnapshot.forEach((doc) => {\n                    console.log(doc.data())\n                    cases.push({ id: doc.id, ...doc.data() })\n                });\n            })\n            .then(() => {\n                setCases(cases)\n                setReady(true)\n            })\n            .catch((error) => {\n                console.log(\"Error getting documents: \", error);\n            });\n    }\n\n    return (\n        <div>\n            {ready && allCases.map((c, i) => (\n                <Case key={i} title={c.title} description={c.description} caseId={c.id} userRanks={userRanks} />\n            ))}\n        </div>\n    )\n}\n\nexport default Cases","import React, { useEffect, useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\n\nimport { Redirect } from 'react-router';\nimport { Grid } from '@material-ui/core';\n\nconst useStyles = makeStyles(theme => ({\n\troot: {\n\t\tmargin: 20,\n\t\twidth: 500,\n\t\t[theme.breakpoints.down(\"sm\")]: {\n\t\t\tmaxWidth: 300\n\t\t}\n\t},\n\tbullet: {\n\t\tdisplay: 'inline-block',\n\t\tmargin: '0 2px',\n\t},\n\ttitle: {\n\t\tfontSize: 14,\n\t},\n\tpos: {\n\t\tmarginBottom: 12,\n\t},\n}));\n\nconst TaskCard = (props) => {\n\tconst classes = useStyles();\n\tconst { title, description, id, setShown, shown, date } = props\n\n\tconst getFormatDate = (dt) => {\n\t\t// let month = '' + (d.getMonth() + 1)\n\t\t// let day = '' + d.getDate()\n\t\t// let year = d.getFullYear()\n\n\t\t// if (month.length < 2)\n\t\t// \tmonth = '0' + month;\n\t\t// if (day.length < 2)\n\t\t// \tday = '0' + day;\n\t\tlet formatDate = `${\n\t\t\tdt.getDate().toString().padStart(2, '0')}/${\n\t\t\t(dt.getMonth()+1).toString().padStart(2, '0')}/${\n\t\t\tdt.getFullYear().toString().padStart(4, '0')} ${\n\t\t\tdt.getHours().toString().padStart(2, '0')}:${\n\t\t\tdt.getMinutes().toString().padStart(2, '0')}:${\n\t\t\tdt.getSeconds().toString().padStart(2, '0')}`\n\n\t\treturn formatDate\n\t}\n\n\treturn (\n\t\t<Grid container justify=\"center\">\n\t\t\t<Card className={classes.root} style={shown ? { background: 'grey', opacity: 0.25 } : { background: 'lightblue' }} >\n\t\t\t\t<CardContent>\n\t\t\t\t\t<Typography variant=\"h6\">\n\t\t\t\t\t\t{title}\n\t\t\t\t\t</Typography>\n\t\t\t\t\t<Typography variant=\"body2\" component=\"p\">\n\t\t\t\t\t\t{description}\n\t\t\t\t\t</Typography>\n\t\t\t\t</CardContent>\n\t\t\t\t<CardActions style={{ justifyContent: 'space-between' }}>\n\t\t\t\t\t<Typography style={{paddingLeft: 8}} variant=\"subtitle2\">{getFormatDate(date.toDate())}</Typography>\n\t\t\t\t\t<Button size=\"small\" onClick={() => setShown(id)}>{\"Просмотрено\"}</Button>\n\t\t\t\t</CardActions>\n\t\t\t</Card>\n\t\t</Grid>\n\t);\n}\n\nexport default TaskCard","import { Button, Grid, Typography } from '@material-ui/core';\nimport React, { useEffect, useState, useContext } from 'react'\nimport { AuthContext } from '../../util/Auth';\nimport firebase from '../../util/Firebase'\n\nimport Notification from './Notification'\n\n\nconst Notifications = () => {\n\n    const { currentUser } = useContext(AuthContext);\n    const [cards, setCards] = useState([])\n\n    const updateFirestoreStatus = (id) => {\n        firebase.firestore().collection('notifications').doc(id).update({ shown: true })\n    }\n\n    useEffect(() => {\n        if (currentUser) {\n            const unsubscribe = firebase.firestore().collection('notifications').where('user_id', 'array-contains', currentUser.uid).onSnapshot(async snap => {\n                let messages = []\n                snap.forEach((doc, i) => {\n                    messages.push({ id: doc.id, ...doc.data() })\n                })\n                console.log(messages[0].created_date.toDate())\n                messages.sort((a, b) => b.created_date.toDate() - a.created_date.toDate())\n                setCards(messages)\n            })\n            return () => unsubscribe()\n        }\n    }, [currentUser])\n\n    return (\n        <div>\n            <Typography variant=\"h5\" align=\"center\">Уведомления</Typography>\n            {cards.map((doc, i) => <Notification key={i} id={doc.id} index={i} date={doc.created_date} title={doc.title} setShown={updateFirestoreStatus} shown={doc.shown} description={doc.description} />)}\n        </div>\n    )\n\n}\n\nexport default Notifications","import React, { useContext, useEffect, useState } from 'react'\nimport firebase, { signInWithGoogle } from '../../util/Firebase'\nimport { AuthContext } from \"../../util/Auth\";\nimport moment from 'moment';\nimport { v1 as uuid } from 'uuid'\nimport { Button, Grid, Link, makeStyles, Typography } from '@material-ui/core';\n\nconst queryString = require('query-string');\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        marginTop: 20,\n        background: 'lightgreen',\n        height: 200,\n        width: 500,\n        [theme.breakpoints.down(\"sm\")]: {\n            maxWidth: 300\n        }\n    }\n}));\n\n\nconst Home = () => {\n    const classes = useStyles();\n    const [token, setToken] = useState(null)\n    const { currentUser } = useContext(AuthContext);\n\n    useEffect(() => {\n        const makeToken = () => {\n            return uuid().toString() + '_' + Date.now()\n        }\n        if (currentUser) {\n            const unsubscribe = firebase.firestore().collection('users').doc(currentUser.uid).onSnapshot(doc => {\n                let oldToken;\n                if (doc.exists && doc.data().tg_token) {\n                    oldToken = doc.data().tg_token\n                }\n                else {\n                    oldToken = false\n                }\n                \n                console.log(oldToken)\n                if (oldToken) {\n                    console.log(oldToken)\n                    let oldDate = parseInt(oldToken.substring(oldToken.indexOf('_') + 1))\n                    let date = moment().diff(oldDate, 'hours')\n                    console.log(date)\n                    if (date > 0) {\n                        let newToken = makeToken()\n                        firebase.firestore().collection('users').doc(currentUser.uid).update({ tg_token: newToken })\n                        setToken(newToken)\n                    }\n                    else {\n                        setToken(oldToken)\n                    }\n                }\n                else {\n                    console.log('no token')\n                    let newToken = makeToken()\n                    firebase.firestore().collection('users').doc(currentUser.uid).update({ tg_token: newToken })\n                    setToken(newToken)\n                }\n            })\n            return () => unsubscribe()\n        }\n    }, [currentUser])\n\n    useEffect(() => {\n        if (currentUser) {\n            let urlString = queryString.parse(window.location.search)\n            if (urlString.rank) {\n                console.log(urlString.rank)\n                firebase.firestore().collection('schema').doc('structure').collection('ranks').doc(urlString.rank).get().then(doc => {\n                    if (doc.exists) {\n                        console.log('creating request')\n                        firebase.firestore().collection('rank_requests').add({\n                            timestamp: firebase.firestore.FieldValue.serverTimestamp(),\n                            user_id: currentUser.uid,\n                            processed: false,\n                            rank: doc.id\n                        })\n                    }\n                    else {\n                        console.log('no rank')\n                    }\n                })\n            }\n        }\n    }, [currentUser])\n\n    return (\n        currentUser ?\n            <Grid container justify=\"center\" direction=\"column\" alignItems=\"center\" className={classes.root} >\n                <Typography style={{ paddingBottom: 10 }} variant=\"h5\" align=\"center\">Вы почти зарегистрировались! Осталось нажать на ссылку ниже.</Typography>\n                {token ? <Link variant=\"h5\" href={\"https://telegram.me/journal_tg_bot?start=\" + token}>Ссылка на бот</Link> \n                : <Typography variant=\"body2\" align=\"center\">Если ссылка не создалась в течение 5 секунд, перезагрузите страницу</Typography>}\n            </Grid>\n            :\n            <Grid container direction=\"column\" style={{ padding: 20 }} justify=\"center\">\n                <Typography align=\"center\" variant=\"h3\">Регистрация</Typography>\n                <br />\n                <Button size=\"large\" color=\"primary\" variant=\"contained\" onClick={signInWithGoogle}>Войти с помощью аккаунта Google</Button>\n            </Grid>\n    )\n}\n\nexport default Home","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\n\nconst useStyles = makeStyles({\n  root: {\n    minWidth: 275,\n  },\n  bullet: {\n    display: 'inline-block',\n    margin: '0 2px',\n    transform: 'scale(0.8)',\n  },\n  title: {\n    fontSize: 14,\n  },\n  pos: {\n    marginBottom: 12,\n  },\n});\n\nexport default function UserCard(props) {\n  const classes = useStyles();\n\n  console.log('TEST CARD')\n  console.log(props)\n\n  if(props.userInfo == {}){\n    return (<div></div>)\n  }\n\n  return (\n    <Card className={classes.root} variant=\"outlined\">\n      <CardContent>\n        <Typography className={classes.title} color=\"textSecondary\" gutterBottom>\n          id: {props.userInfo.id}\n        </Typography>\n        <Typography variant=\"h5\" component=\"h2\">\n        {props.userInfo.surname} {props.userInfo.name}\n        </Typography>\n        <Typography className={classes.pos} color=\"textSecondary\">\n          Регион: {props.userInfo.district}\n        </Typography>\n        <Typography variant=\"body2\" component=\"p\">\n          {props.userInfo.phone}\n        </Typography>\n        <Typography variant=\"body2\" component=\"p\">\n          {props.userInfo.email}\n        </Typography>\n      </CardContent>\n    </Card>\n  );\n}","import React, { useEffect, useState, useContext } from 'react';\nimport firebase from '../../util/Firebase'\n\nimport Form from '../form/form'\nimport { Button, Grid, Typography } from '@material-ui/core';\n\nimport UserCard from '../Moderator/UserCard'\n\n\nconst ModeratedTask = (props) => {\n\n\tconst [tasks, setTasks] = React.useState([]);\n\tconst [taskInfo, setTaskInfo] = useState({})  \n\t\n\tlet userInfo = {}\n\n    const [questions, setQuestions] = useState([])    \n    const [responses, setResponses] = useState([])    \n    const [answers, setAnswers] = useState({})    \n    const [forms, setForms] = useState(<div></div>)\n    \n\tconst [pending, setPending] = useState(false)\n\tconst [passed, setPassed] = useState(false)\n\tconst [notPassed, setNotPassed] = useState(false)\n\tconst [verified, setVerified] = useState(false)\n\tconst [notVerified, setNotVerified] = useState(false)\n\n\tconst getReviewStatus = async () => {\n        firebase.firestore().collection(\"tasks\").doc(props.task.id).get().then(doc => {\n\t\t\t\t\n\t\t\tlet review_status = doc.data().review_status\n\t\t\t\n\t\t\tsetPending(review_status === 'pending')\n\t\t\tsetPassed(review_status === 'passed')\n\t\t\tsetNotPassed(review_status === 'not passed')\n\t\t\tsetVerified(review_status === 'verified')\n\t\t\tsetNotVerified(review_status === 'not verified')\t\t\t\n        })\n\t}\n\t\n\tconst getUserInfo = () => {\n\n\t\tif (taskInfo.assigned_users !== undefined && taskInfo.assigned_users.length > 0){\n\t\t\n\t\t\tlet item = props.users.find(item => item.id === taskInfo.assigned_users[0])\n\t\t\tif (item !== undefined){\n\t\t\t\tuserInfo = item\n\t\t\t}\t\t\t\t\n\t\t\telse{\n\t\t\t\tuserInfo = {}\n\t\t\t}\n\t\t}\n        \n    }\n\n    useEffect(() => {\n\t\tconst getData = async () => {\n\t\t\tlet q = []\n\t\t\tlet r = []\n\t\t\tlet f = []\n\t\t\tlet locked = true\n\n\n\t\t\tconsole.log(\"HOOK\")\n\t\t\tgetReviewStatus()\t\t\n\t\t\t\n\t\t\tawait firebase.firestore().collection(\"tasks\").doc(props.task.id).get()\n\t\t\t\t.then(doc => {\t\t\t\t\n\t\t\t\t\tsetTaskInfo(doc.data())\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tconsole.log(\"Error getting documents: \", error);\n\t\t\t\t});\n\n\t\t\tawait firebase.firestore().collection(\"tasks\").doc(props.task.id).collection(\"questions\").get()\n\t\t\t\t.then((querySnapshot) => {\n\t\t\t\t\tquerySnapshot.forEach((doc) => {\n\t\t\t\t\t\t// console.log(doc.id, \" => \", doc.data());\n\t\t\t\t\t\tq.push({ questionId: doc.id, data: doc.data() })\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.then(() => {\n\t\t\t\t\tsetQuestions(q)\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tconsole.log(\"Error getting documents: \", error);\n\t\t\t\t});\n\n\t\t\tawait firebase.firestore().collection(\"tasks\").doc(props.task.id).collection(\"responses\").get()\n\t\t\t\t.then((querySnapshot) => {\n\t\t\t\t\tquerySnapshot.forEach((doc) => {\n\t\t\t\t\t\t// console.log(doc.id, \" => \", doc.data());\n\t\t\t\t\t\tr.push({ responseId: doc.id, data: doc.data() })\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.then(() => {\n\t\t\t\t\tsetResponses(r)\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tconsole.log(\"Error getting documents: \", error);\n\t\t\t\t});\n\t\t\n\n\t\t\t//ЗАЛИПУХА!!!\n\t\t\tsetForms(<div></div>)\t\n\n\t\t\tf = q.map((el, i) => {\n\t\t\t\tlet response = null\n\t\t\t\t// console.log(i)\n\t\t\t\tr.forEach((res) => {\n\t\t\t\t\tif (el.questionId === res.responseId) {\n\t\t\t\t\t\tresponse = res.data.answer\n\t\t\t\t\t\treturnAnswer(res.data.answer, i)\n\t\t\t\t\t\t// console.log(res.data)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\treturn <Form key={i} question={el.data} index={i} response={response} returnAnswer={returnAnswer} locked={locked} />\n\t\t\t})\n\t\t\tsetForms(f)\n\t\t}\n\t\tif (props.task.id) {\n\t\t\tgetData()\n\t\t}\n\t}, [props.task.id])\n    \n    const returnAnswer = (answer, index) => {\n\t\tconst tmp = answers\n\t\ttmp[index] = answer\n\t\tsetAnswers(tmp)\n\t\t// console.log(answers)\n\t}\n\n\tconst handlePending = () => {\n\t\tupdateReviewStatus('pending')\n\t\tgetReviewStatus()\n\t}\n\n\tconst handlePassed = () => {\n\t\tupdateReviewStatus('passed')\n\t\tgetReviewStatus()\n\t}\n\n\tconst handleNotPassed = () => {\n\t\tupdateReviewStatus('not passed')\n\t\tgetReviewStatus()\n\t}\n\n\tconst handleVerified = () => {\n\t\tupdateReviewStatus('verified')\n\t\tgetReviewStatus()\n\t}\n\n\tconst handleNotVerified = () => {\n\t\tupdateReviewStatus('not verified')\n\t\tgetReviewStatus()\n\t}\n\t\n\tconst updateReviewStatus = async (review_status) => {\n\t\tawait firebase.firestore().collection(\"tasks\").doc(props.task.id).update({ review_status: review_status })\n\t}\n    \n    // console.log('TEST')\n    // console.log(tasks)\n\n\tgetUserInfo()\n\treturn (\n\t\t<Grid style={{ padding: 30 }}>\n\n\t\t\t<Grid container style={{ padding: 20 }} justify=\"center\">\n\t\t\t\t<Button variant=\"contained\" color={pending ? \"secondary\" : '{}'} onClick={handlePending}>\n\t\t\t\t\tPENDING\n\t\t\t\t</Button>\n\t\t\t\t<Button variant=\"contained\" color={passed ? \"secondary\" : '{}'} onClick={handlePassed}>\n\t\t\t\t\tPASSED\n\t\t\t\t</Button>\n\t\t\t\t<Button variant=\"contained\" color={notPassed ? \"secondary\" : '{}'} onClick={handleNotPassed}>\n\t\t\t\t\tNOT PASSED\n\t\t\t\t</Button>\n\t\t\t\t<Button variant=\"contained\" color={verified ? \"secondary\" : '{}'} onClick={handleVerified}>\n\t\t\t\t\tVERIFIED\n\t\t\t\t</Button>\n\t\t\t\t<Button variant=\"contained\" color={notVerified ? \"secondary\" : '{}'} onClick={handleNotVerified}>\n\t\t\t\t\tNOT VERIFIED\n\t\t\t\t</Button>\n            </Grid>\n\n\t\t\t<Grid container justify = \"center\">\n                <UserCard userInfo={userInfo}> </UserCard>\n            </Grid>\n\n            {forms}\n            \n\n\t\t\t</Grid>\n\t);\n}\n\nexport default ModeratedTask","import React, {useState, useEffect} from 'react'\nimport ModeratedTask from './ModeratedTask'\nimport Grid from \"@material-ui/core/Grid\";\nimport TablePagination from \"@material-ui/core/TablePagination\";\nimport {List} from \"immutable\"\n\nconst rowsPP = 1;\n\nconst PaginatedTasks= props => {\n    const [page, setPage] = useState(0);\n    const [rowsPerPage, setRowsPerPage] = useState(rowsPP);\n    const [dataSlice, setDataSlice] = useState([]);\n\n    const calculateSlice = (pageNumber, rowsPage, data) => {\n        const iData = List(data)\n        const numberOfPages = Math.floor(iData.size / rowsPage);\n        console.log(\"numberOfPages\", numberOfPages);\n        const start = pageNumber * rowsPage;\n        let end = iData.size\n        if (pageNumber !== numberOfPages - 1) {\n            end = (pageNumber + 1) * rowsPage;\n        }\n        console.log(\"Start\", start);\n        console.log(\"End\", end);\n        return data.slice(start, end)\n    }\n\n    const handleChangePage = (event, newPage) => {\n        setDataSlice(calculateSlice(newPage, rowsPerPage, props.data));\n        setPage(newPage);\n    };\n    const handleChangeRowsPerPage = (event) => {\n        // setPage(0);\n        // setRowsPerPage(event.target.value);\n        // setDataSlice(calculateSlice(0, event.target.value, props.data));\n    };\n\n    useEffect(() => {\n        // Update the document title using the browser API\n        setPage(0)\n        setDataSlice(calculateSlice(0, rowsPP, props.data));\n    }, [props.data]);\n\n\n    const pagination = props.data.length > 0 && (\n        <Grid container justify = \"center\">\n        <TablePagination\n            justify=\"center\"\n            component=\"div\"\n            count={props.data.length}\n            page={page}\n            onChangePage={handleChangePage}\n            rowsPerPage={rowsPerPage}\n            onChangeRowsPerPage={handleChangeRowsPerPage}\n            labelRowsPerPage = 'По одной задаче на страницу!'\n        /></Grid>)\n\n\n    // console.log('PAGINATION')\n    // console.log(dataSlice)\n\n    const isAllowedToRenderTask = dataSlice[0] !== undefined\n    return (\n        <div>\n            {pagination}\n            <Grid\n                container\n                spacing={0}\n                direction=\"column\"\n                alignItems=\"center\"\n                justify=\"center\"\n                style={{minHeight: '100vh'}}>\n\n                <Grid item xs={12}>\n                    <Grid container justify=\"center\" direction='column' spacing={1}>\n                       \n                            {isAllowedToRenderTask\n                                ? <Grid item>\n                                    <ModeratedTask \n                                        task={dataSlice[0]}\n                                        users={props.users}                                      \n                                    ></ModeratedTask>\n                                </Grid>\n                                : 'Выберите и примените фильтры!'\n                            }\n\n\n                    </Grid>\n                </Grid>\n\n            </Grid>\n            {pagination}\n        </div>\n    )\n\n}\n\nexport default PaginatedTasks","import React, { useEffect, useState, useContext } from 'react';\nimport firebase from '../../util/Firebase'\n\nimport Form from '../form/form'\nimport { Button, Grid, Typography } from '@material-ui/core';\n\nimport PaginatedTasks from '../Moderator/PaginatedTasks'\n\nimport NativeSelect from '@material-ui/core/NativeSelect';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport FormControl from '@material-ui/core/FormControl';\n\nimport SearchIcon from '@material-ui/icons/Search';\n\nconst TasksObserver = (props) => {\n\n    // console.log('TEST FUNCT')\n    // console.log(props)\n\n    //TODO load from SCHEMA\n    const taskTypes = ['ВСЕ', 'Поиск контактных данных', 'interview']   \n\n    //TODO load from SCHEMA        \n    const taskTitles = ['ВСЕ', 'Задание № 1.1', 'Задание № 1.2', 'Задание № 1.3', 'Задание № 2.1', 'Задание № 2.2', 'Задание № 2.3', 'Задание 3.1', 'Задание 3.2', 'Задание 3.3']  \n\n    //TODO load from SCHEMA        \n    const taskReviewStatuses = ['ВСЕ', 'pending', 'passed', 'not passed', 'verified', 'not verified']\n\n    const [tasks, setTasks] = React.useState([]);\n    const [user, setUser] = React.useState('ВСЕ');\n    const [users, setUsers] = React.useState([]);\n    const [taskType, setTaskType] = React.useState(taskTypes[0]);\n    const [taskTitle, setTaskTitle] = React.useState(taskTitles[0]);\n    const [taskReviewStatus, setTaskReviewStatus] = React.useState(taskReviewStatuses[0]);\n\n    const setTaskTypeHandler = (event) => {\n        setTaskType(event.target.value); \n    };\n\n    const setTaskTitleHandler = (event) => {\n        setTaskTitle(event.target.value); \n    };\n\n    const setUserHandler = (event) => {\n        setUser(event.target.value); \n    };\n\n    const setTaskReviewStatusHandler = (event) => {\n        setTaskReviewStatus(event.target.value); \n    };    \n\n    const handleClickApplyFilters = (event) => {\n\n        getTasks()\n\n      }\n\n    \n    const getUsers = async () => {\n        let usersList = [{id: 'ВСЕ', name: 'ВСЕ', surname: ''}]\n        let usersRef = firebase.firestore().collection('users').orderBy(\"surname\")\n        await usersRef.get().then(docs => {\n            docs.forEach(doc => {\n                usersList.push({id: doc.id, ...doc.data()})\n            })\n\n            setUsers(usersList)\n        })\n    }\n\n    const getTasks = async () => {\n        let tasksList = []\n        let tasksRef = firebase.firestore().collection('tasks')\n\n        // console.log('USER ID')\n        // console.log(user)\n\n        if(user != 'ВСЕ'){\n            tasksRef = tasksRef.where(\"assigned_users\", \"array-contains\", user)\n        }\n\n        if(taskTitle != 'ВСЕ'){\n            tasksRef = tasksRef.where(\"title\", \"==\", taskTitle)\n        }\n\n        if(taskType != 'ВСЕ'){\n            tasksRef = tasksRef.where(\"type\", \"==\", taskType)\n        }\n\n        if(taskReviewStatus != 'ВСЕ'){\n            tasksRef = tasksRef.where(\"review_status\", \"==\", taskReviewStatus)\n        }\n\n        await tasksRef.get().then(docs => {\n            docs.forEach(doc => {\n                tasksList.push({id: doc.id, ...doc.data()})\n            })\n\n            setTasks(tasksList)\n        })\n    }\n\n    useEffect(() => {        \n        getUsers()        \n    }, [])   \n    \n    // console.log('USERS')\n    // console.log(users)\n\n\treturn (\n        <div>\n            <Grid container justify = \"center\">\n                <FormControl style={{width:'350px'}}>\n                <NativeSelect\n                    value={user.value}\n                    onChange={setUserHandler}\n                    name=\"filterUser\"\n                    //inputProps={{ 'aria-label': 'filterViolation' }}\n                >\n                    {\n                        users.map(userInfo => (\n                        <option value={userInfo.id}> {userInfo.surname} {userInfo.name}</option>\n                    ))\n                    }\n                </NativeSelect>\n                 <FormHelperText>Выберите фильтр по users</FormHelperText>\n                </FormControl>\n            </Grid>\n\n            <Grid container justify = \"center\">\n                <FormControl style={{width:'350px'}}>\n                <NativeSelect\n                    value={taskTitle}\n                    onChange={setTaskTitleHandler}\n                    name=\"filterTaskTitle\"\n                    //inputProps={{ 'aria-label': 'filterViolation' }}\n                >\n                    {\n                        taskTitles.map(taskTitle => (\n                        <option value={taskTitle}>{taskTitle}</option>\n                    ))\n                    }\n                </NativeSelect>\n                 <FormHelperText>Выберите фильтр по наименованию задачи</FormHelperText>\n                </FormControl>\n            </Grid>\n\n            <Grid container justify = \"center\">\n                <FormControl style={{width:'350px'}}>\n                <NativeSelect\n                    value={taskType}\n                    onChange={setTaskTypeHandler}\n                    name=\"filterTaskType\"\n                    //inputProps={{ 'aria-label': 'filterViolation' }}\n                >\n                    {\n                        taskTypes.map(taskType => (\n                        <option value={taskType}>{taskType}</option>\n                    ))\n                    }\n                </NativeSelect>\n                 <FormHelperText>Выберите фильтр по типу задачи</FormHelperText>\n                </FormControl>\n            </Grid>\n\n            <Grid container justify = \"center\">\n                <FormControl style={{width:'350px'}}>\n                <NativeSelect\n                    value={taskReviewStatus}\n                    onChange={setTaskReviewStatusHandler}\n                    name=\"filterReviewStatus\"\n                    //inputProps={{ 'aria-label': 'filterViolation' }}\n                >\n                    {\n                        taskReviewStatuses.map(taskReviewStatus => (\n                        <option value={taskReviewStatus}>{taskReviewStatus}</option>\n                    ))\n                    }\n                </NativeSelect>\n                 <FormHelperText>Выберите фильтр по review_status</FormHelperText>\n                </FormControl>\n            </Grid>\n\n            <Grid container justify = \"center\">\n                <Button\n                    style={{width:'350px'}}\n                    type ='number'\n                    variant=\"contained\"\n                    onClick={handleClickApplyFilters}\n                    color= 'primary'\n                    //className={classes.button}\n                    startIcon={<SearchIcon />}\n                >\n                    Применить фильтры\n                </Button>\n            </Grid>\n\n            <Grid container justify = \"center\">\n                <PaginatedTasks data={tasks} users={users}></PaginatedTasks>\n            </Grid>\n        </div>\n\t);\n}\n\nexport default TasksObserver","import React, { useContext } from 'react'\nimport { signInWithGoogle } from '../../util/Firebase'\nimport { Button, Grid, Typography } from '@material-ui/core'\nimport { AuthContext } from '../../util/Auth';\nimport { Redirect } from 'react-router';\n\n\nconst Signin = () => {\n    const { currentUser } = useContext(AuthContext);\n    if (currentUser) {\n        return <Redirect to={'/'} />;\n    }\n    return (\n        <Grid container direction=\"column\" style={{ padding: 20 }} justify=\"center\">\n            <Typography align=\"center\" variant=\"h4\">Регистрация</Typography>\n            <Typography variant=\"body1\" align=\"center\">Нажмите на кнопку (Вход или Регистрация).</Typography>\n            <Typography variant=\"body1\" align=\"center\">Если у вас нет аккаунта Google, то создайте его.</Typography>\n            <br />\n            <Button size=\"large\" color=\"primary\" variant=\"contained\" onClick={signInWithGoogle}>Регистрация</Button>\n        </Grid>\n    )\n}\n\nexport default Signin","import React, { useContext } from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\nimport { AuthContext } from \"./Auth\";\n\nconst PrivateRoute = ({ component: RouteComponent, ...rest }) => {\n  const {currentUser} = useContext(AuthContext);\n  return (\n    <Route\n      {...rest}\n      render={routeProps =>\n        !!currentUser ? (\n          <RouteComponent {...routeProps} />\n        ) : (\n          <Redirect to={\"/signin\"} />\n        )\n      }\n    />\n  );\n};\n\n\nexport default PrivateRoute","import React, { forwardRef, useEffect, useRef, useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport TextField from '@material-ui/core/TextField';\nimport { Typography, Box, Button, Grid } from '@material-ui/core';\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        border: '2px grey solid',\n        padding: '0px 10px',\n        margin: 10,\n        background: 'yellow',\n\t\twidth: 700,\n        [theme.breakpoints.down(\"sm\")]: {\n            maxWidth: 300\n        }\n    },\n    button: {\n        background: 'orange',\n        margin: '10px 0'\n    }\n\n}));\n\n\nconst BasicTextFields = forwardRef((props, ref) => {\n    const classes = useStyles();\n    const [value, setValue] = React.useState('');\n\n    const { title, sendAnswer, taskId, questionId } = props\n\n    const handleChange = (event) => {\n        setValue(event.target.value)\n    };\n\n    return (\n        <div className={classes.root}>\n            <Box display=\"flex\" style={{ marginBottom: 10, marginTop: 10 }}>\n                <Typography variant=\"h6\" style={{ paddingRight: 8 }}>{title}</Typography>\n            </Box>\n            <TextField\n                label=\"Мой ответ\"\n                value={value}\n                style={{ background: 'white' }}\n                onChange={handleChange}\n                multiline\n                rows={5}\n                variant=\"outlined\"\n                fullWidth\n            />\n            <Grid container justify=\"flex-end\">\n                <Button className={classes.button} onClick={() => sendAnswer(taskId, questionId, value)}>Отправить</Button>\n            </Grid>\n\n        </div>\n    );\n})\n\nexport default BasicTextFields","import React, { useEffect, useState, useContext } from 'react';\nimport firebase from '../../util/Firebase'\n\nimport { Button, Grid, makeStyles, Typography } from '@material-ui/core';\n\nimport NativeSelect from '@material-ui/core/NativeSelect';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport FormControl from '@material-ui/core/FormControl';\n\nimport SearchIcon from '@material-ui/icons/Search';\nimport Card from './Card'\n\n\nconst useStyles = makeStyles((theme) => ({\n    select: {\n        margin: '20px 0',\n        width: 500,\n        [theme.breakpoints.down(\"sm\")]: {\n            maxWidth: 300\n        }\n    },\n\n}));\n\nconst FAQ = (props) => {\n\n    // console.log('TEST FUNCT')\n    // console.log(props)\n\n    //TODO load from SCHEMA\n    const classes = useStyles();\n    const taskTypes = ['ВСЕ', 'Поиск контактных данных', 'interview']\n\n\n    const [tasks, setTasks] = React.useState([]);\n    const [taskType, setTaskType] = React.useState(taskTypes[0]);\n    const [questions, setQuestions] = useState([])\n\n    const setTaskTypeHandler = (event) => {\n        setTaskType(event.target.value);\n    };\n\n    const handleClickApplyFilters = async (event) => {\n        let tasklist = await getTasks()\n        getQuestions(tasklist)\n    }\n\n    const getTasks = async () => {\n        let tasksList = []\n        let tasksRef = firebase.firestore().collection('tasks').where('case_type', '==', 'FAQ').where('is_complete', '==', false)\n\n        if (taskType !== 'ВСЕ') {\n            tasksRef = tasksRef.where(\"type\", \"==\", taskType)\n        }\n        console.log('fired')\n        await tasksRef.get().then(docs => {\n            docs.forEach(doc => {\n                tasksList.push({ id: doc.id, ...doc.data() })\n            })\n            tasksList.sort((a, b) => b.timestamp.toDate() - a.timestamp.toDate())\n            setTasks(tasksList)\n        })\n        return tasksList\n    }\n\n    const getQuestions = async (taskList) => {\n        let questionList = await taskList.map(async task => {\n            let arr = []\n            await firebase.firestore().collection('tasks').doc(task.id).collection('questions').get().then(snap => {\n                snap.forEach(doc => {\n                    arr.push({ taskId: task.id, questionId: doc.id, timestamp: task.timestamp.toDate(), ...doc.data() })\n                })\n            })\n            return arr\n        })\n        Promise.all(questionList).then(q => setQuestions([].concat.apply([], q)))\n    }\n\n    const sendAnswer = (taskId, questionId, answer) => {\n        firebase.firestore().collection('tasks').doc(taskId).collection('responses').doc(questionId).set({ answer: answer })\n        console.log(taskId, answer)\n    }\n\n\n    return (\n        <Grid container justify=\"center\">\n            <Grid container justify=\"center\">\n                <FormControl className={classes.select}>\n                    <NativeSelect\n                        value={taskType}\n                        onChange={setTaskTypeHandler}\n                        name=\"filterTaskType\"\n                    >\n                        {\n                            taskTypes.map((taskType, i) => (\n                                <option key={taskType} value={taskType}>{taskType}</option>\n                            ))\n                        }\n                    </NativeSelect>\n                    <FormHelperText>Выберите фильтр по типу задачи</FormHelperText>\n                </FormControl>\n            </Grid>\n\n            <Grid container justify=\"center\" className={classes.select}>\n                <Button\n                    style={{ width: '350px' }}\n                    type='number'\n                    variant=\"contained\"\n                    onClick={handleClickApplyFilters}\n                    color='primary'\n                    //className={classes.button}\n                    startIcon={<SearchIcon />}\n                >\n                    Применить фильтры\n                </Button>\n            </Grid>\n\n            <Grid container justify=\"center\">\n                {questions\n                    ? questions.map((task, i) => <Card key={'task_' + i} taskId={task.taskId} questionId={task.questionId} title={task.title} sendAnswer={sendAnswer} />)\n                    : <Typography style={{ padding: 30 }}>Нет новых вопросов</Typography>}\n            </Grid>\n        </Grid>\n    );\n}\n\nexport default FAQ","import React, { useState, useContext } from 'react'\nimport { AuthProvider } from \"./util/Auth\";\nimport {\n  HashRouter as Router,\n  Switch,\n  Route,\n  Link,\n  Redirect\n} from \"react-router-dom\";\nimport { AuthContext } from \"./util/Auth\";\n\nimport Grid from '@material-ui/core/Grid'\n\n// import Appbar from './Components/Appbar/Appbar'\n// import Appbar from './Components/Appbar/oldAppBar'\nimport Appbar from './Components/Appbar/newAppBar'\nimport Profile from './Components/Profile/Profile'\nimport Tasks from './Components/Tasks/Tasks'\nimport Task from './Components/Tasks/Task'\nimport Cases from './Components/Cases/Cases';\nimport Notifications from './Components/Notifications/Notifications'\nimport Home from './Components/Home/Home'\nimport TasksObserver from './Components/Moderator/TasksObserver'\nimport Signin from './Components/Auth/Signin';\nimport PrivateRoute from './util/PrivateRoute';\nimport FAQ from './Components/FAQ/FAQ';\n\n\nconst App = () => {\n\n  return (\n    <Router>\n      <Grid container justify=\"center\">\n        <Appbar>\n          <Switch>\n            <Route exact path=\"/profile\">\n              <Profile />\n            </Route>\n            <Route exact path=\"/request\">\n              <Cases />\n            </Route>\n            <Route exact path=\"/tasks\">\n              <Tasks />\n            </Route>\n            <Route path=\"/tasks/:id\">\n              <Task />\n            </Route>\n            <Route exact path=\"/tasksObserver\">\n              <TasksObserver />\n            </Route>\n            <Route exact path=\"/notifications\">\n              <Notifications />\n            </Route>\n            <Route exact path=\"/signin\">\n              <Signin />\n            </Route>\n            <Route exact path=\"/faq\">\n              <FAQ />\n            </Route>\n            <PrivateRoute path=\"/\" component={Home} />\n          </Switch>\n        </Appbar>\n      </Grid>\n    </Router>\n  )\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport {AuthProvider} from './util/Auth'\n\nReactDOM.render(\n  <React.StrictMode>\n    <AuthProvider>\n      <App />\n    </AuthProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}