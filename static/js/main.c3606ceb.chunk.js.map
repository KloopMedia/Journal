{"version":3,"sources":["util/Firebase.js","util/Auth.js","kloop_transparent_site.png","Components/Appbar/newAppBar.js","Components/form/feedback.js","Components/Dialog/FeedbackDialog.js","Components/form/file.js","Components/form/textInput.js","Components/form/selectBox.js","Components/form/radiobutton.js","Components/form/timePickers.js","Components/form/checkbox.js","Components/Profile/Profile.js","Components/Tasks/Card.js","Components/Tasks/Tasks.js","Components/form/text.js","Components/form/form.js","Components/Dialog/Dialog.js","Components/Tasks/Task.js","Components/Cases/Case.js","Components/Cases/Cases.js","Components/Notifications/Notification.js","Components/Notifications/Notifications.js","Components/Home/Home.js","Components/Moderator/UserCard.js","Components/Moderator/ModeratedTask.js","Components/Moderator/PaginatedTasks.js","Components/Moderator/TasksObserver.js","Components/Auth/Signin.js","util/PrivateRoute.js","Components/FAQ/Card.js","Components/FAQ/FAQ.js","App.js","reportWebVitals.js","index.js"],"names":["firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","provider","auth","GoogleAuthProvider","signInWithGoogle","signInWithPopup","AuthContext","React","createContext","AuthProvider","children","useState","currentUser","setCurrentUser","setPending","useEffect","onAuthStateChanged","user","rootRef","firestore","collection","userRef","doc","uid","get","then","exists","console","log","set","username","displayName","email","Provider","value","drawerWidth","useStyles","makeStyles","theme","root","display","drawer","breakpoints","up","width","flexShrink","appBar","background","boxShadow","marginLeft","menuButton","color","marginRight","spacing","toolbar","mixins","drawerPaper","content","flexGrow","padding","ResponsiveDrawer","props","window","classes","useTheme","mobileOpen","setMobileOpen","useContext","anchorEl","setAnchorEl","menuOpen","Boolean","handleDrawerToggle","moderator","setModerator","numOfMessages","setNumOfMessages","messages","setMessages","snap","forEach","id","catch","unsubscribe","where","orderBy","onSnapshot","a","size","m","count","data","shown","push","sort","b","created_date","toDate","className","Divider","to","container","undefined","document","body","CssBaseline","AppBar","position","Toolbar","IconButton","aria-label","edge","onClick","Grid","style","src","KloopLogo","alt","height","aria-controls","aria-haspopup","event","currentTarget","Badge","badgeContent","overlap","fill","fontSize","anchorOrigin","vertical","horizontal","keepMounted","transformOrigin","open","onClose","direction","alignItems","length","map","message","i","justify","Typography","flex","title","Button","update","align","borderColor","variant","signOut","Hidden","smUp","implementation","Drawer","anchor","paper","ModalProps","xsDown","Feedback","setValue","textValue","setTextValue","returnAnswer","FormControl","const","paddingBottom","RadioGroup","name","onChange","target","reason","text","answers","el","FormControlLabel","control","Radio","label","disabled","locked","TextField","multiline","rows","fullWidth","AlertDialog","Dialog","state","handleClose","aria-labelledby","aria-describedby","DialogTitle","DialogContent","DialogContentText","description","returnFeedback","DialogActions","dialogFunction","feedbackValue","autoFocus","File","setFormData","setShowFeedback","returnFile","feedbackType","askFeedback","saveQuestionFeedback","prevTaskId","type","files","multiple","BasicTextFields","forwardRef","ref","dialogOpen","setDialogOpen","setFeedback","feedbackFormData","showFeedback","index","response","attachMaterials","uploadFilesData","handleDialogClose","Box","marginBottom","marginTop","paddingRight","formControl","minWidth","SelectBox","setOpen","required","InputLabel","Select","labelId","onOpen","indexOf","MenuItem","RadioButton","flexWrap","textField","TimePickers","noValidate","InputLabelProps","shrink","InputProps","disableUnderline","CheckboxesGroup","setState","ready","setReady","answer","handleChange","checked","component","FormLabel","FormGroup","Checkbox","Profile","questions","setQuestions","setAnswers","forms","setForms","uploaded","setUploaded","redirect","setRedirect","setUserData","JSON","stringify","key","question","tmp","borderWidth","margin","mergedAnswers","q","bullet","pos","TaskCard","complete","language","cardColor","sendRequest","Card","CardContent","justifyContent","CardActions","Tasks","allTasks","setTasks","submittedTasks","setSubmitted","tasks","submitted","querySnapshot","is_complete","error","task","Form","uploadsRef","feedback_type","setResponses","lockButton","setLock","setCaseTasks","dialogState","setDialog","dialogType","setDialogType","releaseFeedbackData","setReleaseFeedbackData","openSnackbar","setOpenSnackbar","setFiles","useParams","handleCloseSnackbar","getQuestions","taskID","questionId","getResponses","r","responseId","getSameCaseTasks","sameCaseTasks","case_id","f","status","sq","sr","ques","t","resp","Promise","all","d","sf","res","newF","concat","getForms","file","arr","upload","Object","keys","storage","child","v","put","getDownloadURL","url","entries","previousTaskId","add","user_id","timestamp","FieldValue","serverTimestamp","alert","saveToFirebase","lock","merge","filename","arrayUnion","public_url","handleDialogOpen","release_status","release_description","Snackbar","autoHideDuration","action","Fragment","Case","caseId","userRanks","disableCase","setDisable","setMessage","parseInt","order","task_type","taskType","case_type","case_stage_id","Paper","border","item","Cases","allCases","setCases","cases","c","down","maxWidth","dt","setShown","date","opacity","paddingLeft","getDate","toString","padStart","getMonth","getFullYear","getHours","getMinutes","getSeconds","Notifications","cards","setCards","updateFirestoreStatus","Notification","queryString","require","Home","token","setToken","makeToken","uuid","Date","now","oldToken","tg_token","oldDate","substring","moment","diff","newToken","urlString","parse","location","search","rank","processed","Link","href","transform","UserCard","userInfo","gutterBottom","surname","district","phone","ModeratedTask","taskInfo","setTaskInfo","pending","passed","setPassed","notPassed","setNotPassed","verified","setVerified","notVerified","setNotVerified","getReviewStatus","review_status","getData","updateReviewStatus","assigned_users","users","find","getUserInfo","PaginatedTasks","page","setPage","rowsPerPage","dataSlice","setDataSlice","calculateSlice","pageNumber","rowsPage","iData","List","numberOfPages","Math","floor","start","end","slice","pagination","TablePagination","onChangePage","newPage","onChangeRowsPerPage","labelRowsPerPage","isAllowedToRenderTask","minHeight","xs","TasksObserver","taskTypes","taskTitles","taskReviewStatuses","setUser","setUsers","setTaskType","taskTitle","setTaskTitle","taskReviewStatus","setTaskReviewStatus","getUsers","usersList","usersRef","docs","getTasks","tasksList","tasksRef","NativeSelect","FormHelperText","startIcon","Signin","PrivateRoute","RouteComponent","rest","render","routeProps","button","select","FAQ","App","exact","path","Task","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.c3606ceb.chunk.js","sourcesContent":["import firebase from 'firebase';\r\n\r\nconst firebaseConfig = {\r\n    apiKey: \"AIzaSyBfzhQOCtbcUk_tWjPDnjYtHwoouCEkclg\",\r\n    authDomain: \"journal-bb5e3.firebaseapp.com\",\r\n    databaseURL: \"https://journal-bb5e3.firebaseio.com\",\r\n    projectId: \"journal-bb5e3\",\r\n    storageBucket: \"journal-bb5e3.appspot.com\",\r\n    messagingSenderId: \"918752509407\",\r\n    appId: \"1:918752509407:web:77670a68ff906f13e5d86a\"\r\n};\r\n  // Initialize Firebase\r\n  firebase.initializeApp(firebaseConfig);\r\n\r\n  const provider = new firebase.auth.GoogleAuthProvider();\r\n  export const signInWithGoogle = () => {\r\n    firebase.auth().signInWithPopup(provider);\r\n  };\r\n\r\nexport default firebase;","import React, { useEffect, useState } from \"react\";\r\nimport firebase from \"./Firebase\";\r\n\r\nexport const AuthContext = React.createContext();\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n  const [currentUser, setCurrentUser] = useState(null);\r\n  const [pending, setPending] = useState(true);\r\n\r\n  useEffect(() => {\r\n    firebase.auth().onAuthStateChanged((user) => {\r\n      setCurrentUser(user)\r\n      setPending(false)\r\n      let rootRef = firebase.firestore().collection(\"users\")\r\n      if (user) {\r\n        let userRef = rootRef.doc(user.uid)\r\n        userRef.get().then(doc => {\r\n          if (doc && doc.exists) {\r\n              // pass\r\n          }\r\n          else {\r\n            console.log(\"Creating user\")\r\n            userRef.set(\r\n              {\r\n                username: user.displayName,\r\n                email: user.email\r\n              }\r\n            )\r\n          }\r\n        })\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  // if(pending){\r\n  //   return <>Loading...</>\r\n  // }\r\n\r\n  return (\r\n    <AuthContext.Provider\r\n      value={{\r\n        currentUser\r\n      }}\r\n    >\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n","export default __webpack_public_path__ + \"static/media/kloop_transparent_site.f6fb098e.png\";","import React, { useContext, useState, useEffect } from 'react';\r\nimport { AuthContext } from '../../util/Auth';\r\nimport firebase, { signInWithGoogle } from '../../util/Firebase'\r\nimport PropTypes from 'prop-types';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport Hidden from '@material-ui/core/Hidden';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport InboxIcon from '@material-ui/icons/MoveToInbox';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport MailIcon from '@material-ui/icons/Mail';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\r\nimport KloopLogo from '../../kloop_transparent_site.png'\r\nimport NotificationsIcon from '@material-ui/icons/Notifications';\r\nimport { Badge } from '@material-ui/core';\r\nimport Grid from '@material-ui/core/Grid'\r\n\r\nimport {\r\n\tLink\r\n} from \"react-router-dom\";\r\n\r\nconst drawerWidth = 240;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\tdisplay: 'flex',\r\n\t},\r\n\tdrawer: {\r\n\t\t[theme.breakpoints.up('sm')]: {\r\n\t\t\twidth: drawerWidth,\r\n\t\t\tflexShrink: 0,\r\n\t\t},\r\n\t},\r\n\tappBar: {\r\n\t\tbackground: 'white',\r\n\t\tboxShadow: 'none',\r\n\t\t[theme.breakpoints.up('sm')]: {\r\n\t\t\twidth: `calc(100% - ${drawerWidth}px)`,\r\n\t\t\tmarginLeft: drawerWidth,\r\n\t\t},\r\n\t},\r\n\tmenuButton: {\r\n\t\tcolor: 'black',\r\n\t\tmarginRight: theme.spacing(2),\r\n\t\t[theme.breakpoints.up('sm')]: {\r\n\t\t\tdisplay: 'none',\r\n\t\t},\r\n\t},\r\n\t// necessary for content to be below app bar\r\n\ttoolbar: theme.mixins.toolbar,\r\n\tdrawerPaper: {\r\n\t\twidth: drawerWidth,\r\n\t},\r\n\tcontent: {\r\n\t\tflexGrow: 1,\r\n\t\tpadding: theme.spacing(3),\r\n\t},\r\n}));\r\n\r\nfunction ResponsiveDrawer(props) {\r\n\tconst { window } = props;\r\n\tconst classes = useStyles();\r\n\tconst theme = useTheme();\r\n\tconst [mobileOpen, setMobileOpen] = React.useState(false);\r\n\tconst { currentUser } = useContext(AuthContext);\r\n\tconst [anchorEl, setAnchorEl] = React.useState(null);\r\n\tconst menuOpen = Boolean(anchorEl);\r\n\r\n\tconst handleDrawerToggle = () => {\r\n\t\tsetMobileOpen(!mobileOpen);\r\n\t};\r\n\r\n\r\n\tconst [moderator, setModerator] = useState(false)\r\n\tconst [numOfMessages, setNumOfMessages] = useState(0)\r\n\tconst [messages, setMessages] = useState([])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (currentUser) {\r\n\t\t\tfirebase.firestore().collection('editors').get().then((snap) => {\r\n\t\t\t\tsnap.forEach(doc => {\r\n\t\t\t\t\tif (doc.id === currentUser.uid) {\r\n\t\t\t\t\t\tconsole.log('moderator')\r\n\t\t\t\t\t\tsetModerator(true)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}).catch(() => setModerator(false))\r\n\t\t}\r\n\t}, [currentUser])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (currentUser) {\r\n\t\t\tconst unsubscribe = firebase.firestore().collection('notifications').where('user_id', 'array-contains', currentUser.uid).orderBy('timestamp', 'desc').onSnapshot(async snap => {\r\n\t\t\t\tconsole.log(snap.size)\r\n\t\t\t\tlet m = []\r\n\t\t\t\tlet count = 0\r\n\t\t\t\tsnap.forEach(doc => {\r\n\t\t\t\t\tif (!doc.data().shown) {\r\n\t\t\t\t\t\tm.push({ id: doc.id, ...doc.data() })\r\n\t\t\t\t\t\tcount++\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tm.sort((a, b) => b.created_date.toDate() - a.created_date.toDate())\r\n\t\t\t\tsetNumOfMessages(count)\r\n\t\t\t\tsetMessages(m)\r\n\t\t\t})\r\n\t\t\treturn () => unsubscribe()\r\n\t\t}\r\n\t}, [currentUser])\r\n\r\n\tconst updateFirestoreStatus = (id, index) => {\r\n\t\tfirebase.firestore().collection('notifications').doc(id).update({ shown: true })\r\n\t}\r\n\r\n\tconst handleMenu = (event) => {\r\n\t\tsetAnchorEl(event.currentTarget);\r\n\t};\r\n\r\n\tconst handleMenuClose = () => {\r\n\t\tsetAnchorEl(null)\r\n\t}\r\n\r\n\tconst drawer = (\r\n\t\t<div>\r\n\t\t\t<div className={classes.toolbar} />\r\n\t\t\t<Divider />\r\n\t\t\t<nav>\r\n\t\t\t\t<ul>\r\n\t\t\t\t\t<li>\r\n\t\t\t\t\t\t<Link to=\"/\">Главная</Link>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li>\r\n\t\t\t\t\t\t<Link to=\"/profile\">Профиль</Link>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li>\r\n\t\t\t\t\t\t<Link to=\"/tasks\">Задания</Link>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li>\r\n\t\t\t\t\t\t<Link to=\"/request\">Получить задание</Link>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li>\r\n\t\t\t\t\t\t<Link to=\"/notifications\">Уведомления</Link>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t{moderator ? <li>\r\n\t\t\t\t\t\t<Link to=\"/tasksObserver\">Модератор</Link>\r\n\t\t\t\t\t</li> : null}\r\n\t\t\t\t\t{moderator ? <li>\r\n\t\t\t\t\t\t<Link to=\"/faq\">FAQ для модераторов</Link>\r\n\t\t\t\t\t</li> : null}\r\n\t\t\t\t</ul>\r\n\t\t\t</nav>\r\n\t\t</div>\r\n\t);\r\n\r\n\tconst container = window !== undefined ? () => window().document.body : undefined;\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<CssBaseline />\r\n\t\t\t<AppBar position=\"fixed\" className={classes.appBar}>\r\n\t\t\t\t<Toolbar>\r\n\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\tcolor=\"inherit\"\r\n\t\t\t\t\t\taria-label=\"open drawer\"\r\n\t\t\t\t\t\tedge=\"start\"\r\n\t\t\t\t\t\tonClick={handleDrawerToggle}\r\n\t\t\t\t\t\tclassName={classes.menuButton}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<MenuIcon />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t<Grid container style={{ flexGrow: 1 }}>\r\n\t\t\t\t\t\t<img src={KloopLogo} alt=\"Kloop.kg - Новости Кыргызстана\" style={{ width: 150, height: 'auto' }} />\r\n\t\t\t\t\t\t{/* <img src=\"https://kloop.kg/wp-content/uploads/2017/01/kloop_transparent_site.png\" alt=\"Kloop.kg - Новости Кыргызстана\" style={{ width: 150, height: 'auto' }} /> */}\r\n\t\t\t\t\t\t{/* <Typography variant=\"h5\" style={{ color: \"black\" }}>Journal</Typography> */}\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t{currentUser &&\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\taria-label=\"account of current user\"\r\n\t\t\t\t\t\t\t\taria-controls=\"menu-appbar\"\r\n\t\t\t\t\t\t\t\taria-haspopup=\"true\"\r\n\t\t\t\t\t\t\t\tonClick={handleMenu}\r\n\t\t\t\t\t\t\t\tcolor=\"inherit\"\r\n\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Badge badgeContent={numOfMessages} color=\"secondary\" overlap=\"circle\" >\r\n\t\t\t\t\t\t\t\t\t<NotificationsIcon style={{ fill: 'grey', fontSize: '28px' }} />\r\n\t\t\t\t\t\t\t\t</Badge>\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t<Menu\r\n\t\t\t\t\t\t\t\tid=\"menu-appbar\"\r\n\t\t\t\t\t\t\t\tanchorEl={anchorEl}\r\n\t\t\t\t\t\t\t\tanchorOrigin={{\r\n\t\t\t\t\t\t\t\t\tvertical: 'top',\r\n\t\t\t\t\t\t\t\t\thorizontal: 'right',\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tkeepMounted\r\n\t\t\t\t\t\t\t\ttransformOrigin={{\r\n\t\t\t\t\t\t\t\t\tvertical: 'top',\r\n\t\t\t\t\t\t\t\t\thorizontal: 'right',\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\topen={menuOpen}\r\n\t\t\t\t\t\t\t\tonClose={handleMenuClose}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Grid container direction=\"column\" alignItems=\"center\" >\r\n\t\t\t\t\t\t\t\t\t{messages.length > 0 ? messages.map((message, i) => (\r\n\t\t\t\t\t\t\t\t\t\t<Grid container key={\"notification_\" + i} className={classes.message} justify=\"flex-start\" style={{ padding: 0 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Typography style={{ flex: 1, padding: 10 }}>{message.title}</Typography>\r\n\t\t\t\t\t\t\t\t\t\t\t<Button style={{ padding: 10 }} onClick={() => updateFirestoreStatus(message.id)} size=\"small\">скрыть</Button>\r\n\t\t\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t\t)) : <Typography className={classes.message} align=\"center\" style={{ padding: 10 }}>Нет новых уведомлений</Typography>}\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t</Menu>\r\n\t\t\t\t\t\t</div>}\r\n\t\t\t\t\t{currentUser\r\n\t\t\t\t\t\t?\r\n\t\t\t\t\t\t<Button style={{ borderColor: \"black\", color: 'black', marginLeft: 10, fontSize: 12 }} variant=\"outlined\" size=\"small\" onClick={() => firebase.auth().signOut()}>Выход</Button>\r\n\t\t\t\t\t\t: <Button style={{ borderColor: \"black\", color: 'black', marginLeft: 10, fontSize: 12 }} size=\"small\" variant=\"outlined\" onClick={signInWithGoogle}>вход</Button>\r\n\t\t\t\t\t}\r\n\t\t\t\t</Toolbar>\r\n\t\t\t</AppBar>\r\n\t\t\t<nav className={classes.drawer} aria-label=\"mailbox folders\">\r\n\t\t\t\t{/* The implementation can be swapped with js to avoid SEO duplication of links. */}\r\n\t\t\t\t<Hidden smUp implementation=\"css\">\r\n\t\t\t\t\t<Drawer\r\n\t\t\t\t\t\tcontainer={container}\r\n\t\t\t\t\t\tvariant=\"temporary\"\r\n\t\t\t\t\t\tanchor={theme.direction === 'rtl' ? 'right' : 'left'}\r\n\t\t\t\t\t\topen={mobileOpen}\r\n\t\t\t\t\t\tonClose={handleDrawerToggle}\r\n\t\t\t\t\t\tclasses={{\r\n\t\t\t\t\t\t\tpaper: classes.drawerPaper,\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tModalProps={{\r\n\t\t\t\t\t\t\tkeepMounted: true, // Better open performance on mobile.\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{drawer}\r\n\t\t\t\t\t</Drawer>\r\n\t\t\t\t</Hidden>\r\n\t\t\t\t<Hidden xsDown implementation=\"css\">\r\n\t\t\t\t\t<Drawer\r\n\t\t\t\t\t\tclasses={{\r\n\t\t\t\t\t\t\tpaper: classes.drawerPaper,\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tvariant=\"permanent\"\r\n\t\t\t\t\t\topen\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{drawer}\r\n\t\t\t\t\t</Drawer>\r\n\t\t\t\t</Hidden>\r\n\t\t\t</nav>\r\n\t\t\t<main className={classes.content}>\r\n\t\t\t\t<div className={classes.toolbar} />\r\n\t\t\t\t{props.children}\r\n\t\t\t</main>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nResponsiveDrawer.propTypes = {\r\n\t/**\r\n\t * Injected by the documentation to work in an iframe.\r\n\t * You won't need it on your project.\r\n\t */\r\n\twindow: PropTypes.func,\r\n};\r\n\r\nexport default ResponsiveDrawer;\r\n","import React, { useState } from 'react';\r\nimport Radio from '@material-ui/core/Radio';\r\nimport RadioGroup from '@material-ui/core/RadioGroup';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport TextField from '@material-ui/core/TextField';\r\n\r\n\r\nconst Feedback = (props) => {\r\n\r\n    const [value, setValue] = useState(null)\r\n    const [textValue, setTextValue] = useState('')\r\n    const { returnAnswer } = props\r\n\r\n    const handleChange = (event) => {\r\n        setValue(event.target.value)\r\n        returnAnswer({reason: event.target.value, text: textValue})\r\n    };\r\n\r\n    const handleTextChange = (event) => {\r\n        setTextValue(event.target.value)\r\n        returnAnswer({reason: value, text: event.target.value})\r\n    }\r\n\r\n\r\n\r\n    return (\r\n        <div>\r\n            <h4>{props.title}</h4>\r\n            <FormControl const='fieldset' style={{paddingBottom: 15}}>\r\n                <RadioGroup aria-label={props.title} name={props.title} value={value} onChange={handleChange}>\r\n                    {props.answers.map((el, i) => <FormControlLabel\r\n                        key={i}\r\n                        value={el}\r\n                        control={<Radio color=\"primary\" />}\r\n                        label={el}\r\n                        disabled={props.locked ? true : false} />)}\r\n                </RadioGroup>\r\n            </FormControl>\r\n            <TextField\r\n                id={\"feedback_input\"}\r\n                label=\"Примечание\"\r\n                value={textValue}\r\n                onChange={handleTextChange}\r\n                // required={required}\r\n                multiline\r\n                rows={5}\r\n                variant=\"outlined\"\r\n                fullWidth\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Feedback","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nimport Feedback from '../form/feedback'\r\n\r\n\r\nexport default function AlertDialog(props) {\r\n\r\n  return (\r\n    <div>\r\n      <Dialog\r\n        open={props.state}\r\n        onClose={props.handleClose}\r\n        aria-labelledby=\"alert-dialog-title\"\r\n        aria-describedby=\"alert-dialog-description\"\r\n      >\r\n        <DialogTitle id=\"alert-dialog-title\">{props.title}</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText id=\"alert-dialog-description\">\r\n            <Typography>{props.description}</Typography>\r\n            <Feedback answers={props.answers} returnAnswer={props.returnFeedback} />\r\n          </DialogContentText>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={props.handleClose} color=\"primary\">\r\n            Отмена\r\n          </Button>\r\n          <Button onClick={props.dialogFunction} disabled={!props.feedbackValue.reason} color=\"primary\" autoFocus>\r\n            Подтвердить\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useContext, useEffect, useRef, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport { Typography, IconButton, Box, Button, Snackbar } from '@material-ui/core';\r\nimport FeedbackIcon from '@material-ui/icons/Feedback';\r\nimport FeedbackDialog from '../Dialog/FeedbackDialog'\r\nimport Feedback from './feedback'\r\n\r\nimport firebase from '../../util/Firebase'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        '& > *': {\r\n            width: '40ch',\r\n        },\r\n    },\r\n\r\n}));\r\n\r\n\r\nconst File = (props) => {\r\n    const classes = useStyles();\r\n    const [value, setValue] = React.useState('');\r\n    const [dialogOpen, setDialogOpen] = useState(false)\r\n    const [feedbackValue, setFeedback] = useState({})\r\n    const [feedbackFormData, setFormData] = useState({})\r\n    const [showFeedback, setShowFeedback] = useState(false)\r\n\r\n    const { returnFile, locked, id, feedbackType, askFeedback, saveQuestionFeedback, prevTaskId } = props\r\n\r\n    useEffect(() => {\r\n        console.log(feedbackType)\r\n        if (feedbackType && askFeedback) {\r\n            console.log(feedbackType)\r\n            firebase.firestore().collection('schema').doc('structure').collection('feedbacks').doc(feedbackType).get().then(doc => {\r\n                setFormData(doc.data())\r\n            })\r\n            setShowFeedback(true)\r\n        }\r\n        else {\r\n            setShowFeedback(false)\r\n        }\r\n    }, [feedbackType])\r\n\r\n    const handleChange = (event) => {\r\n        returnFile(event.target.files, id)\r\n    };\r\n\r\n    const sendFeedback = () => {\r\n        saveQuestionFeedback(feedbackValue, id, prevTaskId)\r\n        handleDialogClose()\r\n    }\r\n\r\n    const returnFeedback = (value) => {\r\n        setFeedback(value)\r\n    }\r\n\r\n\r\n    const handleDialogClose = () => {\r\n        setDialogOpen(false)\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            {/* <FeedbackDialog\r\n                title={feedbackFormData.title}\r\n                dialogFunction={sendFeedback}\r\n                state={dialogOpen}\r\n                handleClose={handleDialogClose}\r\n                feedbackValue={feedbackValue}\r\n                answers={feedbackFormData.answers}\r\n                description={feedbackFormData.description}\r\n                returnFeedback={returnFeedback}\r\n            />\r\n            <Box display=\"flex\" style={{ marginBottom: 10, marginTop: 20 }}>\r\n                <Typography variant=\"h6\" style={{ paddingRight: 8 }}>{props.title}</Typography>\r\n                {showFeedback && <IconButton size=\"small\" onClick={() => setDialogOpen(true)}><FeedbackIcon color=\"primary\" /></IconButton>}\r\n            </Box> */}\r\n            <input\r\n                    type=\"file\"\r\n                    onChange={handleChange}\r\n                    multiple\r\n                />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default File","import React, { forwardRef, useEffect, useRef, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport { Typography, IconButton, Box } from '@material-ui/core';\r\nimport FeedbackIcon from '@material-ui/icons/Feedback';\r\nimport FeedbackDialog from '../Dialog/FeedbackDialog'\r\nimport Feedback from './feedback'\r\nimport FirebaseFileUploader from './FirebaseFileUploader'\r\nimport File from './file'\r\n\r\nimport firebase from '../../util/Firebase'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\t'& > *': {\r\n\t\t\twidth: '40ch',\r\n\t\t},\r\n\t},\r\n\r\n}));\r\n\r\n\r\nconst BasicTextFields = forwardRef((props, ref) => {\r\n\tconst classes = useStyles();\r\n\tconst [value, setValue] = React.useState('');\r\n\tconst [dialogOpen, setDialogOpen] = useState(false)\r\n\tconst [answer, setAnswer] = useState(null)\r\n\tconst [feedbackValue, setFeedback] = useState({})\r\n\tconst [feedbackFormData, setFormData] = useState({})\r\n\tconst [showFeedback, setShowFeedback] = useState(false)\r\n\r\n\tconst { index, response, returnFile, locked, id, feedbackType, askFeedback, saveQuestionFeedback, prevTaskId, uploadFilesData, attachMaterials } = props\r\n\r\n\tuseEffect(() => {\r\n\t\tif (response) {\r\n\t\t\tsetValue(response)\r\n\t\t}\r\n\t}, [response])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (feedbackType && askFeedback) {\r\n\t\t\tconsole.log(feedbackType)\r\n\t\t\tfirebase.firestore().collection('schema').doc('structure').collection('feedbacks').doc(feedbackType).get().then(doc => {\r\n\t\t\t\tsetFormData(doc.data())\r\n\t\t\t})\r\n\t\t\tsetShowFeedback(true)\r\n\t\t}\r\n\t\telse {\r\n\t\t\tsetShowFeedback(false)\r\n\t\t}\r\n\t}, [feedbackType])\r\n\r\n\tconst handleChange = (event) => {\r\n\t\tsetValue(event.target.value)\r\n\t\tprops.returnAnswer(event.target.value, props.index)\r\n\t};\r\n\r\n\tconst sendFeedback = () => {\r\n\t\tsaveQuestionFeedback(feedbackValue, id, prevTaskId)\r\n\t\thandleDialogClose()\r\n\t}\r\n\r\n\tconst returnFeedback = (value) => {\r\n\t\tsetFeedback(value)\r\n\t}\r\n\r\n\r\n\tconst handleDialogClose = () => {\r\n\t\tsetDialogOpen(false)\r\n\t}\r\n\r\n\tconst handleFilesUpload = (filename, downloadURL) => {\r\n\t\tuploadFilesData(filename, downloadURL, id)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<FeedbackDialog\r\n\t\t\t\ttitle={feedbackFormData.title}\r\n\t\t\t\tdialogFunction={sendFeedback}\r\n\t\t\t\tstate={dialogOpen}\r\n\t\t\t\thandleClose={handleDialogClose}\r\n\t\t\t\tfeedbackValue={feedbackValue}\r\n\t\t\t\tanswers={feedbackFormData.answers}\r\n\t\t\t\tdescription={feedbackFormData.description}\r\n\t\t\t\treturnFeedback={returnFeedback}\r\n\t\t\t/>\r\n\t\t\t<Box display=\"flex\" style={{ marginBottom: 10, marginTop: 20 }}>\r\n\t\t\t\t<Typography variant=\"h6\" style={{ paddingRight: 8 }}>{props.title}</Typography>\r\n\t\t\t\t{showFeedback && <IconButton size=\"small\" onClick={() => setDialogOpen(true)}><FeedbackIcon color=\"primary\" /></IconButton>}\r\n\t\t\t</Box>\r\n\t\t\t<TextField\r\n\t\t\t\tid={\"inputBox\" + index}\r\n\t\t\t\tlabel=\"Мой ответ\"\r\n\t\t\t\tvalue={value}\r\n\t\t\t\tonChange={handleChange}\r\n\t\t\t\t// required={required}\r\n\t\t\t\tmultiline\r\n\t\t\t\trows={5}\r\n\t\t\t\tdisabled={locked}\r\n\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\tfullWidth\r\n\t\t\t/>\r\n\t\t\t{!locked && attachMaterials && <File returnFile={returnFile} locked={locked} id={id} />}\r\n\t\t\t{/* <FirebaseFileUploader\r\n                ref={ref}\r\n                title={\"\"}\r\n                index={index}\r\n                uploadFilesData={handleFilesUpload}\r\n            /> */}\r\n\t\t</div>\r\n\t);\r\n})\r\n\r\nexport default BasicTextFields","import React, { useEffect } from 'react';\r\nimport {makeStyles} from '@material-ui/core/styles';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport { Typography } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tformControl: {\r\n\t\tminWidth: 120,\r\n\t},\r\n}));\r\n\r\nexport default function SelectBox(props) {\r\n\tconst classes = useStyles();\r\n\tconst [value, setValue] = React.useState('');\r\n\tconst [open, setOpen] = React.useState(false);\r\n\r\n\tconst {index, response, required, locked } = props\r\n\r\n\tuseEffect(() => {\r\n\t\tif (response) {\r\n\t\t\t// console.log(props.answers[response])\r\n\t\t\t// setValue(props.answers[response])\r\n\t\t\tsetValue(response)\r\n\t\t}\r\n\t}, [response])\r\n\r\n\tconst handleChange = (event) => {\r\n\t\tsetValue(event.target.value);\r\n\t\tlet id = props.answers.indexOf(event.target.value)\r\n\t\tprops.returnAnswer(event.target.value, index)\r\n\t};\r\n\r\n\tconst handleClose = (event) => {\r\n\t\tsetOpen(false)\r\n\t};\r\n\r\n\tconst handleOpen = (event) => {\r\n\t\tsetOpen(true)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Typography variant=\"h6\" style={{marginBottom: 5, marginTop: 20}}>{props.title}</Typography>\r\n\t\t\t<FormControl className={classes.formControl} disabled={locked}>\r\n\t\t\t\t<InputLabel id=\"controlled-open-select-label\">Выбрать</InputLabel>\r\n\t\t\t\t<Select\r\n\t\t\t\t\tlabelId=\"controlled-open-select-label\"\r\n\t\t\t\t\tid={\"select\" + index}\r\n\t\t\t\t\topen={open}\r\n\t\t\t\t\tonClose={handleClose}\r\n\t\t\t\t\tonOpen={handleOpen}\r\n\t\t\t\t\tvalue={value}\r\n\t\t\t\t\tonChange={handleChange}>\r\n\t\t\t\t\t<MenuItem value={\"\"}><em>None</em></MenuItem>\r\n\t\t\t\t\t{props.answers.map((el, i) => <MenuItem key={i} value={el}>{el}</MenuItem>)}\r\n\t\t\t\t</Select>\r\n\t\t\t</FormControl>\r\n\t\t</div>\r\n\t)\r\n\r\n}","import React, { useEffect } from 'react';\r\nimport Radio from '@material-ui/core/Radio';\r\nimport RadioGroup from '@material-ui/core/RadioGroup';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport FormControl from '@material-ui/core/FormControl';\r\n\r\nexport default function RadioButton(props) {\r\n\tconst [value, setValue] = React.useState('');\r\n\tconst {index, response} = props\r\n\r\n\tuseEffect(() => {\r\n\t\tif (response) {\r\n\t\t\tsetValue(response)\r\n\t\t}\r\n\t}, [response])\r\n\r\n\tconst handleChange = (event) => {\r\n\t\tsetValue(event.target.value)\r\n\t\tlet id = props.answers.indexOf(event.target.value)\r\n\t\tprops.returnAnswer(event.target.value, index, id)\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<h4>{props.title}</h4>\r\n\t\t\t<FormControl const='fieldset'>\r\n\t\t\t\t<RadioGroup aria-label={props.title} name={props.title} value={value} onChange={handleChange}>\r\n\t\t\t\t\t{props.answers.map((el, i) => <FormControlLabel \r\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey={i} \r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={el} \r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcontrol={<Radio color=\"primary\" />} \r\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={el} \r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={props.locked ? true : false} />)}\r\n\t\t\t\t</RadioGroup>\r\n\t\t\t</FormControl>\r\n\t\t</div>\r\n\t)\r\n\t\t;\r\n}","import React, { useEffect } from 'react';\r\nimport {makeStyles} from '@material-ui/core/styles';\r\nimport TextField from '@material-ui/core/TextField';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tcontainer: {\r\n\t\tdisplay: 'flex',\r\n\t\tflexWrap: 'wrap',\r\n\t},\r\n\ttextField: {\r\n\t\tmarginLeft: theme.spacing(1),\r\n\t\tmarginRight: theme.spacing(1),\r\n\t\twidth: 'auto',\r\n\t},\r\n}));\r\n\r\nexport default function TimePickers(props) {\r\n\tconst classes = useStyles();\r\n\tconst [value, setValue] = React.useState('');\r\n\tconst {index, response} = props\r\n\r\n\tuseEffect(() => {\r\n\t\tif (response) {\r\n\t\t\tsetValue(response)\r\n\t\t}\r\n\t}, [index, response])\r\n\r\n\tconst handleChange = (event) => {\r\n\t\tsetValue(event.target.value)\r\n\t\tprops.returnAnswer(event.target.value, index, event.target.value)\r\n\t};\r\n\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<h4>{props.title}</h4>\r\n\t\t\t<form className={classes.container} noValidate>\r\n\t\t\t\t<TextField\r\n\t\t\t\t\tid={\"time\" + index}\r\n\t\t\t\t\tlabel=\"Время\"\r\n\t\t\t\t\ttype=\"time\"\r\n\t\t\t\t\tvalue={value}\r\n\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\tclassName={classes.textField}\r\n\t\t\t\t\tInputLabelProps={{\r\n\t\t\t\t\t\tshrink: true,\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tInputProps={{disableUnderline: true}}\r\n\t\t\t\t\tdisabled={props.locked ? true : false}\r\n\t\t\t\t/>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t);\r\n}","import React, {useEffect, useState} from 'react';\r\nimport FormLabel from '@material-ui/core/FormLabel';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport FormGroup from '@material-ui/core/FormGroup';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport { Typography } from '@material-ui/core';\r\n\r\n\r\nexport default function CheckboxesGroup(props) {\r\n    const [state, setState] = React.useState({});\r\n    const [ready, setReady] = useState(false)\r\n    const {index, answers, required, response, locked} = props\r\n\r\n    useEffect(() => {\r\n\t\tif (response) {\r\n            setState(response)\r\n            let a = {}\r\n            answers.forEach((answer, i) => {\r\n                if (response[answer]) {\r\n                    a[answer] = response[answer]\r\n                }\r\n                else {\r\n                    a[answer] = false\r\n                }\r\n            })\r\n            setState(a)\r\n            props.returnAnswer(a, index)\r\n        }\r\n        else {\r\n            let a = {}\r\n            answers.forEach((answer, i) => a[answer] = false)\r\n            props.returnAnswer(a, index)\r\n            \r\n        }\r\n        setReady(true)\r\n        console.log(state)\r\n    }, [response, answers])\r\n\r\n\r\n    const handleChange = (event) => {\r\n        setState({ ...state, [event.target.name]: event.target.checked });\r\n        props.returnAnswer({...state, [event.target.name]: event.target.checked}, index)\r\n    };\r\n\r\n    return (\r\n        ready ?\r\n        <div>\r\n            <Typography variant=\"h6\" style={{marginBottom: 0, marginTop: 20}}>{props.title}</Typography>\r\n            <FormControl component=\"fieldset\" disabled={locked}>\r\n                <FormLabel component=\"legend\">Выберите один или несколько вариантов</FormLabel>\r\n                <FormGroup>\r\n                    {answers.map((el, i) => (\r\n                        <FormControlLabel\r\n                            key={i}\r\n                            control={<Checkbox checked={state[el]} onChange={handleChange} name={el} />}\r\n                            label={el}\r\n                        />\r\n                    ))}\r\n                </FormGroup>\r\n            </FormControl>\r\n        </div> : null\r\n    );\r\n}\r\n","import React, { useState, useEffect, useContext } from 'react'\r\nimport firebase, { signInWithGoogle } from '../../util/Firebase'\r\nimport { AuthContext } from \"../../util/Auth\";\r\n\r\nimport TextInput from \"../form/textInput\";\r\nimport SelectBox from \"../form/selectBox\";\r\nimport RadioButton from \"../form/radiobutton\";\r\nimport TimePickers from \"../form/timePickers\";\r\nimport Checkbox from \"../form/checkbox\"\r\nimport { Button, Grid, Typography } from '@material-ui/core';\r\nimport { Redirect } from 'react-router';\r\n\r\n\r\nconst Profile = () => {\r\n    const [questions, setQuestions] = useState([])\r\n    const [answers, setAnswers] = useState({})\r\n    const [forms, setForms] = useState([])\r\n    const [uploaded, setUploaded] = useState(false)\r\n    const [redirect, setRedirect] = useState(false)\r\n    const [userData, setUserData] = useState({})\r\n\r\n    const { currentUser } = useContext(AuthContext);\r\n\r\n    useEffect(() => {\r\n        let user = {}\r\n        if (currentUser) {\r\n            firebase.firestore().collection(\"users\").doc(currentUser.uid).get().then(doc => {\r\n                setUserData(doc.data())\r\n                user = doc.data()\r\n            }).then(() => {\r\n                firebase.firestore().collection(\"profileTemplate\").doc(\"Template\").get().then(doc => {\r\n                    console.log(JSON.stringify(doc.data()))\r\n                    setQuestions(doc.data().questions)\r\n                    console.log(doc.data().questions)\r\n                    const forms = doc.data().questions.map((el, i) => {\r\n                        let response = null\r\n                        if (user[el.key]) {\r\n                            console.log(user[el.key])\r\n                            response = user[el.key]\r\n                        }\r\n                        if (el.type === 'input') {\r\n                            return <TextInput key={\"profile_\" + i} index={i} title={el.question} response={response} returnAnswer={returnAnswer} required={el.required} />\r\n                        }\r\n                        else if (el.type === 'select') {\r\n                            return <SelectBox key={\"profile_\" + i} index={i} title={el.question} response={response} answers={el.answers} returnAnswer={returnAnswer} required={el.required} />\r\n                        }\r\n                        else if (el.type === 'radio') {\r\n                            return <RadioButton key={\"profile_\" + i} index={i} title={el.question} response={response} answers={el.answers} returnAnswer={returnAnswer} required={el.required} />\r\n                        }\r\n                        else if (el.type === 'time') {\r\n                            return <TimePickers key={\"profile_\" + i} index={i} title={el.question} response={response} returnAnswer={returnAnswer} required={el.required} />\r\n                        }\r\n                        else if (el.type === 'checkbox') {\r\n                            return <Checkbox key={\"profile_\" + i} index={i} title={el.question} response={response} answers={el.answers} returnAnswer={returnAnswer} required={el.required} />\r\n                        }\r\n                        else {\r\n                            return null\r\n                        }\r\n                    })\r\n                    setForms(forms)\r\n                })\r\n            })\r\n        }\r\n    }, [currentUser])\r\n\r\n\r\n    const returnAnswer = (answer, index) => {\r\n        const tmp = answers\r\n        tmp[index] = answer\r\n        setAnswers(tmp)\r\n        console.log(answers)\r\n    }\r\n\r\n    const saveToFirebase = () => {\r\n        let mergedAnswers = {}\r\n        questions.forEach((q, i) => {\r\n            if (answers[i]) {\r\n                mergedAnswers[q.key] = answers[i]\r\n            }\r\n        })\r\n\r\n        firebase.firestore().collection(\"users\").doc(currentUser.uid).update({\r\n            // profileAnswers: answers,\r\n            ...mergedAnswers\r\n        }).then(() => setUploaded(true))\r\n    }\r\n\r\n    // const addCaseId = () => {\r\n    //     firebase.firestore().collection(\"tasks\").where(\"type\", \"==\", \"Поиск контактных данных\").get().then(snap => {\r\n    //         snap.forEach( async doc => {\r\n    //             await firebase.firestore().collection(\"tasks\").doc(doc.id).update({case_id: doc.id})\r\n    //             console.log(doc.id)\r\n    //         })\r\n    //     })\r\n    // }\r\n\r\n    return (\r\n        currentUser ?\r\n            <Grid style={{ padding: 30 }}>\r\n                {redirect && <Redirect to=\"/\" />}\r\n                {forms}\r\n                <Grid container style={{ padding: 20 }} justify=\"center\">\r\n                    <Button variant=\"outlined\" style={{ borderWidth: 2, borderColor: \"#003366\", color: '#003366', margin: 10 }} onClick={saveToFirebase}>Отправить</Button>\r\n                    {uploaded && <Button variant=\"outlined\" style={{ borderWidth: 2, borderColor: \"red\", color: 'red', margin: 10 }} onClick={() => setRedirect(true)} >На главную</Button>}\r\n                </Grid>\r\n\r\n            </Grid>\r\n            :\r\n            <Grid container direction=\"column\" style={{ padding: 20 }} justify=\"center\">\r\n                <Typography align=\"center\" variant=\"h3\">авторизируйтесь</Typography>\r\n                <br />\r\n                <Button variant=\"contained\" onClick={signInWithGoogle}>Войти с помощью аккаунта Google</Button>\r\n            </Grid>\r\n    )\r\n\r\n}\r\n\r\nexport default Profile","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nimport { Redirect } from 'react-router';\r\nimport { Box, Grid } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles({\r\n\troot: {\r\n\t\tminWidth: 250\r\n\t},\r\n\tbullet: {\r\n\t\tdisplay: 'inline-block',\r\n\t\tmargin: '0 2px',\r\n\t},\r\n\ttitle: {\r\n\t\tfontSize: 14,\r\n\t},\r\n\tpos: {\r\n\t\tmarginBottom: 12,\r\n\t},\r\n});\r\n\r\nconst TaskCard = (props) => {\r\n\tconst classes = useStyles();\r\n\tconst { title, complete, type, language, description, id, cardColor, sendRequest, disabled } = props\r\n\r\n\tconst [redirect, setRedirect] = useState(false)\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t{redirect && <Redirect to={\"/tasks/\" + id} />}\r\n\t\t\t<Card className={classes.root} style={{ background: cardColor }}>\r\n\t\t\t\t<CardContent>\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\">\r\n\t\t\t\t\t\t<Typography variant=\"h6\">\r\n\t\t\t\t\t\t\t{title}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t{complete && <Typography color=\"error\">\r\n\t\t\t\t\t\t\tСдано\r\n\t\t\t\t\t\t</Typography>}\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Typography variant=\"subtitle1\" className={classes.pos} color=\"textSecondary\">\r\n\t\t\t\t\t\t#{type}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t\t<Typography variant=\"body2\" component=\"p\">\r\n\t\t\t\t\t\tЗадание: {description}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t</CardContent>\r\n\t\t\t\t<CardActions>\r\n\t\t\t\t\t{sendRequest ?\r\n\t\t\t\t\t\t<Button variant=\"contained\" disabled={disabled} color=\"primary\" size=\"small\" onClick={() => sendRequest(type, id)}>{\"Получить задание\"}</Button>\r\n\t\t\t\t\t\t:\r\n\t\t\t\t\t\t<Button size=\"small\" onClick={() => setRedirect(true)}>{\"Открыть\"}</Button>\r\n\t\t\t\t\t}\r\n\t\t\t\t</CardActions>\r\n\t\t\t</Card>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default TaskCard","import React, { useState, useEffect, useContext } from 'react'\r\nimport firebase, { signInWithGoogle } from '../../util/Firebase'\r\nimport { AuthContext } from \"../../util/Auth\";\r\nimport { Grid, Typography } from '@material-ui/core';\r\n\r\nimport TaskCard from './Card'\r\n\r\n\r\nconst Tasks = (props) => {\r\n\r\n\tconst [allTasks, setTasks] = useState(null)\r\n\tconst [submittedTasks, setSubmitted] = useState(null)\r\n\tconst { currentUser } = useContext(AuthContext);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (currentUser) {\r\n\t\t\tlet tasks = []\r\n\t\t\tlet submitted = []\r\n\t\t\tconsole.log(\"Fired\")\r\n\t\t\tfirebase.firestore().collection(\"tasks\").where(\"assigned_users\", \"array-contains\", currentUser.uid).get()\r\n\t\t\t\t.then((querySnapshot) => {\r\n\t\t\t\t\tquerySnapshot.forEach((doc) => {\r\n\t\t\t\t\t\tconsole.log(doc.id, \" => \", doc.data());\r\n\t\t\t\t\t\tif (doc.data().is_complete) {\r\n\t\t\t\t\t\t\tsubmitted.push({ id: doc.id, ...doc.data() })\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\ttasks.push({ id: doc.id, ...doc.data() })\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tsetTasks(tasks)\r\n\t\t\t\t\tsetSubmitted(submitted)\r\n\t\t\t\t})\r\n\t\t\t\t.catch((error) => {\r\n\t\t\t\t\tconsole.log(\"Error getting documents: \", error);\r\n\t\t\t\t});\r\n\t\t}\r\n\t}, [currentUser])\r\n\r\n\r\n\r\n\r\n\treturn (\r\n\t\t<Grid container justify=\"center\" alignItems=\"center\" direction=\"column\">\r\n\t\t\t{/* <Grid>\r\n\t\t\t\t<Button onClick={requestTask}>Получить задание</Button>\r\n\t\t\t</Grid> */}\r\n\t\t\t<Typography variant=\"h4\">Задания</Typography>\r\n\r\n\t\t\t{allTasks && allTasks.map((task, i) => (\r\n\t\t\t\t<Grid key={'active_task_'+i} style={{ padding: 10 }}>\r\n\t\t\t\t\t<TaskCard title={task.title} complete={task.is_complete} description={task.description} type={task.type} id={task.id} />\r\n\t\t\t\t</Grid>\r\n\t\t\t))}\r\n\t\t\t{submittedTasks && submittedTasks.map((task, i) => (\r\n\t\t\t\t<Grid key={'submitted_task_'+i} style={{ padding: 10 }}>\r\n\t\t\t\t\t<TaskCard title={task.title} complete={task.is_complete} description={task.description} type={task.type} id={task.id} />\r\n\t\t\t\t</Grid>\r\n\t\t\t))}\r\n\r\n\t\t</Grid>\r\n\t)\r\n}\r\n\r\nexport default Tasks","import React, { useEffect } from 'react';\r\nimport { Typography } from '@material-ui/core';\r\n\r\n\r\n\r\nfunction BasicTextFields(props) {\r\n\r\n\tconst {title} = props\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Typography variant=\"h6\" style={{marginBottom: 0, marginTop: 20}}>{title}</Typography>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default BasicTextFields","import React, { forwardRef } from 'react'\r\n\r\nimport TextInput from \"./textInput\";\r\nimport SelectBox from \"./selectBox\";\r\nimport RadioButton from \"./radiobutton\";\r\nimport TimePickers from \"./timePickers\";\r\nimport Checkbox from \"./checkbox\"\r\nimport Text from \"./text\"\r\nimport File from \"./file\"\r\n\r\nconst Form = forwardRef((props, ref) => {\r\n\r\n    const { question, index, response, uploadsRef, returnAnswer, locked, askFeedback, saveQuestionFeedback, id, prevTaskId, returnFile, uploadFilesData } = props\r\n\r\n    if (question.type === 'input') {\r\n        return <TextInput\r\n            key={index}\r\n            // ref={ref}\r\n            index={index}\r\n            title={question.title}\r\n            response={response}\r\n            returnAnswer={returnAnswer}\r\n            required={question.required}\r\n            locked={locked}\r\n            askFeedback={askFeedback}\r\n            feedbackType={question.feedback_type}\r\n            saveQuestionFeedback={saveQuestionFeedback}\r\n            id={id}\r\n            prevTaskId={prevTaskId}\r\n            uploadFilesData={uploadFilesData}\r\n            uploadsRef={uploadsRef}\r\n            returnFile={returnFile}\r\n            attachMaterials={question.attachMaterials}\r\n        />\r\n    }\r\n    else if (question.type === 'select') {\r\n        return <SelectBox key={index} index={index} title={question.title} response={response} answers={question.answers} returnAnswer={returnAnswer} required={question.required} locked={locked} />\r\n    }\r\n    else if (question.type === 'radio') {\r\n        return <RadioButton key={index} index={index} title={question.title} response={response} answers={question.answers} returnAnswer={returnAnswer} required={question.required} locked={locked} />\r\n    }\r\n    else if (question.type === 'time') {\r\n        return <TimePickers key={index} index={index} title={question.title} response={response} returnAnswer={returnAnswer} required={question.required} locked={locked} />\r\n    }\r\n    else if (question.type === 'checkbox') {\r\n        return <Checkbox key={index} index={index} title={question.title} response={response} answers={question.answers} returnAnswer={returnAnswer} required={question.required} locked={locked} />\r\n    }\r\n    else if (question.type === 'text') {\r\n        return <Text key={index} title={question.title} />\r\n    }\r\n    else if (question.type === 'file') {\r\n        return <File key={index} index={index} id={id} title={question.title} returnFile={returnFile} locked={locked} askFeedback={askFeedback} feedbackType={question.feedback_type} saveQuestionFeedback={saveQuestionFeedback} prevTaskId={prevTaskId} />\r\n    }\r\n    else {\r\n        return null\r\n    }\r\n\r\n})\r\n\r\n\r\nexport default Form\r\n","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\n\r\nexport default function AlertDialog(props) {\r\n\r\n  return (\r\n    <div>\r\n      <Dialog\r\n        open={props.state}\r\n        onClose={props.handleClose}\r\n        aria-labelledby=\"alert-dialog-title\"\r\n        aria-describedby=\"alert-dialog-description\"\r\n      >\r\n        <DialogTitle id=\"alert-dialog-title\">{props.title}</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText id=\"alert-dialog-description\">\r\n            {props.content}\r\n          </DialogContentText>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={props.handleClose} color=\"primary\">\r\n            Отмена\r\n          </Button>\r\n          <Button onClick={props.dialogFunction} color=\"primary\" autoFocus>\r\n            Подтвердить\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect, useContext, useRef } from 'react'\r\nimport firebase, { signInWithGoogle } from '../../util/Firebase'\r\nimport { AuthContext } from \"../../util/Auth\";\r\n\r\nimport Form from \"../form/form\"\r\nimport Dialog from \"../Dialog/Dialog\"\r\nimport DialogFeedback from \"../Dialog/FeedbackDialog\"\r\nimport Feedback from \"../form/feedback\"\r\n\r\nimport { Button, Divider, Grid, Typography } from '@material-ui/core';\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n\r\nimport { Redirect, useParams } from 'react-router';\r\nimport { Link } from \"react-router-dom\";\r\n\r\n\r\nconst Tasks = () => {\r\n\tconst [questions, setQuestions] = useState([])\r\n\tconst [responses, setResponses] = useState([])\r\n\tconst [answers, setAnswers] = useState({})\r\n\tconst [forms, setForms] = useState([])\r\n\tconst [uploaded, setUploaded] = useState(false)\r\n\tconst [redirect, setRedirect] = useState(false)\r\n\tconst [userData, setUserData] = useState({})\r\n\tconst [lockButton, setLock] = useState(false)\r\n\tconst [caseTasks, setCaseTasks] = useState([])\r\n\tconst [dialogState, setDialog] = useState(false)\r\n\tconst [dialogType, setDialogType] = useState(null)\r\n\tconst [feedbackValue, setFeedback] = useState({})\r\n\tconst [releaseFeedbackData, setReleaseFeedbackData] = useState({})\r\n\tconst [openSnackbar, setOpenSnackbar] = useState(false);\r\n\tconst [files, setFiles] = useState({})\r\n\r\n\tconst { currentUser } = useContext(AuthContext);\r\n\tconst { id } = useParams();\r\n\r\n\tconst handleCloseSnackbar = (event, reason) => {\r\n\t\tif (reason === 'clickaway') {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tsetOpenSnackbar(false);\r\n\t};\r\n\r\n\t// const uploadsRef = useRef();\r\n\r\n\tuseEffect(() => {\r\n\t\tconst getQuestions = async (taskID) => {\r\n\t\t\tlet q = []\r\n\r\n\t\t\tawait firebase.firestore().collection(\"tasks\").doc(taskID).collection(\"questions\").get()\r\n\t\t\t\t.then((querySnapshot) => {\r\n\t\t\t\t\tquerySnapshot.forEach((doc) => {\r\n\t\t\t\t\t\tq.push({ questionId: doc.id, data: doc.data() })\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t\t.catch((error) => {\r\n\t\t\t\t\tconsole.log(\"Error getting documents: \", error);\r\n\t\t\t\t});\r\n\r\n\t\t\treturn q\r\n\t\t}\r\n\r\n\r\n\t\tconst getResponses = async (taskID) => {\r\n\t\t\tlet r = []\r\n\r\n\t\t\tawait firebase.firestore().collection(\"tasks\").doc(taskID).collection(\"responses\").get()\r\n\t\t\t\t.then((querySnapshot) => {\r\n\t\t\t\t\tquerySnapshot.forEach((doc) => {\r\n\t\t\t\t\t\tr.push({ responseId: doc.id, data: doc.data() })\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t\t.catch((error) => {\r\n\t\t\t\t\tconsole.log(\"Error getting documents: \", error);\r\n\t\t\t\t});\r\n\r\n\t\t\treturn r\r\n\t\t}\r\n\r\n\r\n\t\tconst getSameCaseTasks = async () => {\r\n\t\t\tlet sameCaseTasks = []\r\n\r\n\t\t\tawait firebase.firestore().collection(\"tasks\").doc(id).get().then(doc => {\r\n\t\t\t\treturn doc.data()\r\n\t\t\t}).then(async data => {\r\n\t\t\t\tawait firebase.firestore().collection(\"tasks\").where(\"case_id\", \"==\", data.case_id).get().then(snap => {\r\n\t\t\t\t\tsnap.forEach(doc => {\r\n\t\t\t\t\t\tif (doc.id !== id) {\r\n\t\t\t\t\t\t\tsameCaseTasks.push({ id: doc.id, ...doc.data() })\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t\treturn sameCaseTasks\r\n\t\t}\r\n\r\n\t\tconst getForms = async () => {\r\n\t\t\tlet f = []\r\n\t\t\tlet locked = true\r\n\r\n\t\t\tsetForms(null)\r\n\r\n\t\t\tawait firebase.firestore().collection(\"tasks\").doc(id).collection(\"user_editable\").doc(\"user_editable\").get().then(doc => {\r\n\t\t\t\tif (doc.data().status === 'complete') {\r\n\t\t\t\t\tlocked = true\r\n\t\t\t\t\tsetLock(true)\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tlocked = false\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t\tlet sq = []\r\n\t\t\tlet sr = []\r\n\r\n\t\t\tlet sameCaseTasks = await getSameCaseTasks()\r\n\t\t\tsetCaseTasks(sameCaseTasks)\r\n\t\t\tif (sameCaseTasks.length > 0) {\r\n\t\t\t\tlet ques = sameCaseTasks.map(t => {\r\n\t\t\t\t\treturn getQuestions(t.id)\r\n\t\t\t\t})\r\n\t\t\t\tlet resp = sameCaseTasks.map(t => {\r\n\t\t\t\t\treturn getResponses(t.id)\r\n\t\t\t\t})\r\n\t\t\t\tconsole.log(ques)\r\n\t\t\t\tawait Promise.all(ques).then(data => data.forEach(d => sq.push(...d)))\r\n\t\t\t\tawait Promise.all(resp).then(data => data.forEach(d => sr.push(...d)))\r\n\r\n\t\t\t\tconsole.log(sq)\r\n\t\t\t\tconsole.log(sr)\r\n\t\t\t}\r\n\r\n\t\t\tlet sf = sq.map((el, i) => {\r\n\t\t\t\tlet response = null\r\n\t\t\t\tsr.forEach((res) => {\r\n\t\t\t\t\tif (el.questionId === res.responseId) {\r\n\t\t\t\t\t\tresponse = res.data.answer\r\n\t\t\t\t\t\treturnAnswer(res.data.answer, i)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\treturn <Form key={el.questionId + '_' + i} question={el.data} index={i} response={response} returnAnswer={returnAnswer} locked={true} askFeedback={true} saveQuestionFeedback={saveQuestionFeedback} id={el.questionId} prevTaskId={sameCaseTasks[0].id} />\r\n\t\t\t})\r\n\r\n\t\t\tsf.push(<div key={\"div_divider_stripped\"} style={{ height: 25, margin: '20px 0', background: 'repeating-linear-gradient( 45deg, white, white 10px, grey 10px, grey 25px)' }}><br /></div>)\r\n\r\n\r\n\t\t\tlet q = await getQuestions(id)\r\n\t\t\tlet r = await getResponses(id)\r\n\r\n\r\n\t\t\tsetQuestions(q)\r\n\t\t\tsetResponses(r)\r\n\r\n\r\n\t\t\t// let newQ = sq.concat(q)\r\n\t\t\t// let newR = sr.concat(r)\r\n\r\n\t\t\tf = q.map((el, i) => {\r\n\t\t\t\tlet response = null\r\n\t\t\t\tr.forEach((res) => {\r\n\t\t\t\t\tif (el.questionId === res.responseId) {\r\n\t\t\t\t\t\tresponse = res.data.answer\r\n\t\t\t\t\t\treturnAnswer(res.data.answer, i)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<Form\r\n\t\t\t\t\t\tkey={el.questionId + '_' + i}\r\n\t\t\t\t\t\tquestion={el.data}\r\n\t\t\t\t\t\tindex={i}\r\n\t\t\t\t\t\tresponse={response}\r\n\t\t\t\t\t\treturnFile={returnFile}\r\n\t\t\t\t\t\treturnAnswer={returnAnswer}\r\n\t\t\t\t\t\tid={el.questionId}\r\n\t\t\t\t\t\tlocked={locked}\r\n\t\t\t\t\t\t// ref={uploadsRef}\r\n\t\t\t\t\t\tuploadFilesData={uploadFilesData} />\r\n\t\t\t\t)\r\n\t\t\t})\r\n\r\n\t\t\tlet newF = sf.concat(f)\r\n\t\t\tsetForms(newF)\r\n\t\t}\r\n\t\tif (currentUser) {\r\n\t\t\tgetForms()\r\n\t\t}\r\n\t}, [currentUser, id, lockButton])\r\n\r\n\r\n\tconst returnAnswer = (answer, index) => {\r\n\t\tconst tmp = answers\r\n\t\ttmp[index] = answer\r\n\t\tsetAnswers(tmp)\r\n\t}\r\n\r\n\tconst returnFile = (file, questionId) => {\r\n\t\tlet arr = [...file]\r\n\t\tlet tmp = files\r\n\t\ttmp[questionId] = arr\r\n\t\tsetFiles(tmp)\r\n\t\tconsole.log([...file], questionId)\r\n\t}\r\n\r\n\tconst upload = () => {\r\n\t\t// uploadsRef.current.startUpload()\r\n\t\tif (Object.keys(files).length > 0) {\r\n\t\t\tconsole.log('files')\r\n\t\t\tfor (const [key, value] of Object.entries(files)) {\r\n\t\t\t\tlet ref = firebase.storage().ref(id).child(key).child(currentUser.uid)\r\n\t\t\t\tvalue.forEach(v => ref.child(v.name).put(v).then(snap => snap.ref.getDownloadURL().then(url => uploadFilesData(v.name, url, key))))\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tconst saveQuestionFeedback = (data, questionId, previousTaskId) => {\r\n\t\tif (previousTaskId) {\r\n\t\t\tfirebase.firestore().collection('tasks').doc(previousTaskId).collection('feedbacks').doc(questionId).collection('messages')\r\n\t\t\t\t.add({\r\n\t\t\t\t\tanswer: data.reason,\r\n\t\t\t\t\ttext: data.text,\r\n\t\t\t\t\tuser_id: currentUser.uid,\r\n\t\t\t\t\ttimestamp: firebase.firestore.FieldValue.serverTimestamp()\r\n\t\t\t\t})\r\n\t\t\t\t.then(() => setOpenSnackbar(true))\r\n\t\t}\r\n\t\telse {\r\n\t\t\talert('Ошибка: Что-то пошло не так при сохранении фидбека. Сообщите программисту!')\r\n\t\t}\r\n\t}\r\n\r\n\tconst saveToFirebase = async (lock) => {\r\n\t\tupload()\r\n\t\tquestions.forEach(async (q, i) => {\r\n\t\t\tif (answers[i] || answers[i] === \"\") {\r\n\t\t\t\tawait firebase.firestore().collection(\"tasks\").doc(id).collection(\"responses\").doc(q.questionId).set({ answer: answers[i] }, { merge: true })\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\tif (lock) {\r\n\t\t\tawait firebase.firestore().collection(\"tasks\").doc(id).collection(\"user_editable\").doc(\"user_editable\").update({ status: 'complete' })\r\n\t\t\tsetLock(true)\r\n\t\t\tsetDialog(false)\r\n\t\t}\r\n\t\tsetUploaded(true)\r\n\t}\r\n\r\n\tconst uploadFilesData = async (filename, url, questionId) => {\r\n\t\tlet rootRef = firebase.firestore().collection(\"tasks\").doc(id).collection(\"responses\").doc(questionId)\r\n\t\tconsole.log(\"Файл отправлен\")\r\n\t\tif (filename && url) {\r\n\t\t\trootRef.set(\r\n\t\t\t\t{\r\n\t\t\t\t\tfiles: firebase.firestore.FieldValue.arrayUnion({ public_url: url, filename: filename })\r\n\t\t\t\t}, { merge: true }\r\n\t\t\t).then(() => console.log('super'))\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleDialogClose = () => {\r\n\t\tsetDialog(false);\r\n\t\tsetFeedback({})\r\n\t};\r\n\r\n\tconst handleDialogOpen = (type) => {\r\n\t\tif (type === 'send') {\r\n\t\t\tsetDialogType('send')\r\n\t\t\tsetDialog(true)\r\n\t\t}\r\n\t\tif (type === 'release') {\r\n\t\t\tsetDialogType('release')\r\n\t\t\tsetDialog(true)\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfirebase.firestore().collection(\"schema\").doc(\"structure\").collection(\"feedbacks\").doc(\"release\").get().then(doc => {\r\n\t\t\tsetReleaseFeedbackData(doc.data())\r\n\t\t})\r\n\t}, [])\r\n\r\n\tconst releaseTask = () => {\r\n\t\tfirebase.firestore().collection(\"tasks\").doc(id).collection(\"user_editable\").doc(\"user_editable\").update({ status: 'open' })\r\n\t\t\t.then(() => firebase.firestore().collection(\"tasks\").doc(id).collection(\"user_editable\").doc(\"user_editable\").update({ status: 'released', release_status: feedbackValue.reason, release_description: feedbackValue.text })\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tsetDialog(false)\r\n\t\t\t\t\tsetLock(true)\r\n\t\t\t\t}))\r\n\t\t// alert(feedbackValue)\r\n\t}\r\n\r\n\tconst handleFeedbackSave = (value) => {\r\n\t\tsetFeedback(value)\r\n\t}\r\n\r\n\treturn (\r\n\t\tcurrentUser ?\r\n\t\t\t<Grid style={{ padding: 30 }}>\r\n\t\t\t\t{dialogType === 'send' && <Dialog state={dialogState} handleClose={handleDialogClose} title={\"Отправить задание?\"} content={\"Вы собираетесь отправить задание. Это значит, что вы больше не сможете изменять ответы.\"} dialogFunction={() => saveToFirebase(true)} />}\r\n\t\t\t\t{dialogType === 'release' && <DialogFeedback\r\n\t\t\t\t\tstate={dialogState}\r\n\t\t\t\t\tfeedbackValue={feedbackValue}\r\n\t\t\t\t\thandleClose={handleDialogClose}\r\n\t\t\t\t\ttitle={releaseFeedbackData.title}\r\n\t\t\t\t\tdialogFunction={releaseTask}\r\n\t\t\t\t\tanswers={releaseFeedbackData.answers}\r\n\t\t\t\t\tdescription={releaseFeedbackData.description}\r\n\t\t\t\t\treturnFeedback={handleFeedbackSave} />}\r\n\t\t\t\t{redirect && <Redirect to=\"/tasks\" />}\r\n\t\t\t\t<Snackbar\r\n\t\t\t\t\tanchorOrigin={{\r\n\t\t\t\t\t\tvertical: 'bottom',\r\n\t\t\t\t\t\thorizontal: 'left',\r\n\t\t\t\t\t}}\r\n\t\t\t\t\topen={openSnackbar}\r\n\t\t\t\t\tautoHideDuration={6000}\r\n\t\t\t\t\tonClose={handleCloseSnackbar}\r\n\t\t\t\t\tmessage=\"Фидбек отправлен\"\r\n\t\t\t\t\taction={\r\n\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t<IconButton size=\"small\" aria-label=\"close\" color=\"inherit\" onClick={handleCloseSnackbar}>\r\n\t\t\t\t\t\t\t\t<CloseIcon fontSize=\"small\" />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t}\r\n\t\t\t\t/>\r\n\t\t\t\t{/* Предыдущие задания{caseTasks.map((t, i) => <Button key={\"case_button_\"+i} component={ Link } to={\"/tasks/\" + t.id}>{t.title}</Button>)} */}\r\n\t\t\t\t{forms}\r\n\t\t\t\t<Grid container style={{ padding: 20 }} justify=\"center\">\r\n\t\t\t\t\t<Button variant=\"outlined\" style={{ borderWidth: 2, borderColor: \"grey\", color: 'grey', margin: 5 }} onClick={() => setRedirect(true)}>Назад</Button>\r\n\t\t\t\t\t{!lockButton &&\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<Button variant=\"outlined\" disabled={lockButton} style={{ borderWidth: 2, borderColor: \"#003366\", color: '#003366', margin: 5 }} onClick={() => saveToFirebase(false)}>Сохранить</Button>\r\n\t\t\t\t\t\t\t<Button variant=\"outlined\" disabled={lockButton} style={{ borderWidth: 2, borderColor: \"red\", color: 'red', margin: 5 }} onClick={() => handleDialogOpen('send')}>Отправить</Button>\r\n\t\t\t\t\t\t\t<Button variant=\"outlined\" disabled={lockButton} style={{ borderWidth: 2, borderColor: \"red\", color: 'red', margin: 5 }} onClick={() => handleDialogOpen('release')}>Освободить</Button>\r\n\t\t\t\t\t\t</div>}\r\n\t\t\t\t</Grid>\r\n\r\n\t\t\t</Grid>\r\n\t\t\t:\r\n\t\t\t<Grid container direction=\"column\" style={{ padding: 20 }} justify=\"center\">\r\n\t\t\t\t<Typography align=\"center\" variant=\"h3\">авторизируйтесь</Typography>\r\n\t\t\t\t<br />\r\n\t\t\t\t<Button variant=\"contained\" onClick={signInWithGoogle}>Войти с помощью аккаунта Google</Button>\r\n\t\t\t</Grid>\r\n\t)\r\n\r\n}\r\n\r\nexport default Tasks","import React, { useEffect, useState, useContext } from 'react'\r\nimport { AuthContext } from \"../../util/Auth\";\r\nimport firebase from '../../util/Firebase'\r\n\r\nimport Paper from '@material-ui/core/Paper'\r\nimport Button from '@material-ui/core/Button';\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n\r\nimport Card from '../Tasks/Card'\r\nimport { Box, Grid, Typography } from '@material-ui/core'\r\nimport { set } from 'immutable';\r\n\r\n\r\nconst Case = (props) => {\r\n    const { caseId, userRanks } = props\r\n    const [allTasks, setTasks] = useState(null)\r\n    const [ready, setReady] = useState(false)\r\n    const { currentUser } = useContext(AuthContext);\r\n\r\n    const [open, setOpen] = React.useState(false);\r\n    const [disableCase, setDisable] = useState(false)\r\n    const [message, setMessage] = useState('')\r\n\r\n    const handleClose = (event, reason) => {\r\n        if (reason === 'clickaway') {\r\n            return;\r\n        }\r\n\r\n        setOpen(false);\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (currentUser) {\r\n            let tasks = []\r\n            console.log(\"Fired\")\r\n            firebase.firestore().collection(\"schema\").doc(\"structure\").collection(\"cases\").doc(caseId).collection(\"stages\").get()\r\n                .then((querySnapshot) => {\r\n                    querySnapshot.forEach((doc) => {\r\n                        // before change\r\n                        tasks.push({ id: doc.id, ...doc.data() })\r\n\r\n                        // after change\r\n                        // const ranks = doc.data().ranks\r\n                        // console.log(userRanks)\r\n                        // if (ranks && userRanks.some(userRank => ranks.includes(userRank))) {\r\n                        //     tasks.push({ id: doc.id, ...doc.data(), disabled: false })\r\n                        // }\r\n                        // else {\r\n                        //     tasks.push({ id: doc.id, ...doc.data(), disabled: true })\r\n                        //     setMessage(<Typography color=\"error\" display=\"block\">Получите достижение <Typography component=\"span\" display=\"inline\" color=\"primary\" align=\"justify\">Первопроходец Battle For Azeroth</Typography> чтобы активировать следующее задание</Typography>)\r\n                        // }\r\n                        \r\n                    });\r\n                })\r\n                .then(() => {\r\n                    tasks.sort((a, b) => parseInt(a.order) - parseInt(b.order))\r\n                    setTasks(tasks)\r\n                    setReady(true)\r\n                })\r\n                .catch((error) => {\r\n                    console.log(\"Error getting documents: \", error);\r\n                });\r\n        }\r\n    }, [currentUser])\r\n\r\n    useEffect(() => {\r\n        if (currentUser) {\r\n            firebase.firestore().collection('tasks').where('assigned_users', 'array-contains', currentUser.uid).where('is_complete', '==', false).get().then(snap => {\r\n                if (snap.size < 3) {\r\n                    console.log(\"SIZE\", snap.size)\r\n                    setDisable(false)\r\n                }\r\n                else {\r\n                    setDisable(true)\r\n                    setMessage(<Typography color=\"error\">У вас есть активные задания. Сдайте или освободите их, чтобы получить новые.</Typography>)\r\n                }\r\n            })\r\n        }\r\n    }, [currentUser, disableCase, open])\r\n\r\n    const sendRequest = (type, task_type) => {\r\n        firebase.firestore().collection(\"task_requests\").doc(currentUser.uid).collection(\"requests\").add({\r\n            taskType: type,\r\n            status: \"pending\",\r\n            user: currentUser.uid,\r\n            case_type: caseId,\r\n            case_stage_id: task_type\r\n        }).then((doc) => {\r\n            setOpen(true)\r\n            console.log('sending request')\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Snackbar\r\n                anchorOrigin={{\r\n                    vertical: 'bottom',\r\n                    horizontal: 'left',\r\n                }}\r\n                open={open}\r\n                autoHideDuration={6000}\r\n                onClose={handleClose}\r\n                message=\"Запрос отправлен\"\r\n                action={\r\n                    <React.Fragment>\r\n                        <IconButton size=\"small\" aria-label=\"close\" color=\"inherit\" onClick={handleClose}>\r\n                            <CloseIcon fontSize=\"small\" />\r\n                        </IconButton>\r\n                    </React.Fragment>\r\n                }\r\n            />\r\n\r\n            <Paper style={{ margin: '20px 5px', border: '1px grey solid' }}>\r\n                <Box style={{ padding: '10px 20px 0px' }}>\r\n                    <Box style={{ padding: '5px 10px 10px' }}>\r\n                        <Typography variant=\"h6\">{props.title}</Typography>\r\n                    </Box>\r\n                    <Box style={{ padding: '10px 10px 5px' }}>\r\n                        <Typography variant=\"body2\">{props.description}</Typography>\r\n                    </Box>\r\n                    <Box style={{ padding: '10px 10px 0px' }}>\r\n                        {message}\r\n                    </Box>\r\n                </Box>\r\n\r\n                <Grid container justify=\"center\" style={{ padding: 10 }}>\r\n                    {ready && allTasks.map((t, i) => (\r\n                        <Grid item key={i} style={{ padding: 10 }}>\r\n                            <Card title={t.title} description={t.description} type={t.type} id={t.id} cardColor=\"#F5F5F5\" sendRequest={sendRequest} disabled={disableCase || t.disabled} />\r\n                        </Grid>\r\n                    ))}\r\n                </Grid>\r\n            </Paper>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Case","import React, { useState, useEffect, useContext } from 'react'\r\nimport firebase from '../../util/Firebase'\r\nimport { AuthContext } from \"../../util/Auth\";\r\n\r\nimport Case from './Case'\r\n\r\n\r\nconst Cases = () => {\r\n\r\n    const { currentUser } = useContext(AuthContext);\r\n    const [allCases, setCases] = useState([])\r\n    const [ready, setReady] = useState(false)\r\n    const [userRanks, setRanks] = useState([])\r\n\r\n    // useEffect(() => {\r\n    //     if (currentUser) {\r\n    //         firebase.firestore().collection('users').doc(currentUser.uid).collection('user_private').doc('private').get().then(doc => {\r\n    //             if (doc && doc.exists) {\r\n    //                 let ranks = doc.data().ranks\r\n    //                 console.log(ranks)\r\n    //                 setRanks(ranks)\r\n    //                 getCasesFromFirebase(ranks)\r\n    //             }\r\n    //         })\r\n    //     }\r\n    // }, [currentUser])\r\n\r\n    useEffect(() => {\r\n        if (currentUser) {\r\n            let cases = []\r\n            console.log(\"Fired\")\r\n            firebase.firestore().collection(\"schema\").doc(\"structure\").collection(\"cases\").get()\r\n                .then((querySnapshot) => {\r\n                    querySnapshot.forEach((doc) => {\r\n                        cases.push({ id: doc.id, ...doc.data() })\r\n                    });\r\n                })\r\n                .then(() => {\r\n                    setCases(cases)\r\n                    setReady(true)\r\n                })\r\n                .catch((error) => {\r\n                    console.log(\"Error getting documents: \", error);\r\n                });\r\n        }\r\n    }, [currentUser])\r\n\r\n    const getCasesFromFirebase = (ranks) => {\r\n        let cases = []\r\n        console.log(\"Fired\")\r\n        firebase.firestore().collection(\"schema\").doc(\"structure\").collection(\"cases\").where('ranks', 'array-contains-any', ranks).get()\r\n            .then((querySnapshot) => {\r\n                querySnapshot.forEach((doc) => {\r\n                    console.log(doc.data())\r\n                    cases.push({ id: doc.id, ...doc.data() })\r\n                });\r\n            })\r\n            .then(() => {\r\n                setCases(cases)\r\n                setReady(true)\r\n            })\r\n            .catch((error) => {\r\n                console.log(\"Error getting documents: \", error);\r\n            });\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            {ready && allCases.map((c, i) => (\r\n                <Case key={i} title={c.title} description={c.description} caseId={c.id} userRanks={userRanks} />\r\n            ))}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Cases","import React, { useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nimport { Redirect } from 'react-router';\r\nimport { Grid } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\troot: {\r\n\t\tmargin: 20,\r\n\t\twidth: 500,\r\n\t\t[theme.breakpoints.down(\"sm\")]: {\r\n\t\t\tmaxWidth: 300\r\n\t\t}\r\n\t},\r\n\tbullet: {\r\n\t\tdisplay: 'inline-block',\r\n\t\tmargin: '0 2px',\r\n\t},\r\n\ttitle: {\r\n\t\tfontSize: 14,\r\n\t},\r\n\tpos: {\r\n\t\tmarginBottom: 12,\r\n\t},\r\n}));\r\n\r\nconst TaskCard = (props) => {\r\n\tconst classes = useStyles();\r\n\tconst { title, description, id, setShown, shown, date } = props\r\n\r\n\tconst getFormatDate = (dt) => {\r\n\t\t// let month = '' + (d.getMonth() + 1)\r\n\t\t// let day = '' + d.getDate()\r\n\t\t// let year = d.getFullYear()\r\n\r\n\t\t// if (month.length < 2)\r\n\t\t// \tmonth = '0' + month;\r\n\t\t// if (day.length < 2)\r\n\t\t// \tday = '0' + day;\r\n\t\tlet formatDate = `${\r\n\t\t\tdt.getDate().toString().padStart(2, '0')}/${\r\n\t\t\t(dt.getMonth()+1).toString().padStart(2, '0')}/${\r\n\t\t\tdt.getFullYear().toString().padStart(4, '0')} ${\r\n\t\t\tdt.getHours().toString().padStart(2, '0')}:${\r\n\t\t\tdt.getMinutes().toString().padStart(2, '0')}:${\r\n\t\t\tdt.getSeconds().toString().padStart(2, '0')}`\r\n\r\n\t\treturn formatDate\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Grid container justify=\"center\">\r\n\t\t\t<Card className={classes.root} style={shown ? { background: 'grey', opacity: 0.25 } : { background: 'lightblue' }} >\r\n\t\t\t\t<CardContent>\r\n\t\t\t\t\t<Typography variant=\"h6\">\r\n\t\t\t\t\t\t{title}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t\t<Typography variant=\"body2\" component=\"p\">\r\n\t\t\t\t\t\t{description}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t</CardContent>\r\n\t\t\t\t<CardActions style={{ justifyContent: 'space-between' }}>\r\n\t\t\t\t\t<Typography style={{paddingLeft: 8}} variant=\"subtitle2\">{getFormatDate(date.toDate())}</Typography>\r\n\t\t\t\t\t<Button size=\"small\" onClick={() => setShown(id)}>{\"Просмотрено\"}</Button>\r\n\t\t\t\t</CardActions>\r\n\t\t\t</Card>\r\n\t\t</Grid>\r\n\t);\r\n}\r\n\r\nexport default TaskCard","import { Button, Grid, Typography } from '@material-ui/core';\r\nimport React, { useEffect, useState, useContext } from 'react'\r\nimport { AuthContext } from '../../util/Auth';\r\nimport firebase from '../../util/Firebase'\r\n\r\nimport Notification from './Notification'\r\n\r\n\r\nconst Notifications = () => {\r\n\r\n    const { currentUser } = useContext(AuthContext);\r\n    const [cards, setCards] = useState([])\r\n\r\n    const updateFirestoreStatus = (id) => {\r\n        firebase.firestore().collection('notifications').doc(id).update({ shown: true })\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (currentUser) {\r\n            const unsubscribe = firebase.firestore().collection('notifications').where('user_id', 'array-contains', currentUser.uid).onSnapshot(async snap => {\r\n                let messages = []\r\n                snap.forEach((doc, i) => {\r\n                    messages.push({ id: doc.id, ...doc.data() })\r\n                })\r\n                console.log(messages[0].created_date.toDate())\r\n                messages.sort((a, b) => b.created_date.toDate() - a.created_date.toDate())\r\n                setCards(messages)\r\n            })\r\n            return () => unsubscribe()\r\n        }\r\n    }, [currentUser])\r\n\r\n    return (\r\n        <div>\r\n            <Typography variant=\"h5\" align=\"center\">Уведомления</Typography>\r\n            {cards.map((doc, i) => <Notification key={i} id={doc.id} index={i} date={doc.created_date} title={doc.title} setShown={updateFirestoreStatus} shown={doc.shown} description={doc.description} />)}\r\n        </div>\r\n    )\r\n\r\n}\r\n\r\nexport default Notifications","import React, { useContext, useEffect, useState } from 'react'\r\nimport firebase, { signInWithGoogle } from '../../util/Firebase'\r\nimport { AuthContext } from \"../../util/Auth\";\r\nimport moment from 'moment';\r\nimport { v1 as uuid } from 'uuid'\r\nimport { Button, Grid, Link, makeStyles, Typography } from '@material-ui/core';\r\n\r\nconst queryString = require('query-string');\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n        marginTop: 20,\r\n        background: 'lightgreen',\r\n        height: 200,\r\n        width: 500,\r\n        [theme.breakpoints.down(\"sm\")]: {\r\n            maxWidth: 300\r\n        }\r\n    }\r\n}));\r\n\r\n\r\nconst Home = () => {\r\n    const classes = useStyles();\r\n    const [token, setToken] = useState(null)\r\n    const { currentUser } = useContext(AuthContext);\r\n\r\n    useEffect(() => {\r\n        const makeToken = () => {\r\n            return uuid().toString() + '_' + Date.now()\r\n        }\r\n        if (currentUser) {\r\n            firebase.firestore().collection('users').doc(currentUser.uid).get().then(doc => {\r\n                const oldToken = doc.data().tg_token\r\n                if (oldToken) {\r\n                    console.log(oldToken)\r\n                    let oldDate = parseInt(oldToken.substring(oldToken.indexOf('_') + 1))\r\n                    let date = moment().diff(oldDate, 'hours')\r\n                    console.log(date)\r\n                    if (date > 0) {\r\n                        let newToken = makeToken()\r\n                        firebase.firestore().collection('users').doc(currentUser.uid).update({ tg_token: newToken })\r\n                        setToken(newToken)\r\n                    }\r\n                    else {\r\n                        setToken(oldToken)\r\n                    }\r\n                }\r\n                else {\r\n                    console.log('no token')\r\n                    let newToken = makeToken()\r\n                    firebase.firestore().collection('users').doc(currentUser.uid).update({ tg_token: newToken })\r\n                    setToken(newToken)\r\n                }\r\n            })\r\n        }\r\n\r\n    }, [currentUser])\r\n\r\n    useEffect(() => {\r\n        if (currentUser) {\r\n            let urlString = queryString.parse(window.location.search)\r\n            if (urlString.rank) {\r\n                console.log(urlString.rank)\r\n                firebase.firestore().collection('schema').doc('structure').collection('ranks').doc(urlString.rank).get().then(doc => {\r\n                    if (doc.exists) {\r\n                        console.log('creating request')\r\n                        firebase.firestore().collection('rank_requests').add({\r\n                            timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n                            user_id: currentUser.uid,\r\n                            processed: false,\r\n                            rank: doc.id\r\n                        })\r\n                    }\r\n                    else {\r\n                        console.log('no rank')\r\n                    }\r\n                })\r\n            }\r\n        }\r\n    }, [currentUser])\r\n\r\n    return (\r\n        currentUser ?\r\n            <Grid container justify=\"center\" direction=\"column\" alignItems=\"center\" className={classes.root} >\r\n                <Typography style={{ paddingBottom: 10 }} variant=\"h5\" align=\"center\">Подключите аккаунт к Telegram боту (наблюдателям обязательно!)</Typography>\r\n                {token ? <Link variant=\"h5\" href={\"https://telegram.me/journal_tg_bot?start=\" + token}>Ссылка на бот</Link> \r\n                : <Typography>Подождите. Ссылка создается</Typography>}\r\n            </Grid>\r\n            :\r\n            <Grid container direction=\"column\" style={{ padding: 20 }} justify=\"center\">\r\n                <Typography align=\"center\" variant=\"h3\">Регистрация</Typography>\r\n                <br />\r\n                <Button size=\"large\" color=\"primary\" variant=\"contained\" onClick={signInWithGoogle}>Войти с помощью аккаунта Google</Button>\r\n            </Grid>\r\n    )\r\n}\r\n\r\nexport default Home","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    minWidth: 275,\r\n  },\r\n  bullet: {\r\n    display: 'inline-block',\r\n    margin: '0 2px',\r\n    transform: 'scale(0.8)',\r\n  },\r\n  title: {\r\n    fontSize: 14,\r\n  },\r\n  pos: {\r\n    marginBottom: 12,\r\n  },\r\n});\r\n\r\nexport default function UserCard(props) {\r\n  const classes = useStyles();\r\n\r\n  console.log('TEST CARD')\r\n  console.log(props)\r\n\r\n  if(props.userInfo == {}){\r\n    return (<div></div>)\r\n  }\r\n\r\n  return (\r\n    <Card className={classes.root} variant=\"outlined\">\r\n      <CardContent>\r\n        <Typography className={classes.title} color=\"textSecondary\" gutterBottom>\r\n          id: {props.userInfo.id}\r\n        </Typography>\r\n        <Typography variant=\"h5\" component=\"h2\">\r\n        {props.userInfo.surname} {props.userInfo.name}\r\n        </Typography>\r\n        <Typography className={classes.pos} color=\"textSecondary\">\r\n          Регион: {props.userInfo.district}\r\n        </Typography>\r\n        <Typography variant=\"body2\" component=\"p\">\r\n          {props.userInfo.phone}\r\n        </Typography>\r\n        <Typography variant=\"body2\" component=\"p\">\r\n          {props.userInfo.email}\r\n        </Typography>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}","import React, { useEffect, useState, useContext } from 'react';\r\nimport firebase from '../../util/Firebase'\r\n\r\nimport Form from '../form/form'\r\nimport { Button, Grid, Typography } from '@material-ui/core';\r\n\r\nimport UserCard from '../Moderator/UserCard'\r\n\r\n\r\nconst ModeratedTask = (props) => {\r\n\r\n\tconst [tasks, setTasks] = React.useState([]);\r\n\tconst [taskInfo, setTaskInfo] = useState({})  \r\n\t\r\n\tlet userInfo = {}\r\n\r\n    const [questions, setQuestions] = useState([])    \r\n    const [responses, setResponses] = useState([])    \r\n    const [answers, setAnswers] = useState({})    \r\n    const [forms, setForms] = useState(<div></div>)\r\n    \r\n\tconst [pending, setPending] = useState(false)\r\n\tconst [passed, setPassed] = useState(false)\r\n\tconst [notPassed, setNotPassed] = useState(false)\r\n\tconst [verified, setVerified] = useState(false)\r\n\tconst [notVerified, setNotVerified] = useState(false)\r\n\r\n\tconst getReviewStatus = async () => {\r\n        firebase.firestore().collection(\"tasks\").doc(props.task.id).get().then(doc => {\r\n\t\t\t\t\r\n\t\t\tlet review_status = doc.data().review_status\r\n\t\t\t\r\n\t\t\tsetPending(review_status === 'pending')\r\n\t\t\tsetPassed(review_status === 'passed')\r\n\t\t\tsetNotPassed(review_status === 'not passed')\r\n\t\t\tsetVerified(review_status === 'verified')\r\n\t\t\tsetNotVerified(review_status === 'not verified')\t\t\t\r\n        })\r\n\t}\r\n\t\r\n\tconst getUserInfo = () => {\r\n\r\n\t\tif (taskInfo.assigned_users !== undefined && taskInfo.assigned_users.length > 0){\r\n\t\t\r\n\t\t\tlet item = props.users.find(item => item.id === taskInfo.assigned_users[0])\r\n\t\t\tif (item !== undefined){\r\n\t\t\t\tuserInfo = item\r\n\t\t\t}\t\t\t\t\r\n\t\t\telse{\r\n\t\t\t\tuserInfo = {}\r\n\t\t\t}\r\n\t\t}\r\n        \r\n    }\r\n\r\n    useEffect(() => {\r\n\t\tconst getData = async () => {\r\n\t\t\tlet q = []\r\n\t\t\tlet r = []\r\n\t\t\tlet f = []\r\n\t\t\tlet locked = true\r\n\r\n\r\n\t\t\tconsole.log(\"HOOK\")\r\n\t\t\tgetReviewStatus()\t\t\r\n\t\t\t\r\n\t\t\tawait firebase.firestore().collection(\"tasks\").doc(props.task.id).get()\r\n\t\t\t\t.then(doc => {\t\t\t\t\r\n\t\t\t\t\tsetTaskInfo(doc.data())\r\n\t\t\t\t})\r\n\t\t\t\t.catch((error) => {\r\n\t\t\t\t\tconsole.log(\"Error getting documents: \", error);\r\n\t\t\t\t});\r\n\r\n\t\t\tawait firebase.firestore().collection(\"tasks\").doc(props.task.id).collection(\"questions\").get()\r\n\t\t\t\t.then((querySnapshot) => {\r\n\t\t\t\t\tquerySnapshot.forEach((doc) => {\r\n\t\t\t\t\t\t// console.log(doc.id, \" => \", doc.data());\r\n\t\t\t\t\t\tq.push({ questionId: doc.id, data: doc.data() })\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tsetQuestions(q)\r\n\t\t\t\t})\r\n\t\t\t\t.catch((error) => {\r\n\t\t\t\t\tconsole.log(\"Error getting documents: \", error);\r\n\t\t\t\t});\r\n\r\n\t\t\tawait firebase.firestore().collection(\"tasks\").doc(props.task.id).collection(\"responses\").get()\r\n\t\t\t\t.then((querySnapshot) => {\r\n\t\t\t\t\tquerySnapshot.forEach((doc) => {\r\n\t\t\t\t\t\t// console.log(doc.id, \" => \", doc.data());\r\n\t\t\t\t\t\tr.push({ responseId: doc.id, data: doc.data() })\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tsetResponses(r)\r\n\t\t\t\t})\r\n\t\t\t\t.catch((error) => {\r\n\t\t\t\t\tconsole.log(\"Error getting documents: \", error);\r\n\t\t\t\t});\r\n\t\t\r\n\r\n\t\t\t//ЗАЛИПУХА!!!\r\n\t\t\tsetForms(<div></div>)\t\r\n\r\n\t\t\tf = q.map((el, i) => {\r\n\t\t\t\tlet response = null\r\n\t\t\t\t// console.log(i)\r\n\t\t\t\tr.forEach((res) => {\r\n\t\t\t\t\tif (el.questionId === res.responseId) {\r\n\t\t\t\t\t\tresponse = res.data.answer\r\n\t\t\t\t\t\treturnAnswer(res.data.answer, i)\r\n\t\t\t\t\t\t// console.log(res.data)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\treturn <Form key={i} question={el.data} index={i} response={response} returnAnswer={returnAnswer} locked={locked} />\r\n\t\t\t})\r\n\t\t\tsetForms(f)\r\n\t\t}\r\n\t\tif (props.task.id) {\r\n\t\t\tgetData()\r\n\t\t}\r\n\t}, [props.task.id])\r\n    \r\n    const returnAnswer = (answer, index) => {\r\n\t\tconst tmp = answers\r\n\t\ttmp[index] = answer\r\n\t\tsetAnswers(tmp)\r\n\t\t// console.log(answers)\r\n\t}\r\n\r\n\tconst handlePending = () => {\r\n\t\tupdateReviewStatus('pending')\r\n\t\tgetReviewStatus()\r\n\t}\r\n\r\n\tconst handlePassed = () => {\r\n\t\tupdateReviewStatus('passed')\r\n\t\tgetReviewStatus()\r\n\t}\r\n\r\n\tconst handleNotPassed = () => {\r\n\t\tupdateReviewStatus('not passed')\r\n\t\tgetReviewStatus()\r\n\t}\r\n\r\n\tconst handleVerified = () => {\r\n\t\tupdateReviewStatus('verified')\r\n\t\tgetReviewStatus()\r\n\t}\r\n\r\n\tconst handleNotVerified = () => {\r\n\t\tupdateReviewStatus('not verified')\r\n\t\tgetReviewStatus()\r\n\t}\r\n\t\r\n\tconst updateReviewStatus = async (review_status) => {\r\n\t\tawait firebase.firestore().collection(\"tasks\").doc(props.task.id).update({ review_status: review_status })\r\n\t}\r\n    \r\n    // console.log('TEST')\r\n    // console.log(tasks)\r\n\r\n\tgetUserInfo()\r\n\treturn (\r\n\t\t<Grid style={{ padding: 30 }}>\r\n\r\n\t\t\t<Grid container style={{ padding: 20 }} justify=\"center\">\r\n\t\t\t\t<Button variant=\"contained\" color={pending ? \"secondary\" : '{}'} onClick={handlePending}>\r\n\t\t\t\t\tPENDING\r\n\t\t\t\t</Button>\r\n\t\t\t\t<Button variant=\"contained\" color={passed ? \"secondary\" : '{}'} onClick={handlePassed}>\r\n\t\t\t\t\tPASSED\r\n\t\t\t\t</Button>\r\n\t\t\t\t<Button variant=\"contained\" color={notPassed ? \"secondary\" : '{}'} onClick={handleNotPassed}>\r\n\t\t\t\t\tNOT PASSED\r\n\t\t\t\t</Button>\r\n\t\t\t\t<Button variant=\"contained\" color={verified ? \"secondary\" : '{}'} onClick={handleVerified}>\r\n\t\t\t\t\tVERIFIED\r\n\t\t\t\t</Button>\r\n\t\t\t\t<Button variant=\"contained\" color={notVerified ? \"secondary\" : '{}'} onClick={handleNotVerified}>\r\n\t\t\t\t\tNOT VERIFIED\r\n\t\t\t\t</Button>\r\n            </Grid>\r\n\r\n\t\t\t<Grid container justify = \"center\">\r\n                <UserCard userInfo={userInfo}> </UserCard>\r\n            </Grid>\r\n\r\n            {forms}\r\n            \r\n\r\n\t\t\t</Grid>\r\n\t);\r\n}\r\n\r\nexport default ModeratedTask","import React, {useState, useEffect} from 'react'\r\nimport ModeratedTask from './ModeratedTask'\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport TablePagination from \"@material-ui/core/TablePagination\";\r\nimport {List} from \"immutable\"\r\n\r\nconst rowsPP = 1;\r\n\r\nconst PaginatedTasks= props => {\r\n    const [page, setPage] = useState(0);\r\n    const [rowsPerPage, setRowsPerPage] = useState(rowsPP);\r\n    const [dataSlice, setDataSlice] = useState([]);\r\n\r\n    const calculateSlice = (pageNumber, rowsPage, data) => {\r\n        const iData = List(data)\r\n        const numberOfPages = Math.floor(iData.size / rowsPage);\r\n        console.log(\"numberOfPages\", numberOfPages);\r\n        const start = pageNumber * rowsPage;\r\n        let end = iData.size\r\n        if (pageNumber !== numberOfPages - 1) {\r\n            end = (pageNumber + 1) * rowsPage;\r\n        }\r\n        console.log(\"Start\", start);\r\n        console.log(\"End\", end);\r\n        return data.slice(start, end)\r\n    }\r\n\r\n    const handleChangePage = (event, newPage) => {\r\n        setDataSlice(calculateSlice(newPage, rowsPerPage, props.data));\r\n        setPage(newPage);\r\n    };\r\n    const handleChangeRowsPerPage = (event) => {\r\n        // setPage(0);\r\n        // setRowsPerPage(event.target.value);\r\n        // setDataSlice(calculateSlice(0, event.target.value, props.data));\r\n    };\r\n\r\n    useEffect(() => {\r\n        // Update the document title using the browser API\r\n        setPage(0)\r\n        setDataSlice(calculateSlice(0, rowsPP, props.data));\r\n    }, [props.data]);\r\n\r\n\r\n    const pagination = props.data.length > 0 && (\r\n        <Grid container justify = \"center\">\r\n        <TablePagination\r\n            justify=\"center\"\r\n            component=\"div\"\r\n            count={props.data.length}\r\n            page={page}\r\n            onChangePage={handleChangePage}\r\n            rowsPerPage={rowsPerPage}\r\n            onChangeRowsPerPage={handleChangeRowsPerPage}\r\n            labelRowsPerPage = 'По одной задаче на страницу!'\r\n        /></Grid>)\r\n\r\n\r\n    // console.log('PAGINATION')\r\n    // console.log(dataSlice)\r\n\r\n    const isAllowedToRenderTask = dataSlice[0] !== undefined\r\n    return (\r\n        <div>\r\n            {pagination}\r\n            <Grid\r\n                container\r\n                spacing={0}\r\n                direction=\"column\"\r\n                alignItems=\"center\"\r\n                justify=\"center\"\r\n                style={{minHeight: '100vh'}}>\r\n\r\n                <Grid item xs={12}>\r\n                    <Grid container justify=\"center\" direction='column' spacing={1}>\r\n                       \r\n                            {isAllowedToRenderTask\r\n                                ? <Grid item>\r\n                                    <ModeratedTask \r\n                                        task={dataSlice[0]}\r\n                                        users={props.users}                                      \r\n                                    ></ModeratedTask>\r\n                                </Grid>\r\n                                : 'Выберите и примените фильтры!'\r\n                            }\r\n\r\n\r\n                    </Grid>\r\n                </Grid>\r\n\r\n            </Grid>\r\n            {pagination}\r\n        </div>\r\n    )\r\n\r\n}\r\n\r\nexport default PaginatedTasks","import React, { useEffect, useState, useContext } from 'react';\r\nimport firebase from '../../util/Firebase'\r\n\r\nimport Form from '../form/form'\r\nimport { Button, Grid, Typography } from '@material-ui/core';\r\n\r\nimport PaginatedTasks from '../Moderator/PaginatedTasks'\r\n\r\nimport NativeSelect from '@material-ui/core/NativeSelect';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport FormControl from '@material-ui/core/FormControl';\r\n\r\nimport SearchIcon from '@material-ui/icons/Search';\r\n\r\nconst TasksObserver = (props) => {\r\n\r\n    // console.log('TEST FUNCT')\r\n    // console.log(props)\r\n\r\n    //TODO load from SCHEMA\r\n    const taskTypes = ['ВСЕ', 'Поиск контактных данных', 'interview']   \r\n\r\n    //TODO load from SCHEMA        \r\n    const taskTitles = ['ВСЕ', 'Задание № 1.1', 'Задание № 1.2', 'Задание № 1.3', 'Задание № 2.1']  \r\n\r\n    //TODO load from SCHEMA        \r\n    const taskReviewStatuses = ['ВСЕ', 'pending', 'passed', 'not passed', 'verified', 'not verified']\r\n\r\n    const [tasks, setTasks] = React.useState([]);\r\n    const [user, setUser] = React.useState('ВСЕ');\r\n    const [users, setUsers] = React.useState([]);\r\n    const [taskType, setTaskType] = React.useState(taskTypes[0]);\r\n    const [taskTitle, setTaskTitle] = React.useState(taskTitles[0]);\r\n    const [taskReviewStatus, setTaskReviewStatus] = React.useState(taskReviewStatuses[0]);\r\n\r\n    const setTaskTypeHandler = (event) => {\r\n        setTaskType(event.target.value); \r\n    };\r\n\r\n    const setTaskTitleHandler = (event) => {\r\n        setTaskTitle(event.target.value); \r\n    };\r\n\r\n    const setUserHandler = (event) => {\r\n        setUser(event.target.value); \r\n    };\r\n\r\n    const setTaskReviewStatusHandler = (event) => {\r\n        setTaskReviewStatus(event.target.value); \r\n    };    \r\n\r\n    const handleClickApplyFilters = (event) => {\r\n\r\n        getTasks()\r\n\r\n      }\r\n\r\n    \r\n    const getUsers = async () => {\r\n        let usersList = [{id: 'ВСЕ', name: 'ВСЕ', surname: ''}]\r\n        let usersRef = firebase.firestore().collection('users').orderBy(\"surname\")\r\n        await usersRef.get().then(docs => {\r\n            docs.forEach(doc => {\r\n                usersList.push({id: doc.id, ...doc.data()})\r\n            })\r\n\r\n            setUsers(usersList)\r\n        })\r\n    }\r\n\r\n    const getTasks = async () => {\r\n        let tasksList = []\r\n        let tasksRef = firebase.firestore().collection('tasks')\r\n\r\n        // console.log('USER ID')\r\n        // console.log(user)\r\n\r\n        if(user != 'ВСЕ'){\r\n            tasksRef = tasksRef.where(\"assigned_users\", \"array-contains\", user)\r\n        }\r\n\r\n        if(taskTitle != 'ВСЕ'){\r\n            tasksRef = tasksRef.where(\"title\", \"==\", taskTitle)\r\n        }\r\n\r\n        if(taskType != 'ВСЕ'){\r\n            tasksRef = tasksRef.where(\"type\", \"==\", taskType)\r\n        }\r\n\r\n        if(taskReviewStatus != 'ВСЕ'){\r\n            tasksRef = tasksRef.where(\"review_status\", \"==\", taskReviewStatus)\r\n        }\r\n\r\n        await tasksRef.get().then(docs => {\r\n            docs.forEach(doc => {\r\n                tasksList.push({id: doc.id, ...doc.data()})\r\n            })\r\n\r\n            setTasks(tasksList)\r\n        })\r\n    }\r\n\r\n    useEffect(() => {        \r\n        getUsers()        \r\n    }, [])   \r\n    \r\n    // console.log('USERS')\r\n    // console.log(users)\r\n\r\n\treturn (\r\n        <div>\r\n            <Grid container justify = \"center\">\r\n                <FormControl style={{width:'350px'}}>\r\n                <NativeSelect\r\n                    value={user.value}\r\n                    onChange={setUserHandler}\r\n                    name=\"filterUser\"\r\n                    //inputProps={{ 'aria-label': 'filterViolation' }}\r\n                >\r\n                    {\r\n                        users.map(userInfo => (\r\n                        <option value={userInfo.id}> {userInfo.surname} {userInfo.name}</option>\r\n                    ))\r\n                    }\r\n                </NativeSelect>\r\n                 <FormHelperText>Выберите фильтр по users</FormHelperText>\r\n                </FormControl>\r\n            </Grid>\r\n\r\n            <Grid container justify = \"center\">\r\n                <FormControl style={{width:'350px'}}>\r\n                <NativeSelect\r\n                    value={taskTitle}\r\n                    onChange={setTaskTitleHandler}\r\n                    name=\"filterTaskTitle\"\r\n                    //inputProps={{ 'aria-label': 'filterViolation' }}\r\n                >\r\n                    {\r\n                        taskTitles.map(taskTitle => (\r\n                        <option value={taskTitle}>{taskTitle}</option>\r\n                    ))\r\n                    }\r\n                </NativeSelect>\r\n                 <FormHelperText>Выберите фильтр по наименованию задачи</FormHelperText>\r\n                </FormControl>\r\n            </Grid>\r\n\r\n            <Grid container justify = \"center\">\r\n                <FormControl style={{width:'350px'}}>\r\n                <NativeSelect\r\n                    value={taskType}\r\n                    onChange={setTaskTypeHandler}\r\n                    name=\"filterTaskType\"\r\n                    //inputProps={{ 'aria-label': 'filterViolation' }}\r\n                >\r\n                    {\r\n                        taskTypes.map(taskType => (\r\n                        <option value={taskType}>{taskType}</option>\r\n                    ))\r\n                    }\r\n                </NativeSelect>\r\n                 <FormHelperText>Выберите фильтр по типу задачи</FormHelperText>\r\n                </FormControl>\r\n            </Grid>\r\n\r\n            <Grid container justify = \"center\">\r\n                <FormControl style={{width:'350px'}}>\r\n                <NativeSelect\r\n                    value={taskReviewStatus}\r\n                    onChange={setTaskReviewStatusHandler}\r\n                    name=\"filterReviewStatus\"\r\n                    //inputProps={{ 'aria-label': 'filterViolation' }}\r\n                >\r\n                    {\r\n                        taskReviewStatuses.map(taskReviewStatus => (\r\n                        <option value={taskReviewStatus}>{taskReviewStatus}</option>\r\n                    ))\r\n                    }\r\n                </NativeSelect>\r\n                 <FormHelperText>Выберите фильтр по review_status</FormHelperText>\r\n                </FormControl>\r\n            </Grid>\r\n\r\n            <Grid container justify = \"center\">\r\n                <Button\r\n                    style={{width:'350px'}}\r\n                    type ='number'\r\n                    variant=\"contained\"\r\n                    onClick={handleClickApplyFilters}\r\n                    color= 'primary'\r\n                    //className={classes.button}\r\n                    startIcon={<SearchIcon />}\r\n                >\r\n                    Применить фильтры\r\n                </Button>\r\n            </Grid>\r\n\r\n            <Grid container justify = \"center\">\r\n                <PaginatedTasks data={tasks} users={users}></PaginatedTasks>\r\n            </Grid>\r\n        </div>\r\n\t);\r\n}\r\n\r\nexport default TasksObserver","import React, { useContext } from 'react'\r\nimport { signInWithGoogle } from '../../util/Firebase'\r\nimport { Button, Grid, Typography } from '@material-ui/core'\r\nimport { AuthContext } from '../../util/Auth';\r\nimport { Redirect } from 'react-router';\r\n\r\n\r\nconst Signin = () => {\r\n    const { currentUser } = useContext(AuthContext);\r\n    if (currentUser) {\r\n        return <Redirect to={'/'} />;\r\n    }\r\n    return (\r\n        <Grid container direction=\"column\" style={{ padding: 20 }} justify=\"center\">\r\n            <Typography align=\"center\" variant=\"h4\">Регистрация</Typography>\r\n            <Typography variant=\"body1\" align=\"center\">Нажмите на кнопку (Вход или Регистрация).</Typography>\r\n            <Typography variant=\"body1\" align=\"center\">Если у вас нет аккаунта Google, то создайте его.</Typography>\r\n            <br />\r\n            <Button size=\"large\" color=\"primary\" variant=\"contained\" onClick={signInWithGoogle}>Регистрация</Button>\r\n        </Grid>\r\n    )\r\n}\r\n\r\nexport default Signin","import React, { useContext } from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport { AuthContext } from \"./Auth\";\r\n\r\nconst PrivateRoute = ({ component: RouteComponent, ...rest }) => {\r\n  const {currentUser} = useContext(AuthContext);\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={routeProps =>\r\n        !!currentUser ? (\r\n          <RouteComponent {...routeProps} />\r\n        ) : (\r\n          <Redirect to={\"/signin\"} />\r\n        )\r\n      }\r\n    />\r\n  );\r\n};\r\n\r\n\r\nexport default PrivateRoute","import React, { forwardRef, useEffect, useRef, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport { Typography, Box, Button, Grid } from '@material-ui/core';\r\n\r\nimport firebase from '../../util/Firebase'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        border: '2px grey solid',\r\n        padding: '0px 10px',\r\n        margin: 10,\r\n        background: 'yellow',\r\n\t\twidth: 700,\r\n        [theme.breakpoints.down(\"sm\")]: {\r\n            maxWidth: 300\r\n        }\r\n    },\r\n    button: {\r\n        background: 'orange',\r\n        margin: '10px 0'\r\n    }\r\n\r\n}));\r\n\r\n\r\nconst BasicTextFields = forwardRef((props, ref) => {\r\n    const classes = useStyles();\r\n    const [value, setValue] = React.useState('');\r\n\r\n    const { title, index } = props\r\n\r\n    const handleChange = (event) => {\r\n        setValue(event.target.value)\r\n    };\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <Box display=\"flex\" style={{ marginBottom: 10, marginTop: 10 }}>\r\n                <Typography variant=\"h6\" style={{ paddingRight: 8 }}>{title}</Typography>\r\n            </Box>\r\n            <TextField\r\n                id={\"inputBox\" + index}\r\n                label=\"Мой ответ\"\r\n                value={value}\r\n                style={{ background: 'white' }}\r\n                onChange={handleChange}\r\n                multiline\r\n                rows={5}\r\n                variant=\"outlined\"\r\n                fullWidth\r\n            />\r\n            <Grid container justify=\"flex-end\">\r\n                <Button className={classes.button}>Отправить</Button>\r\n            </Grid>\r\n\r\n        </div>\r\n    );\r\n})\r\n\r\nexport default BasicTextFields","import React, { useEffect, useState, useContext } from 'react';\r\nimport firebase from '../../util/Firebase'\r\n\r\nimport { Button, Grid, makeStyles, Typography } from '@material-ui/core';\r\n\r\nimport NativeSelect from '@material-ui/core/NativeSelect';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport FormControl from '@material-ui/core/FormControl';\r\n\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport Card from './Card'\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    select: {\r\n        width: 500,\r\n        [theme.breakpoints.down(\"sm\")]: {\r\n            maxWidth: 300\r\n        }\r\n    },\r\n\r\n}));\r\n\r\nconst FAQ = (props) => {\r\n\r\n    // console.log('TEST FUNCT')\r\n    // console.log(props)\r\n\r\n    //TODO load from SCHEMA\r\n    const classes = useStyles();\r\n    const taskTypes = ['ВСЕ', 'Поиск контактных данных', 'interview']\r\n\r\n\r\n    const [tasks, setTasks] = React.useState([]);\r\n    const [taskType, setTaskType] = React.useState(taskTypes[0]);\r\n\r\n    const setTaskTypeHandler = (event) => {\r\n        setTaskType(event.target.value);\r\n    };\r\n\r\n    const handleClickApplyFilters = (event) => {\r\n        getTasks()\r\n    }\r\n\r\n    const getTasks = async () => {\r\n        let tasksList = []\r\n        let tasksRef = firebase.firestore().collection('tasks').where('case_type', '==', 'FAQ').where('is_complete', '==', false)\r\n\r\n        if (taskType !== 'ВСЕ') {\r\n            tasksRef = tasksRef.where(\"type\", \"==\", taskType)\r\n        }\r\n        console.log('fired')\r\n        await tasksRef.get().then(docs => {\r\n            docs.forEach(doc => {\r\n                // doc.ref.collection('questions').get().then(snap => {\r\n                //     snap.forEach(taskData => )\r\n                // })\r\n                tasksList.push({ id: doc.id, ...doc.data() })\r\n            })\r\n            console.log(tasksList)\r\n            setTasks(tasksList)\r\n        })\r\n    }\r\n\r\n\r\n    return (\r\n        <Grid container justify=\"center\">\r\n            <Grid container justify=\"center\">\r\n                <FormControl className={classes.select}>\r\n                    <NativeSelect\r\n                        value={taskType}\r\n                        onChange={setTaskTypeHandler}\r\n                        name=\"filterTaskType\"\r\n                    >\r\n                        {\r\n                            taskTypes.map(taskType => (\r\n                                <option value={taskType}>{taskType}</option>\r\n                            ))\r\n                        }\r\n                    </NativeSelect>\r\n                    <FormHelperText>Выберите фильтр по типу задачи</FormHelperText>\r\n                </FormControl>\r\n            </Grid>\r\n\r\n            <Grid container justify=\"center\" className={classes.select}>\r\n                <Button\r\n                    style={{ width: '350px' }}\r\n                    type='number'\r\n                    variant=\"contained\"\r\n                    onClick={handleClickApplyFilters}\r\n                    color='primary'\r\n                    //className={classes.button}\r\n                    startIcon={<SearchIcon />}\r\n                >\r\n                    Применить фильтры\r\n                </Button>\r\n            </Grid>\r\n\r\n            <Grid container justify=\"center\">\r\n                {tasks.map((task, i) => <Card key={'FAQ_' + i} title=\"test\" />)}\r\n                {tasks.length === 0 && <Typography style={{ padding: 30}}>Нет новых вопросов</Typography>}\r\n                {/* <Card key={'FAQ'} title=\"test\" /> */}\r\n            </Grid>\r\n        </Grid>\r\n    );\r\n}\r\n\r\nexport default FAQ","import React, { useState, useContext } from 'react'\r\nimport { AuthProvider } from \"./util/Auth\";\r\nimport {\r\n  HashRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Link,\r\n  Redirect\r\n} from \"react-router-dom\";\r\nimport { AuthContext } from \"./util/Auth\";\r\n\r\nimport Grid from '@material-ui/core/Grid'\r\n\r\n// import Appbar from './Components/Appbar/Appbar'\r\n// import Appbar from './Components/Appbar/oldAppBar'\r\nimport Appbar from './Components/Appbar/newAppBar'\r\nimport Profile from './Components/Profile/Profile'\r\nimport Tasks from './Components/Tasks/Tasks'\r\nimport Task from './Components/Tasks/Task'\r\nimport Cases from './Components/Cases/Cases';\r\nimport Notifications from './Components/Notifications/Notifications'\r\nimport Home from './Components/Home/Home'\r\nimport TasksObserver from './Components/Moderator/TasksObserver'\r\nimport Signin from './Components/Auth/Signin';\r\nimport PrivateRoute from './util/PrivateRoute';\r\nimport FAQ from './Components/FAQ/FAQ';\r\n\r\n\r\nconst App = () => {\r\n\r\n  return (\r\n    <Router>\r\n      <Grid container justify=\"center\">\r\n        <Appbar>\r\n          <Switch>\r\n            <Route exact path=\"/profile\">\r\n              <Profile />\r\n            </Route>\r\n            <Route exact path=\"/request\">\r\n              <Cases />\r\n            </Route>\r\n            <Route exact path=\"/tasks\">\r\n              <Tasks />\r\n            </Route>\r\n            <Route path=\"/tasks/:id\">\r\n              <Task />\r\n            </Route>\r\n            <Route exact path=\"/tasksObserver\">\r\n              <TasksObserver />\r\n            </Route>\r\n            <Route exact path=\"/notifications\">\r\n              <Notifications />\r\n            </Route>\r\n            <Route exact path=\"/signin\">\r\n              <Signin />\r\n            </Route>\r\n            <Route exact path=\"/faq\">\r\n              <FAQ />\r\n            </Route>\r\n            <PrivateRoute path=\"/\" component={Home} />\r\n          </Switch>\r\n        </Appbar>\r\n      </Grid>\r\n    </Router>\r\n  )\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport {AuthProvider} from './util/Auth'\n\nReactDOM.render(\n  <React.StrictMode>\n    <AuthProvider>\n      <App />\n    </AuthProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}